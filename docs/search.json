[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Global Fishing Watch documentation",
    "section": "",
    "text": "Welcome to GFW Documentation",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Introduction</span>"
    ]
  },
  {
    "objectID": "index.html#welcome-to-gfw-documentation",
    "href": "index.html#welcome-to-gfw-documentation",
    "title": "Global Fishing Watch documentation",
    "section": "",
    "text": "Warning\n\n\n\nWORK IN PROGRESS. Information on this book is not up to date. We are currently working on improving GFW documentation.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Introduction</span>"
    ]
  },
  {
    "objectID": "Data-Updates.html",
    "href": "Data-Updates.html",
    "title": "(PART) Data updates",
    "section": "",
    "text": "Running list of updates to note in regard to Global Fishing Watch data and data changes",
    "crumbs": [
      "(PART) Data updates"
    ]
  },
  {
    "objectID": "Data-Updates.html#december-15-2023",
    "href": "Data-Updates.html#december-15-2023",
    "title": "(PART) Data updates",
    "section": "December 15, 2023",
    "text": "December 15, 2023\nDue to limits on data partitions last year we removed 2012 data from the pipe_production_v20201001 tables. We have now had to do that again for 2013.\nNote: this does not apply to pipe 3 where this issue is resolved. Therefore the following applies:\nIf using pipe 2.5 (pipe_production_v20201001) currently note that it will now have data from 2014- present\nIf you want older data please join with the archive version of the table of interest which will include both 2012 and 2013 (you do no longer need to use the 2012 version of the dataset). Additional clarification: * the tables with prefix 2012 will be kept * For each cases, we’ll have tables with suffix archive which will contain the archive years (in this case 2012 and 2013 data). Making anyone decision if they want to join the archive or the _2012 ones =&gt; this implies a breaking change to who are using only 2012 and wants the 2012 and 2013 data, in that case it should be use archive.",
    "crumbs": [
      "(PART) Data updates"
    ]
  },
  {
    "objectID": "Data-Updates.html#august-19-2022-updates",
    "href": "Data-Updates.html#august-19-2022-updates",
    "title": "(PART) Data updates",
    "section": "August 19, 2022 Updates",
    "text": "August 19, 2022 Updates\nThis update contains a handful of updates that have been released since the last update message below on March 7, 2022.\n\nThe research tables are now located in the pipeline dataset and new analyses should no longer use the gfw_research.pipe_vYYYYMMDD tables\n\nAll research tables are now prefixed with research_ instead of pipe_vYYYYMMDD as they are now stored in the pipeline dataset they correspond to rather than gfw_research\nThe primary table of AIS positions (formerly gfw_research.pipe_vYYYYMMDD) is now called research_messages\nThere is no longer a separate table for just fishing vessels (e.g. pipe_vYYYYMMDD_fishing). Instead, theresearch_messagestable includes a booleanis_fishing_vesselfield and queries for just fishing vessels can be made ~10x cheaper by filtering withWHERE is_fishing_vessel`.\nAll other research tables (e.g. _ids, _segs, etc.) are unchanged aside from their name\nSee the Fishing effort and vessel presence Wiki page for more details.\n\nVessel info tables are now automated in sync with the vessel database and will be updated every month\nOffsetting table has been updated and is now at the seg_id level instead of the yearly level.\n\nTable: gfw_research_precursors.offsetting_year_seg_v20220609",
    "crumbs": [
      "(PART) Data updates"
    ]
  },
  {
    "objectID": "Data-Updates.html#march-7-2022-updates",
    "href": "Data-Updates.html#march-7-2022-updates",
    "title": "(PART) Data updates",
    "section": "March 7, 2022 Updates",
    "text": "March 7, 2022 Updates\nNew vessel info tables added to gfw_research:\n+ vi_ssvid_v20220101 + vi_ssvid_byyear_v20220101 + vi_stats_v20220101 + fishing_vessels_ssvid_v20220101\nThese versions use the corresponding version of the vessel database (v20220101) and therefore contain data through 2021-12-31. There are otherwise no improvements/updates to the table other than new data.",
    "crumbs": [
      "(PART) Data updates"
    ]
  },
  {
    "objectID": "Data-Updates.html#december-14-2021-updates",
    "href": "Data-Updates.html#december-14-2021-updates",
    "title": "(PART) Data updates",
    "section": "December 14, 2021 Updates",
    "text": "December 14, 2021 Updates\nVMS datasets, including Peru, Panama, Chile, Brazil, Costa Rica, and Ecuador have all been updated. See the VMS page and the Big Query Table Reference page for the new table versions.",
    "crumbs": [
      "(PART) Data updates"
    ]
  },
  {
    "objectID": "Data-Updates.html#october-26-2021-updates",
    "href": "Data-Updates.html#october-26-2021-updates",
    "title": "(PART) Data updates",
    "section": "October 26, 2021 Updates",
    "text": "October 26, 2021 Updates\n\nThe VIIRS-AIS matching table is now automatically updated on a daily basis. The data itself is identical.\n\nprevious table (manually updated): gfw_research.matches_raw_vbd_global_3top_v20210514\nnew table (automatically updated): pipe_production_v20201001.proto_matches_raw_vbd_global_3top_v20210514",
    "crumbs": [
      "(PART) Data updates"
    ]
  },
  {
    "objectID": "Data-Updates.html#october-13-2021-updates",
    "href": "Data-Updates.html#october-13-2021-updates",
    "title": "(PART) Data updates",
    "section": "October 13, 2021 Updates",
    "text": "October 13, 2021 Updates\nFlags of convenience have been moved to a versioned system. The original table is gfw_research.flags_of_convenience. This remains unchanged, reflecting the ITF list of FOCs from 2019, and will be kept for the next 30 days to give time for people to switch over their code. If you need to use this historical list of FOCs, you can reference gfw_research.flags_of_convenience_v20190110. For all other cases, you should now use gfw_research.flags_of_convenience_v20211013. FOC flags as reported by ITF are pulled from https://www.itfseafarers.org/en/focs/current-registries-listed-as-focs. We continue to remove the French and German International Ship Registries as they do not have their own unique flag State and ISO3 code. The changes between the 20190110 and 20211013 versions are as follows:\n\nAdded Cameroon (CMR), Cook Islands (COK), Palau (PLW), Sierra Leone (SLE), St Kitts and Nevis (KNA), Tanzania (TZA), and Togo (TGO\nRemoved the Netherlands Antilles (ANT)\nOverall increase from 34 to 40 flag states in the dataset",
    "crumbs": [
      "(PART) Data updates"
    ]
  },
  {
    "objectID": "Data-Updates.html#october-4-2021-updates",
    "href": "Data-Updates.html#october-4-2021-updates",
    "title": "(PART) Data updates",
    "section": "October 4, 2021 Updates",
    "text": "October 4, 2021 Updates\n\nUpdated wiki page on encounters dataset with BQ example code. Note the internal logic has been adjusted (using segment id). See page for details.\nThe pipe_production_v20201001.published_events_loitering table has been adjusted to include the restrictions: avg_distance_from_shore_nm&gt;=20, and segments must be good_seg and NOT overlapping_and_short\nLatest vessel_info table is gfw_research.vi_ssvid_v20210913",
    "crumbs": [
      "(PART) Data updates"
    ]
  },
  {
    "objectID": "Data-Updates.html#august-3-2021-updates",
    "href": "Data-Updates.html#august-3-2021-updates",
    "title": "(PART) Data updates",
    "section": "August 3, 2021 Updates",
    "text": "August 3, 2021 Updates\n\nAutomated loitering data ready for use. Previously we only had occasionally updating loitering data, now it is fully automated to update everyday (with a 72 hour delay). The detailed documentation on these new tables, and what else was updated in the logic can be found in Loitering wiki page. Along with new examples in the examples folder: https://github.com/GlobalFishingWatch/bigquery-documentation-wf827/tree/master/queries/",
    "crumbs": [
      "(PART) Data updates"
    ]
  },
  {
    "objectID": "Data-Updates.html#july-30-2021-updates",
    "href": "Data-Updates.html#july-30-2021-updates",
    "title": "(PART) Data updates",
    "section": "July 30, 2021 Updates",
    "text": "July 30, 2021 Updates\n\nThe Big Query datasets page has been updated to reflect the new data staging process, which you will notice based on the series of new datasets that will be shared soon.\nNew port visit and voyage tables are ready for use as PROTOTYPES (see Big Query datasets for what it means to be a prototype dataset). The detailed documentation on these new tables can be found in Ports and Voyages wiki page. Along with new examples in the examples folder: https://github.com/GlobalFishingWatch/bigquery-documentation-wf827/tree/master/queries/examples/current",
    "crumbs": [
      "(PART) Data updates"
    ]
  },
  {
    "objectID": "BigQuery-datasets.html",
    "href": "BigQuery-datasets.html",
    "title": "(PART) Big Query",
    "section": "",
    "text": "Big Query datasets\nGFW data is stored as BigQuery tables and organized in a handful of key datasets. These datasets contain the automated output of GFW’s data pipeline (pipe_production_vYYYYMMDD), vessel identity information pulled from vessel registries (vessel_database), and streamlined versions of these tables and other derived data products relevant for research and analysis (gfw_research).",
    "crumbs": [
      "(PART) Big Query"
    ]
  },
  {
    "objectID": "BigQuery-datasets.html#staging-process-2021-updates",
    "href": "BigQuery-datasets.html#staging-process-2021-updates",
    "title": "(PART) Big Query",
    "section": "Staging Process (2021 Updates)",
    "text": "Staging Process (2021 Updates)\nDescription: In an effort to delineate new versions of datasets with those that are used in production we are currently developing a new staging process. **\nDetails: The staging process includes the following:\n\nProof-of-Concept data: Staging dataset for new research ideas\n\n\nInternal only and selected research partners\nOne-off or manually updated tables\nManual QA\n\n\nPrototype data: Staging dataset for new research ideas\n\n\nIntermediate and Prototype tables\nAutomated data runs (updated daily)\nSemi-automated QA\nPrototype tables should use convention of ‘proto_’\nCan be used by researchers and analysts but proceed knowing that although QA’d all bugs may not have been solved\nBasic documentation will exist for these datasets\n\n\nProduction data: Staging dataset for new research ideas\n\n\nProduction level ready datasets\nPublic/research partners\nAutomated_QA\nWhen proto_ tables have been used and QA’d for a given period of time, have finalized documentation, and automated QA metrics they will move to ‘production’ data\n\nNote: This is an evolving process, but is noted in the wiki currently because we are releasing a series of updates to the AIS event datasets and some are considered ‘proto type data’ and therefore everyone should be aware that these tables may be used but are NOT considered ‘production’ level ready.",
    "crumbs": [
      "(PART) Big Query"
    ]
  },
  {
    "objectID": "BigQuery-datasets.html#key-datasets",
    "href": "BigQuery-datasets.html#key-datasets",
    "title": "(PART) Big Query",
    "section": "Key Datasets",
    "text": "Key Datasets\n\npipe_production_vYYYYMMDD\n\nDescription: This is the dataset for the AIS pipeline and includes tables processed by the GFW fishing algorithms and derived event tables (e.g. encounters, loitering, port visits). All tables in pipe_production_vYYYYMMDD are automated by the pipeline and should not be modified manually.\nWhen to use: The tables in the pipeline dataset contain the most up-to-date event data (encounters, port visits, port visits, etc.) and should also be used whenever access to the full AIS data is desired (e.g. every AIS position).\n\n\n\nvessel_database\n\nDescription: The Global Fishing Watch vessel database contains identity and authorization information about vessels that is/was recorded in various formats of vessel registries, including RFMO vessel lists and national vessel registers that are publicly available. It also includes lists of vessels that have been obtained through groups of researchers and analyzed by analysts from GFW and its partners.\nWhen to use: The vessel database should be used when searching for identity information about an MMSI, particularly if interested in when/if/where an MMSI is authorized to fish.\n\n\n\ngfw_research\n\nDescription: This dataset includes streamlined versions of the AIS tables in pipe_production_vYYYYMMDD, as well as an additional AIS table subset to only include fishing vessels; vessel info tables that combine identity information from vessel_database with AIS activity information from pipe_production_vYYYYMMDD; derived data products (encounters, loitering, ports, etc.) that are not yet fully automated; and various reference tables important for analysis (e.g. EEZ info, flags of convenience, country codes, etc.). The versions of the pipeline AIS tables in gfw_research have been thinned (only 1 point per minute) and further processed to include additional info relevant for analysis (e.g. hours and regions).\nWhen to use: This dataset is the primary dataset to use for research and analysis. The streamlined AIS tables are smaller and cheaper to query than those in pipe_production_vYYYYMMDD and the vessel info tables include important activity data not available in vessel_database",
    "crumbs": [
      "(PART) Big Query"
    ]
  },
  {
    "objectID": "BigQuery-datasets.html#other-relevant-datasets",
    "href": "BigQuery-datasets.html#other-relevant-datasets",
    "title": "(PART) Big Query",
    "section": "Other Relevant Datasets",
    "text": "Other Relevant Datasets\n\nanchorages",
    "crumbs": [
      "(PART) Big Query"
    ]
  },
  {
    "objectID": "BigQuery-Table-Reference----PIPE-3.html",
    "href": "BigQuery-Table-Reference----PIPE-3.html",
    "title": "2  Big Query table reference PIPE 3",
    "section": "",
    "text": "This page contains the published tables of AIS Pipeline 3 pipe_ais_v3_published. and their previous names in the AIS Pipeline 2.5 pipe_production_v20201001. If you do NOT see a table listed below it has either been archived or placed in the internal bucket within BQ. This page does NOT contain the description of the internal tables of AIS Pipeline 3 pipe_ais_v3_internal. Please contact the engineers and pipeline manager if you request to use an internal table for your work.\nTable Development:\n\nAndres Arana: lead engineer\nMatias Piano: core engineer\nJenn Van Osdel: Researcher lead - Identity and Review of Segmenter\nTim Hochberg: Researcher lead - Segmenter\nChris Homberg: QA Analyst\nHannah Linder: AIS Pipeline Manager\n\nData pipeline ownership falls with the pipeline engineering team, currently Andres Arana and Matias Piano. This means they operate, maintain, develop and deprecate the core pipeline data outputs. The naming, security, versioning control of these tables is decided upon across all engineers, Pipeline Manager, and CTO. Development of the pipeline logic and methodology was originally created outside of the pipeline team that developed Pipeline 3. In the future the pipeline methodology is developed by partnership between the Research team and Engineering team.\nLast update: * Date: 2024-04-18 * By: Hannah Linder\nAIS Pipe 3 – Published\n\n\n\n\n\n\n\n\nDescription\nBQ Table\nPrevious BQ Table\n\n\n\n\nAIS pipeline dataset to use\npipe_ais_v3\npipe_production_v20201001\n\n\nSummary of AIS information on a segment level, includes ssvid and vessel id\npipe_ais_v3_published.segment_info\npipe_production_v20201001.segment_info\n\n\nAggregated vessel identity information by vessel id and ssvid\npipe_ais_v3_published.vessel_info\npipe_production_v20201001.vessel_info\n\n\nEncounter events\npipe_ais_v3_published.encounters\npipe_production_v20201001.encounters\n\n\nEncounter events used in products (adjustment to schema and additional fields compared to encounters)\npipe_ais_v3_published.product_events_encounter_v\npipe_production_v20201001.published_events_encounters_v\n\n\nLoitering events\npipe_ais_v3_published.loitering\npipe_production_v20201001.loitering\n\n\nLoitering events used in products (adjustment to schema and additional fields compared to encounters)\npipe_ais_v3_published.product_events_loitering_v\npipe_production_v20201001.published_events_loitering_v\n\n\nFishing events (consistent list of fishing vessels in previous versions)\npipe_ais_v3_published.fishing_events_v\npipe_production_v20201001.published_events_fishing\n\n\nFishing events updated in product to restrict to only prod_shiptype = ‘fishing’\npipe_ais_v3_published.product_events_fishing_v\n–Same Table not Previously Developed—-\n\n\nPort visits by vessels\npipe_ais_v3_published.port_visits\npipe_production_v20201001.proto_port_visits\n\n\nPort visits by vessels used in products (adjustment to schema and additional fields compared to port visits\npipe_ais_v3_published.product_events_port_visit_v\npipe_production_v20201001.published_events_port_visits_v\n\n\nConfidence 3 vessel voyages\npipe_ais_v3_published.voyages_c3\npipe_production_v20201001.proto_voyages_c3\n\n\nConfidence 4 vessel voyages\npipe_ais_v3_published.voyages_c4\npipe_production_v20201001.proto_voyages_c4\n\n\nVessel database (registry) table aggregated authorization records\npipe_ais_v3_published.identity_authorization_v\nvessel_identity.identity_authorization_v\n\n\nVessel database (registry) table aggregated owner records\npipe_ais_v3_published.identity_owner_v\nvessel_identity.identity_owner_v\n\n\nVessel database (registry) table core identity matched\npipe_ais_v3_published.identity_core_v\nvessel_identity.identity_core_v\n\n\nMerged identity and class summary table used in products\npipe_ais_v3_published.product_vessel_info_summary\npipe_production_v20201001.all_vessels_byyear_v2_v\n\n\nVessel identity match between pipe vessel info and registry table\npipe_ais_v3_published.product_vessel_info_match\npipe_production_v20201001.base_vessel_identity_info_match_v\n\n\nAggregated vessel classification and activity summaries across all time by ssvid\npipe_ais_v3_published.vi_ssvid_v\npipe_production_v20201001.vi_ssvid_v\n\n\nAggregated vessel classification and activity summaries (difference from vi_ssvid_v is AIS based summaries by year) by ssvid\npipe_ais_v3_published.vi_ssvid_byyear_v\npipe_production_v20201001.vi_ssvid_byyear_v\n\n\nPrototype gaps\npipe_ais_v3_published.product_events_ais_gaps\npipe_production_v20201001.proto_ais_gap_events\n\n\nPrototype disabling events\npipe_ais_v3_published.product_events_ais_disabling\npipe_production_v20201001.proto_published_events_ais_gaps\n\n\nSatellite timing offsets\npipe_ais_v3_published.satellite_timing_offsets\npipe_production_v20201001.research_satellite_timing\n\n\nAIS activity aggregated at the segment level with noise indicators\npipe_ais_v3_published.segs_activity\npipe_production_v20201001.research_segs\n\n\nAIS activity aggregated at the daily segment level with noise indicators\npipe_ais_v3_published.segs_activity_daily\npipe_production_v20201001.research_segs_daily\n\n\nAggregated raw AIS identity information by ssvid\npipe_ais_v3_published.ssvids_identities\npipe_production_v20201001.research_ids\n\n\nDaily raw AIS identity information by ssvid\npipe_ais_v3_published.ssvids_identities_daily\npipe_production_v20201001.research_ids_daily\n\n\nStats on AIS data daily\npipe_ais_v3_published.stats_daily\npipe_production_v20201001.research_stats",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Big Query table reference PIPE 3</span>"
    ]
  },
  {
    "objectID": "BigQuery-Table-Reference.html",
    "href": "BigQuery-Table-Reference.html",
    "title": "3  Big Query table reference",
    "section": "",
    "text": "This page contains the list and location of the most current BigQuery datasets and tables for the various GFW data products. The BQ tables in the below table are the default tables to be used when starting a new analysis.\nLast update: * Date: 2022-08-19 * By: Tyler Clavelle\n\n\n\nSubject\nDescription\nBQ Dataset\nBQ Table\nPipeline version\nOwner\n\n\n\n\nAIS\nAIS pipeline dataset to use\npipe_production_v20201001\n\n2.5\nAndres\n\n\nAIS\nAIS position table (all messages)\npipe_production_v20201001\nmessages_scored_\n2.5\nAndres\n\n\nAIS\nAIS position table (thinned)\npipe_production_v20201001\nresearch_messages\n2.5\nTyler\n\n\nVessel identity\nVessel registry database\nvessel_database\nall_vessels_vYYYYMMDD\n2.5\nJaeyoon\n\n\nVessel identity\nVessel info tables\ngfw_research\nvi_ssvid_[byyear]_vYYYYMMDD\n2.5\nTyler\n\n\nVessel identity\nAnnual fishing vessel list\ngfw_research\nfishing_vessels_ssvid_vYYYYMMDD\n2.5\nTyler\n\n\nVessel identity\nAnnual carrier vessel list\nvessel_database\ncarrier_vessels_byyear_v20220101\n2.5\nJaeyoon\n\n\nEncounters\nEncounter events no speed restrictions\npipe_production_v20201001\nencounters\n2.5\nNate\n\n\nEncounters\nEncounter events in Published format for Products\npipe_production_v20201001\npublished_events_encounters\n2.5\nNate\n\n\nLoitering\nLoitering events\npipe_production_v20201001\nloitering published_events_loitering\n2.5\nPete\n\n\nLoitering\nLoitering events in Published format for Products\npipe_production_v20201001\npublished_events_loitering\n2.5\nHannah\n\n\nPorts\nAnchorage locations\nanchorages\nnamed_anchorages_v20211026\n2.5\nNate\n\n\nPorts\nIndividual port events (entry, start, gap, stop, exit)\npipe_production_v20201001\nproto_raw_port_events_*\n2.5\nTim H\n\n\nPorts\nArchived original individual port events (entry, start, gap, stop, exit)\npipe_production_v20201001\narchive_20201001_port_events_*\n2.5\nTim H\n\n\nPorts\nPort visits (grouped port events)\npipe_production_v20201001\nproto_port_visits\n2.5\nTim H\n\n\nPorts\nPort visits (grouped port events) in Published format for Products\npipe_production_v20201001\npublished_events_port_visits\n2.5\nHannah\n\n\nPorts\nPrevious version of Port visits version (grouped port events)\npipe_production_v20201001\nport_visits_\n2.5\nTim H\n\n\nPorts\nVessel voyages between anchorages\npipe_production_v20201001\nproto_voyages_c2 proto_voyages_c3 proto_voyages_c4\n2.5\nTim H\n\n\nPorts\nPrevious version of Vessel voyages between anchorages\npipe_production_v20201001\nvoyages\n2.5\nTim H\n\n\nVIIRS\nVIIRS vessel detections\npipe_viirs_production_v20220112\nraw_vbd_global raw_vbd_global_without_noise\n\nMasaki\n\n\nVIIRS\nVIIRS vessel detections that matched/unmatched with AIS/VMS\npipe_production_v20201001\nproto_matches_raw_vbd_global_3top_v20210514\n2.5\nMasaki\n\n\nAIS gaps\nAIS gaps and suspected disabling events\npipe_production_v20201001\nproto_ais_gap_events\n2.5\nTyler\n\n\nAIS offsetting\nAIS offsetting by seg_id\ngfw_research_precursors\noffsetting_year_seg_v20220609\n2.5\nPete\n\n\nVMS\nPeru VMS\npipe_peru_production_v20211126\n\n2.5\nAndres\n\n\nVMS\nPanama VMS\npipe_panama_production_v20211126\n\n2.5\nAndres\n\n\nVMS\nChile VMS\npipe_chile_production_v20211126\n\n2.5\nAndres\n\n\nVMS\nIndonesia VMS\npipe_indonesia_production_v20200320\n\n2.5\nAndres\n\n\nVMS\nBrazil VMS\npipe_brazil_production_v20211126\n\n2.5\nClaudino\n\n\nVMS\nMexico VMS\npipe_mexico_oceana_production_v20210811\n\n2.5\nAndres\n\n\nVMS\nCosta Rica VMS\npipe_costarica_production_v20211126\n\n2.5\nAndres\n\n\nVMS\nEcuador VMS\npipe_ecuador_production_v20211126\n\n2.5\nAndres\n\n\nVMS\nBelize VMS\npipe_belize_production_v20220304\n\n2.5\nMatias",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Big Query table reference</span>"
    ]
  },
  {
    "objectID": "Key-concepts.html",
    "href": "Key-concepts.html",
    "title": "4  Big Query Key concepts",
    "section": "",
    "text": "4.1 BigQuery access and billing",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Big Query Key concepts</span>"
    ]
  },
  {
    "objectID": "Key-concepts.html#bigquery-access-and-billing",
    "href": "Key-concepts.html#bigquery-access-and-billing",
    "title": "4  Big Query Key concepts",
    "section": "",
    "text": "4.1.1 Access\nWorking in BigQuery requires two forms of access:\n\nGoogle Cloud billing project: Using BigQuery incurs costs and BigQuery requires users be connected to a GCP billing project before running queries.\n\nThe enabled billing project will be listed in the top menu bar of the BigQuery console\nThe billing project for GFW staff is gfw-google\nResearch partners cannot be added to gfw-google and must create their own GCP billing project. GFW can help with this process and partners can generally receive ~$5,000 in free Google Credits through the Google for Good program. Contact Tyler (tyler@globalfishingwatch.org) for details\n\nBigQuery project: Data in BigQuery is organized in projects, which in turn contain datasets and tables. To access GFW data, users must be granted access to the GFW BigQuery project.\n\nGFW data lives in two primary BigQuery projects:\n\nworld-fishing-827: Primary GFW project containing all internal GFW datasets\n\nglobal-fishing-watch: Contains GFW public fishing effort tables\n\nThe project will appear in the left menu bar of the BigQuery console and clicking on the project name will expand to show the list of datasets the user can access.\n\nIf you don’t see a BigQuery project in your console: Click on ADD DATA -&gt; Pin a project -&gt; Enter project name -&gt; type world-fishing-827 -&gt; select PIN\n\n\n\n\n\n4.1.2 Billing\nBigQuery costs are incurred in two ways - storing and querying data. + Queries cost $5 per terabyte of data scanned + Queries are “free” for GFW staff, but we need to be careful\n\n4.1.2.1 The BigQuery validator\nThe BigQuery validator is a built-in query debugger that also estimates query cost. The validator will turn green when a query is valid and be red otherwise. Always use the validator to check the cost of a query before running it!",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Big Query Key concepts</span>"
    ]
  },
  {
    "objectID": "Key-concepts.html#gfw-datasets",
    "href": "Key-concepts.html#gfw-datasets",
    "title": "4  Big Query Key concepts",
    "section": "4.2 GFW datasets",
    "text": "4.2 GFW datasets\nWithin a BigQuery project, data is stored in tables and organized in datasets. There are many datasets in the world-fishing-827 project, but the following are the primary datasets for research and analysis:\n\npipe_production_vYYYYMMDD: AIS pipeline dataset\n\npipe_[country]_production_vYYYYMMDD: Country-specific VMS pipeline datasets &gt; + VMS data can only be used by partners with written permission from the relevant national authorities (see VMS for more info).\n\ngfw_research: Contains a variety of static tables useful for analysis and early versions of new research concepts\nvessel_database: Contains tables related to vessel registry information\nanchorages: Contains the GFW anchorages dataset\n\nIf you don’t see at least the pipe_production_vYYYYMMDD, gfw_research, vessel_database, and anchorages dataset let Tyler or Enrique know.",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Big Query Key concepts</span>"
    ]
  },
  {
    "objectID": "Key-concepts.html#naming-conventions",
    "href": "Key-concepts.html#naming-conventions",
    "title": "4  Big Query Key concepts",
    "section": "4.3 Naming conventions",
    "text": "4.3 Naming conventions\nMany datasets and tables in the world-fishing-827 project follow several key naming conventions. Abiding by these conventions will help make it easier for everyone to navigate the large amount of data in world-fishing-827. It is beyond the scope of this document and unnecessary to prescribe naming conventions for every table. However, tables within a dataset should use clear and self-explanatory names.\n\n4.3.1 General guidelines\n\nUnderscores not dashes\nLowercase\nBe clear, concise, and consistent\nSet a “time to live” (TTL) on all scratch_ datasets. TTL’s should be used with other datasets and tables when appropriate (see BigQuery docs).\n\n\n\n4.3.2 Dataset names\nDatasets are the top level containers of our data in BigQuery. They should have standardized names that are easy to understand and navigate. Before creating a new dataset, consider whether the tables could be placed in an existing dataset.\n\n4.3.2.1 Prefixes\nThe following prefixes are used to organize datasets into groups:\n\npipe_: These datasets contain automated tables that are consumed or produced by a GFW pipeline.\ngfw_: Datasets related to GFW’s research work and public data\nproj_: Project-specific datasets. Each project should receive its own dataset clearly named with the project topic and/or client (e.g. proj_[topic]_[client])\nscratch_: These datasets are for preliminary tables generated during early development and should be user specific (e.g. scratch_tyler)\nVMS: Datasets containing raw national VMS data.\n\nWhen processed by the GFW VMS pipeline, data is saved in a pipe_[country] dataset\n\nmachine_learning_: These datasets contain inputs/outputs of our machine learning models\n\nNote: Some datasets may end with the suffix _ttl_[days]. This indicates that the dataset has a “time to live” (TTL) set and tables in the dataset will be automatically deleted after the set period.",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Big Query Key concepts</span>"
    ]
  },
  {
    "objectID": "Key-concepts.html#versioning",
    "href": "Key-concepts.html#versioning",
    "title": "4  Big Query Key concepts",
    "section": "4.4 Versioning",
    "text": "4.4 Versioning\nGFW receives new data every day and is constantly working to improve our algorithms and models. As a result, there can be multiple versions of a data product in BigQuery at the same time (e.g. the vessel database). To differentiate versions, GFW uses the _v[YYYYMMDD] naming convention for the suffix of a dataset or table, where the YYYYMMDD indicates the date the table was created. When multiple tables have the same name but end in different date strings, BigQuery will “stack” them together with the table name followed by a number in parentheses (e.g. vi_ssvid_v(13)).\nWhen a dataset or table ends in _v followed by a date string (_v20201001), the date refers to the version of the table.",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Big Query Key concepts</span>"
    ]
  },
  {
    "objectID": "Key-concepts.html#table-formats",
    "href": "Key-concepts.html#table-formats",
    "title": "4  Big Query Key concepts",
    "section": "4.5 Table formats",
    "text": "4.5 Table formats\nBigQuery tables can have several important formats that are used to organize data and minimize query cost and execution time. In particular, GFW creates tables that may be date sharded or date partitioned. Additionally, tables may be clustered on certain fields. Date sharded and date partitioned tables behave in similar ways but, crucially, require different filtering syntax to limit query size. Therefore, understanding how to recognize if a table is date sharded, partitioned, and/or clustered, and how to query them properly, is critical.\n\n4.5.1 Date sharded tables\nDate sharded tables are actually a collection of tables, one for each date, where the data for a given date is stored in its own table where the table name ends in a date string (e.g. messages_scored_20180101). When there is data for more than one date, the table name will be followed by a number in parentheses, with the number indicating how many days of data are in the sharded table (e.g. messages_scored_(3248)).\nThere are two main ways to restrict queries of date sharded tables depending on whether you’re querying one or multiple dates:\nFor a single date, you can specify the table directly using the full table name:\nSELECT *\nFROM pipe_production_v20201001.messages_scored_20180101\nWhen querying multiple dates, you use a wildcard character (*) in the table name and then use the _TABLE_SUFFIX argument in the WHERE statement to specify the date range:\nSELECT * \nFROM `world-fishing-827.pipe_production_v20201001.messages_scored_*` \nWHERE _TABLE_SUFFIX BETWEEN '20180101' AND '20180102'\nNote: When using the * wildcard you must surround the table name in backticks.\n\n\n4.5.2 Date partitioned tables\nSimilar to date sharded tables, many GFW tables are date partitioned. These are single tables where data is stored in invisible partitions. If a table is partitioned, you will see This is a partitioned table when viewing the table’s info in BigQuery. Tables can be partitioned on an actual field in the table (e.g. date) or on the _partitiontime field, which is a “psuedo colum” that is not actually in the table. You can check the partitioning specification by viewing the table’s details.\nQueries against date partitioned tables can filter on the partitioned column using a WHERE statement, limiting the amount of data scanned and thus the cost.\nSELECT *\nFROM gfw_research.pipe_v20201001\nWHERE _partitiontime = \"2019-01-01\"\nNote: Unlike date sharded tables, use the YYYY-MM-DD format when filtering date partitioned tables.\n\n\n4.5.3 Clustered tables\nBigQuery tables can be clustered on certain fields. Similar to partitioning, clustering allows table data to be grouped together based on one or more table fields and improve query performance and cost when filtering on the clustered fields. You can check the clustering specification by viewing the table’s details.\nNote: Queries that filter on a clustered field may be cheaper than what is estimated by the BigQuery validator.",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Big Query Key concepts</span>"
    ]
  },
  {
    "objectID": "Key-concepts.html#key-concepts",
    "href": "Key-concepts.html#key-concepts",
    "title": "4  Big Query Key concepts",
    "section": "4.6 Key concepts",
    "text": "4.6 Key concepts\nBigQuery is powerful but complex tool and understanding certain key concepts can help get the most out of BigQuery.\n\n4.6.1 User Defined Functions\nUser-defined functions (UDF) are functions created using another SQL expression or JavaScript. These functions accept columns of input, perform actions, and return a value. UDFs can be defined directly at the top of a query or stored as functions in a special type of dataset. GFW maintains a collection of helpful UDFs in the udfs dataset in world-fishing-827. These queries can be called in any query using the udfs.function() syntax.\n\n\n4.6.2 STRUCTS and ARRAYS\nTwo key BigQuery data types used by GFW are ARRAYS and STRUCTS, which allow for nesting and/or repeating data.\nAn ARRAY is an ordered list of zero or more elements of non-ARRAY values (e.g. STRING, INT64). An ARRAY is listed as having a REPEATED mode. GFW uses arrays to store multiple types of information, such as the list of identities (e.g. callsigns) broadcast by each MMSI over AIS.\nA STRUCT is a container of ordered fields each with a type (required) and field name (optional). A STRUCT is listed as having a RECORD type. Fields are nested within a STRUCT - e.g. struct_field.nested_field. In general, GFW uses STRUCTs to group together information from different sources. For example, the vessel info tables use organize vessel identities from AIS and registries in separate STRUCTs.\n\n\n4.6.3 Spatial BigQuery\nBigQuery now supports a suite of powerful spatial analysis tools. These functions use the GEOGRAPHY data type, which represents a pointset (points, lines, polygons) on WGS84. Single points can be described by a (longitude, latitude) pair. For describing more complex geographies (lines, polygons), BigQuery supports GeoJSON, Well-known text (WKT), and well-known binary (WKB) data formats in the GEOGRAPHY column. GFW uses GEOGRAPHY data types to represent several data types, including the location of “events” (e.g. encounters, port visits, fishing).\n\n\n4.6.4 Data definition language\nBigQuery supports the use of data definition language (DDL), which allow you to create, alter, and delete tables directly in your query statement. This is a particularly helpful way to create partitioned and clustered tables.",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Big Query Key concepts</span>"
    ]
  },
  {
    "objectID": "Key-concepts.html#best-practices",
    "href": "Key-concepts.html#best-practices",
    "title": "4  Big Query Key concepts",
    "section": "4.7 Best Practices",
    "text": "4.7 Best Practices\n\nAlways use standard SQL - first line of your query should be #standardSQL\nWrite subqueries using WITH statement – avoid overly nested queries\nComment between queries to give space visually.\nPut all tables referenced at the top of the query.\nWhen using UDFs, try to use SQL based instead of JavaScript\nFor numerical parameters that will be used in multiple places, you can use a UDF at the top of the query that returns the value\nTo limit costs when developing or debugging queries:\n\nRestrict the date range or partitioned or sharded tables\nUse a LIMIT 1000 clause at the end of a query. Comment this out when running for real\n\nFor complex queries, consider including a (commented out) test query that does a sanity check",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Big Query Key concepts</span>"
    ]
  },
  {
    "objectID": "BigQuery-in-Products.html",
    "href": "BigQuery-in-Products.html",
    "title": "5  BigQuery in products",
    "section": "",
    "text": "5.1 Product Overview\nThis page highlights the data included in products; bigquery source tables, API code, and data restrictions applied to the data. Additionally, updates to data in products, such as changes in source data tables or changes in restrictions to the data are outlined. Resources on how to use and interact with products are linked.\nResources + Product Hour recordings + Published Events with unnested authorization information example query",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>BigQuery in products</span>"
    ]
  },
  {
    "objectID": "BigQuery-in-Products.html#product-overview",
    "href": "BigQuery-in-Products.html#product-overview",
    "title": "5  BigQuery in products",
    "section": "",
    "text": "API\nProduct\nBQ Queries\nNotes\n\n\n\n\nV0\nCVP\nV0 API Queries\nThe plan is to update the CVP to using the  same APIs as other the other products in the future.\n\n\nV1\nGFW Map,  Marine Manager,  Vessel Viewer,  API Portal\nV1 API Queries  Username: datasets  Password: gfw_doc\nThere are certain filters and manipulations done to data  in the API which can occur outside of the BigQuery code.  Those nuances may eventually be updated and included  in the Wiki but are not currently, so be aware.",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>BigQuery in products</span>"
    ]
  },
  {
    "objectID": "BigQuery-in-Products.html#carrier-vessel-portal-cvp-v0-api",
    "href": "BigQuery-in-Products.html#carrier-vessel-portal-cvp-v0-api",
    "title": "5  BigQuery in products",
    "section": "5.2 Carrier Vessel Portal (CVP) | v0 API",
    "text": "5.2 Carrier Vessel Portal (CVP) | v0 API\nThe Carrier Vessel Portal (CVP) uses publicly available data from 2017 through the present to identify potential vessel encounters and loitering events. It synthesizes fishing registry information to create a picture of potential authorizations for both carrier and fishing vessels involved in transshipment activity. The CVP is the only Product using the v0 API, although, in the future, the Product and Engineering team will look to transition the CVP to using the same API as the other Products.\nData in the Portal + V0 API | Current CVP queries + The output of the current CVP queries can be found in BigQuery under the bin name pipe_carrier_portal_production_v20220124\nData Restrictions in Portal + Encounters are limited to those between carriers and fishing vessels and support and fishing vessels + Loitering events are limited to those by carrier vessels with a minimum duration of 1 hour. + Port visits are limited to Confidence 4 visits. For more information see Anchorages and Voyages wiki + Information on vessel authorization is updated on one month lag\nUnique Features (compared to GFW Map): Authorization Data, Port visits\nResources + CVP Product Hour notes, resources, and demo recording + CVP FAQs + CVP Disclaimers + Authorization Records + GFW Product Tutorials\nUpcoming/Future Plans + If the CVP is maintained as a standalone product, then queries will be updated and V1 API will be used\nUpdates + Feb 15, 2022: CVP data updated on a 3 day lag rather than monthly update. CVP encounters code now pulls encounters from published_events_encounters and identified carrier, support, and fishing vessel by_year tables. + Nov 2021: v0 API updated port visits and loitering events on CVP to pull from pipe_production_vYYYYMMDD published events ports and loitering tables. Port visits in the published events table are limited to confidence = 4. The loitering events logic has been changed to group points at seg_id level and not ssvid, and thus the number of loitering events in some areas increased noticeably due to some long loitering events now being grouped as many small loitering events. The CVP encounters query",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>BigQuery in products</span>"
    ]
  },
  {
    "objectID": "BigQuery-in-Products.html#api-portal-v1-api",
    "href": "BigQuery-in-Products.html#api-portal-v1-api",
    "title": "5  BigQuery in products",
    "section": "5.3 API Portal | v1 API",
    "text": "5.3 API Portal | v1 API\nGFW’s API’s provide a set of instructions for software to access select GFW data and information. An API retrieves and delivers data to both front-end and back-end applications.\nThe GFW API Portal makes it feasible for our data to be hosted on the maps of collaborating organizations (like SeaVision). The API Portal launched on July 19th, 2022. A wrapper package in R, named gfwr, also launched alongside the API Portal, and allows individuals to call data from the API Portal directly into R.\nAPIs Resources + Intro APIs - slide deck for introduction to API’s  + GFW Ocean-Engine: APIs and Blueprints, June 2021 - introduction to GFW’s APIs + R package to access API Portal: A wrapper in R has been developed so that GFW’s API Portal data can be easily used in R. The package named gfwr can now be accessed. Slack thread.\nUpcoming/Future Plans + TBD \nUpdates + July 19, 2022: API Portal Launch! gfwr R package release",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>BigQuery in products</span>"
    ]
  },
  {
    "objectID": "BigQuery-in-Products.html#gfw-map-v1-api",
    "href": "BigQuery-in-Products.html#gfw-map-v1-api",
    "title": "5  BigQuery in products",
    "section": "5.4 GFW Map | v1 API",
    "text": "5.4 GFW Map | v1 API\nThe Global Fishing Watch map is the “main” GFW product. The map merges multiple types of vessel tracking data to provide a view of global human activity at sea, including fishing activity, encounters between vessels, night light vessel detection and vessel presence. The map includes global fishing activity from 2012 to the present from more than 65,000 commercial fishing vessels that are responsible for a significant part of global seafood catch. Users can search for vessels, filter activity by flag State or time period, identify port visits and view encounters between vessels. The map also allows anyone to upload and overlay their own data, download aggregated fishing reports of activity from custom areas, and save and share what is on the current view.\nData in the Portal + V1 API | V1 API Queries (Username: datasets | Password: gfw_doc). + Within the V1 API Queries are the BQ source datasets.\nResources + LATEST demo of map - July 2022 + Map 3.0 GFW Internal Slide Deck - highly recommend. Succinct but informative overview of target users, new functionalities, and examples of how to interact with map. + GFW Map Launch Materials + GFW Product Tutorials\nInternal Features (GFW Staff Only) + Load BigQuery data directly into GFW Map - when logged into GFW Map with GFW email press ‘b’ 7 times to get to interface to run BigQuery + Vessel Groups\nUpcoming/Future Plans + Sept 2022: Vessel groups (public access); vessel gaps + TBD: layer on map with all Ports\nUpdates + [internal only] Aug 10 2022: Vessel groups. Slack thread. + June 8th 2022: SAR layer launched on Map. Slack thread. + [internal only] Dec 23 2021: Functionality to load bigquery data directly into GFW map added + Dec 2021: Upload point files as reference layer functionality added + Oct 18 2021: GFW legacy map officially removed from GFW website + July 15 2021: GFW Map launched. Previous version of map will be available as a legacy map until Oct 18 2021 at https://globalfishingwatch.org/legacy-map",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>BigQuery in products</span>"
    ]
  },
  {
    "objectID": "BigQuery-in-Products.html#marine-manager-v1-api",
    "href": "BigQuery-in-Products.html#marine-manager-v1-api",
    "title": "5  BigQuery in products",
    "section": "5.5 Marine Manager | v1 API",
    "text": "5.5 Marine Manager | v1 API\nGlobal Fishing Watch and Dona Bertarelli have partnered to develop Global Fishing Watch Marine Manager. The portal empowers managers to rapidly collate and analyze scientific data integral to the governance of marine protected areas and other area-based conservation measures.\nData in the Portal + V1 API | V1 API Queries (Username: datasets | Password: gfw_doc). + Within the V1 API Queries are the BQ source datasets.\nUnique Features (compared to GFW Map): Environmental data layers\nResources + GFW Product Tutorials\nUpcoming/Future Plans + N/A\nUpdates + Dec 9 2021: Marine Manager “v1.5” release summary",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>BigQuery in products</span>"
    ]
  },
  {
    "objectID": "BigQuery-in-Products.html#vessel-viewer-v1-api",
    "href": "BigQuery-in-Products.html#vessel-viewer-v1-api",
    "title": "5  BigQuery in products",
    "section": "5.6 Vessel Viewer | v1 API",
    "text": "5.6 Vessel Viewer | v1 API\nThe Vessel Viewer, formally the Port Inspector App, is geared towards Port Inspectors and is currently being prototyped in the field. The App’s objective is to provide relevant information for port inspectors to assist them in identifying vessels which should be prioritized for inspection upon arrival in port.\nAt this time the Vessel Viewer is currently in development and available to GFW staff for internal use.\nVessel Viewer is part of GFWs broader effort to develop a suite of vessel intelligence tools to support (1) port inspection, (2) patrol planning, (3) insurance underwriting and (4) supply chain management to mitigate IUU risk.\nData in the Portal + V1 API | V1 API Queries (Username: datasets | Password: gfw_doc). + Within the V1 API Queries are the BQ source datasets.\nResources + Vessel Viewer FAQ in English and French + Vessel Viewer How-To Guide in English and French + Vessel Viewer basic video overview (audio in English with French subtitles)\nUpcoming/Future Plans + Add gaps to vessel viewer\nUpdates + TBD",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>BigQuery in products</span>"
    ]
  },
  {
    "objectID": "Fishing-effort-and-vessel-presence.html",
    "href": "Fishing-effort-and-vessel-presence.html",
    "title": "(PART) Global Fishing Watch Datasets",
    "section": "",
    "text": "Fishing effort and vessel presence",
    "crumbs": [
      "(PART) Global Fishing Watch Datasets"
    ]
  },
  {
    "objectID": "Fishing-effort-and-vessel-presence.html#data-overview",
    "href": "Fishing-effort-and-vessel-presence.html#data-overview",
    "title": "(PART) Global Fishing Watch Datasets",
    "section": "Data Overview",
    "text": "Data Overview\nThe flagship datasets of Global Fishing Watch are vessel presences and apparent fishing effort based on transmissions from vessel tracking datasets. These datasets represent the amount of time vessels are present in an area and, for fishing vessels, how much of that time is spent fishing. Using cloud computing, machine learning, and public vessel registry information, GFW analyzes tens of millions of AIS positions each day to map global apparent fishing effort.\nProducing such a dataset involves two key steps:\n\nIdentification of fishing vessels in the AIS data\nDetection of fishing activity\n\nWe combine our comprehensive database of vessels with a known vessel type from vessel registries with two convolutional neural networks (CNN)—a cutting edge form of machine learning model—to help us classify vessels and predict when they are fishing. The resulting output are a list of vessels by type (e.g. trawler, drifting_longline, cargo, etc.) and a dataset of AIS positions, where each position is labeled as a fishing/non-fishing position. These datasets can then be combined to evaluate the presence and fishing activity of individual vessels or make rasters of aggregate vessel presence or fishing activity.\n\nNote: Every AIS position receives a fishing score (or NULL if the model can’t make a prediction), regardless of whether that MMSI is classified as a fishing vessel.",
    "crumbs": [
      "(PART) Global Fishing Watch Datasets"
    ]
  },
  {
    "objectID": "Fishing-effort-and-vessel-presence.html#key-tables",
    "href": "Fishing-effort-and-vessel-presence.html#key-tables",
    "title": "(PART) Global Fishing Watch Datasets",
    "section": "Key Tables",
    "text": "Key Tables\n\npipe_ais_v3.research_messages - AIS positions, thinned to one minute per segment, for all vessels.\npipe_production_vYYYYMMDD.research_segs - Summaries of vessel activity by segment (seg_id). Includes fields indicating which segments are likely noise (e.g. good_seg, good_seg2, overlapping_and_short) and should be filtered out.\npipe_production_vYYYYMMDD.research_segs_daily - Daily summaries of vessel activity and fishing by segment (seg_id), including by EEZ. This table can be used for non-spatial analyses that summarize vessel activity over specific time periods and/or by EEZ.\n\n\nPublic Fishing Effort Tables\nGFW’s public fishing effort and vessel presence datasets (2012-2020) are gridded at 100th degree resolution by flag state and geartype and at 10th degree resolution by MMSI, respectively. These tables are available in a public BigQuery project (global-fishing-watch) and are inexpensive ways to quickly map fishing effort and vessel presence.\n\nglobal-fishing-watch.gfw_public_data.fishing_effort_v2: Public daily fishing effort by flag state and geartype (2012-2020) at 0.01 degree resolution.\nglobal-fishing-watch.gfw_public_data.fishing_effort_byvessel_v2: Public daily fishing effort by MMSI (2012-2020) at 0.1 degree resolution.",
    "crumbs": [
      "(PART) Global Fishing Watch Datasets"
    ]
  },
  {
    "objectID": "Fishing-effort-and-vessel-presence.html#data-description",
    "href": "Fishing-effort-and-vessel-presence.html#data-description",
    "title": "(PART) Global Fishing Watch Datasets",
    "section": "Data Description",
    "text": "Data Description\n\nis_fishing_vessel\nThe research_messages table includes positions for all vessels, of which ~75% are non-fishing vessels. Therefore, it can be expensive and inefficient to query the whole table for fishing analyses. To compensate for this, the table is clustered on the boolean is_fishing_vessel field, which indicates positions belonging to potential fishing vessels - any ssvid on one of the fishing lists in the vessel info tables.\nFor fishing analyses, include a WHERE is_fishing_vessel filter statement to reduce query size by approximately 80%\n\n\nhours and fishing_hours\nEach AIS position is assigned an amount of time (hours), which is calculated as the time since the vessel’s previous AIS position. Vessel presence is calculated by simply summing the hours of all AIS positions from good segments in the analysis.\nAIS positions also receive two types of fishing score (0-1) - one from the GFW fishing detection algorithm (nnet_score), and one from a separate algorithm that detects likely fishing by squid jiggers (night_loitering). AIS positions where the relevant fishing score is equal to 1 are considered fishing positions and all hours assigned to that position are considered fishing effort (fishing_hours).\n\n\nFishing score (nnet_score vs. night_loitering)\nThe GFW fishing detection algorithm performs poorly for squid jiggers, which fish at night using lights while remaining largely stationary. To account for this, a second fishing algorithm identifies when vessels exhibit this night loitering behavior. Because the vessel class associated with an MMSI can change - either over time or as a result of improved GFW vessel classification - all AIS positions receive both fishing scores so that they are available. As a result, when calculating fishing effort, it is important to first assign a vessel class to each MMSI in order to use night_loitering for squid jiggers and nnet_score for all other fishing vessels.",
    "crumbs": [
      "(PART) Global Fishing Watch Datasets"
    ]
  },
  {
    "objectID": "Fishing-effort-and-vessel-presence.html#caveats-known-issues",
    "href": "Fishing-effort-and-vessel-presence.html#caveats-known-issues",
    "title": "(PART) Global Fishing Watch Datasets",
    "section": "Caveats & Known Issues",
    "text": "Caveats & Known Issues\nWhile AIS provides a revolutionary way to monitor global commercial fishing activity, there are several important limitations and caveats.\n\nMany fishing vessels are not trackable via AIS\nAIS data includes only a small fraction—approximately 70,000—of the world’s estimated 2.8 million fishing vessels. Coverage is much higher for larger vessels with less than 1 percent of vessels under 12 meters represented, 14-19 percent for vessels between 12-24 meters, and 52-85 percent for vessels larger than 24 meters. The International Maritime Organization mandates AIS for most vessels larger than 36 meters, and vessels broadcasting AIS are predominantly from upper and upper-middle income countries.\n\n\nis_fishing_vessel outdated over time\nThe is_fishing_vessel field indicates positions for potential fishing vessels in order to make fishing-related queries considerably cheaper. In order to do so, however, the table is created from the list of all ssvid on one of the fishing lists using the most current vessel info table at the time the research_messages table is created (which you can see in the DETAILS tab of the research_messages table). As a result, over time as new MMSI appear in the AIS data, or vessel classifications change for existing MMSI, not all fishing vessels may have positions marked as is_fishing_vessel = True.\nIf you are using concerned about missing vessels, simply omit the is_fishing_vessel filter and join on the most up-to-date fishing vessel list.\n\n\nGFW identifies apparent fishing effort\nThe GFW fishing detection algorithm is a best effort mathematically to identify “apparent fishing activity.” It is possible that some fishing activity is not identified as such by our algorithms and, conversely, we may predict fishing activity where fishing is not actually taking place. For these reasons, GFW qualifies designations of vessel fishing activity, including synonyms of the term “fishing activity,” such as “fishing” or “fishing effort,” as “apparent,” rather than certain.\n\n\nFishing activity is under-represented in areas of poor AIS reception\nFor various technical reasons, not every AIS message that is broadcast is recorded. Satellites must be overhead to receive AIS signals, terrestrial receivers only receive signals near shore, AIS messages can interfere with each other in areas of high vessel density, and AIS devices vary in broadcast strength and frequency. As a result, fewer AIS positions are received by vessels operating in certain parts of the world, limiting the effectiveness of our machine learning models and our ability to detect apparent fishing effort.",
    "crumbs": [
      "(PART) Global Fishing Watch Datasets"
    ]
  },
  {
    "objectID": "Fishing-effort-and-vessel-presence.html#example-queries",
    "href": "Fishing-effort-and-vessel-presence.html#example-queries",
    "title": "(PART) Global Fishing Watch Datasets",
    "section": "Example Queries",
    "text": "Example Queries\n\nfishing_hours_by_position.sql: Basic query to pull AIS positions for fishing vessels and calculate fishing hours.\nfishing_hours_gridded.sql: Query to create a raster of fishing hours, including fishing hours per square kilometer.\nfishing_hours_by_eez.sql: Query to quickly calculate fishing hours per EEZ over a specific date range using the daily segments research table (research_segs_daily)",
    "crumbs": [
      "(PART) Global Fishing Watch Datasets"
    ]
  },
  {
    "objectID": "Fishing-effort-and-vessel-presence.html#links",
    "href": "Fishing-effort-and-vessel-presence.html#links",
    "title": "(PART) Global Fishing Watch Datasets",
    "section": "Links",
    "text": "Links\n\nFishing effort training slides\nFishing effort description on GFW website",
    "crumbs": [
      "(PART) Global Fishing Watch Datasets"
    ]
  },
  {
    "objectID": "Vessel-Identity.html",
    "href": "Vessel-Identity.html",
    "title": "(PART) Vessel identity",
    "section": "",
    "text": "Vessel Identity\nVessel identity is one of Global Fishing Watch’s most important datasets and is used in nearly every analysis and product. By synthesizing information from vessel registries, vessel tracking data (AIS/VMS), and machine learning models, GFW…\n\nall vessels\nvessel database\nvessel info table\nannual carrier vessel list",
    "crumbs": [
      "(PART) Vessel identity"
    ]
  },
  {
    "objectID": "Product-Vessel-Info-Summary-PVIS.html",
    "href": "Product-Vessel-Info-Summary-PVIS.html",
    "title": "6  Product Vessel Info Summary (PVIS)",
    "section": "",
    "text": "6.1 Key Tables",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Product Vessel Info Summary (PVIS)</span>"
    ]
  },
  {
    "objectID": "Product-Vessel-Info-Summary-PVIS.html#key-tables",
    "href": "Product-Vessel-Info-Summary-PVIS.html#key-tables",
    "title": "6  Product Vessel Info Summary (PVIS)",
    "section": "",
    "text": "pipe_ais_v3_published.product_vessel_info_summary\npipe_production_v20201001.all_vessels_byyear_v2 - the previous version of the table table, maintained in pipeline 2.5.",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Product Vessel Info Summary (PVIS)</span>"
    ]
  },
  {
    "objectID": "Product-Vessel-Info-Summary-PVIS.html#source-tables",
    "href": "Product-Vessel-Info-Summary-PVIS.html#source-tables",
    "title": "6  Product Vessel Info Summary (PVIS)",
    "section": "6.2 Source Tables",
    "text": "6.2 Source Tables\nThe Product Vessel Info Summary table uses the following source tables, below. For more information on how these source tables are utilized to populate the Product Vessel Info Summary table, please see the Product Vessel Info Summary Data Template. The documentation for All Vessels v2, the previous version of the Product Vessel Info Summary Table can be found here.\n\npipe_ais_v3_published.product_vessel_info_match - internal table not to be used outside of products. This table was created to match our vessel_id (AIS transmitted data) to our registry matched table (identity core) so that Products automatically connect vessel_id (AIS records) to any existing registry records.\n\n\n\npipe_ais_v3_published.identity_core\npipe_ais_v3_published.vessel_info\npipe_ais_v3_published.segs_activity\npipe_ais_v3_published.segment_info\n\n\n\npipe_ais_v3_published.vi_ssvid\npipe_ais_v3_published.vi_ssvid_byyear\npipe_ais_v3_internal.purse_seine_support_vessels_byyear",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Product Vessel Info Summary (PVIS)</span>"
    ]
  },
  {
    "objectID": "Product-Vessel-Info-Summary-PVIS.html#data-description",
    "href": "Product-Vessel-Info-Summary-PVIS.html#data-description",
    "title": "6  Product Vessel Info Summary (PVIS)",
    "section": "6.3 Data Description",
    "text": "6.3 Data Description\nThe Product Vessel Info Summary table is a step in the Vessels API, which links AIS records to registry records and is intended to act as a one stop shop for vessel identity for GFW Products. At the product level we want to provide the cleanest information we have on vessel identity, which is why there is an extra layer of logic to lay out a hierarchy for how to represent a vessel in Products when there is conflicting information.\nWe want to be transparent on this hierarchy and the logic behind it, internally, but also externally for all users. As a result, the table includes numerous summary fields on vessel activity, noise, and identity. While these extra details are not featured in Products, the information is intended to provide context for internal staff to understand why a vessel is represented the way it is. Further these fields allow analysts to use the Product Vessel Info Summary table more flexibly than how it is included in Products, to meet broader uses cases. Being able to use the Product Vessel Info Summary table for analysis that are separate from Products is valuable, as it is still easy to link analysis back to what is in Products and allows analysts to easily identify how the vessels in their reports reflect what is in Product, what is miss from Product, and what is represented differently from what is in Product, and why.\nHow the Vessels API is populated is highlighted in the diagram below; specifically how the Product Vessel Info Summary table fits into the Vessels API.\n  Vessels API diagram link\n  Whimsical for how prod_shiptype and prod_geartype are populated\nPlease see the Product Vessel Info Summary Data Template for field definitions of all fields in table.",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Product Vessel Info Summary (PVIS)</span>"
    ]
  },
  {
    "objectID": "Product-Vessel-Info-Summary-PVIS.html#caveats-and-known-issues",
    "href": "Product-Vessel-Info-Summary-PVIS.html#caveats-and-known-issues",
    "title": "6  Product Vessel Info Summary (PVIS)",
    "section": "6.4 Caveats and Known Issues",
    "text": "6.4 Caveats and Known Issues\n\nPlease see the Product Vessel Info Summary Data Template Caveats section and FAQs section for more on the following topics.\nCaveats\nInaccuracies in inferred (neural net) class information\nPossibility of error between ssvid and vessel id merger\nFAQs\n\nWhy is a vessel I know to be a fishing vessel, not indicated as fishing on the Map?\nWhat if a vessel is considered multiple gear types?\nWhat should I do if I think a vessel type has been incorrectly assigned?\nWhy is my vessel_id NOT included in the Product Vessel Info Summary table (and thus in Products)?\nMultiple Vessel IDs for a single unique hull\nWhy am I only seeing a short track segment when I search for a vessel that I know is transmitting on AIS across years?\nMaking sense of vessels with shiptype ‘Discrepancy’\nWhat is the difference between core_geartype and registry_vessel_class fields?\n\nNoise filter: Products only include non-noisy segments, and subsequently vessel_id’s with at least one non-noisy seg_id (eg passes the WHERE good_seg and NOT overlapping_and_short filter) are excluded from Products.",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Product Vessel Info Summary (PVIS)</span>"
    ]
  },
  {
    "objectID": "Product-Vessel-Info-Summary-PVIS.html#example-queries",
    "href": "Product-Vessel-Info-Summary-PVIS.html#example-queries",
    "title": "6  Product Vessel Info Summary (PVIS)",
    "section": "6.5 Example Queries",
    "text": "6.5 Example Queries\n\nPlease see the Product Vessel Info Summary Data Template Use cases section for example Queries expanding on the following questions:\nHow do I use the activity summary fields to understand vessel activity?\nHow do I compare what the current product ship and gear type is in the product vessel info summary table to what was in the previous version of the table (all vessels v2)?\nDiscrepancy vessel example\nWhy is a vessel I know to be a fishing vessel, not indicated as fishing on the Map?\nHow can the Product Vessel Info Summary table be used to identify all possible fishing vessels?\nvessel_id_connected_to_noisy_segment_check - if a vessel_id does not appear in the Product Vessel Info Summary table, the only reason this should happen is because the vessel_id is connected to only noisy segments. The example query allows users to input a vessel_id or ssvid and verify if the vessel_ids connected to the vessel have at least one non-noisy segment and should thus be included in the Product Vessel Info Summary table.",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Product Vessel Info Summary (PVIS)</span>"
    ]
  },
  {
    "objectID": "Product-Vessel-Info-Summary-PVIS.html#links",
    "href": "Product-Vessel-Info-Summary-PVIS.html#links",
    "title": "6  Product Vessel Info Summary (PVIS)",
    "section": "6.6 Links",
    "text": "6.6 Links\n\nProduct Vessel Info Summary table data template documentation: redundant in many ways to the GitWiki. Intended to flesh out field definitions and other data tables in a format accessible by non-github using staff.\n[Outdated] All Vessels v2 resources &gt; * Vessel API link to All vessels: Diagram showing how All Vessels v2 fits within the work flow of the Vessel Identity API &gt; * All Vessels v2 Confluence: Includes source tables and code used to populated All Vessels v2 table. &gt; * All Vessels v2 Tech Call slides: from bi weekly tech call presentation on July 27th 2023",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Product Vessel Info Summary (PVIS)</span>"
    ]
  },
  {
    "objectID": "Product-Vessel-Info-Summary-PVIS.html#updates",
    "href": "Product-Vessel-Info-Summary-PVIS.html#updates",
    "title": "6  Product Vessel Info Summary (PVIS)",
    "section": "6.7 Updates",
    "text": "6.7 Updates\nLast updated on September 30th, 2024\n\n[Aug 2024] Pipeline 3.0 released in Products alongside DeckGL release. This marks official shift to using product_vessel_info_summary table, and retiring all_vessels_v2 for both internal/staff and external users.\n[2024 - Pipeline 3.0] In Pipeline 3.0, all_vessels_byyear_v2 renamed to product_vessel_info_summary\n[Oct 26 2023] all_vessels_byyear_v2 released in Products as part of public Vessel Viewer (VV 2.0) release, with updates from internal feedback survey. &gt; Updates to table: &gt; * added most frequent imo transmitted on AIS &gt; * added most frequent callsign transmitted on AIS &gt; * renamed flag field to mmsi_flag to make it clear that this flag is populated based on the first 3 digits of the MMSI transmitted on AIS &gt; * added gfw_best_flag field, which is pulled from vi_ssvid_byyear table and considers AIS and registry information &gt; * added core_flag, which is the flag information in the identity core table if an AIS records is high confidence matched (eg based on MMSI and another identity value) to a hull id. &gt; * Within prod_shiptype field, added ‘gear’ as a shiptype. &gt; * Within prod_shiptype field, eliminated the ‘potential_fishing’ shiptype option, and reclassified those vessels to ‘fishing’ to reduce confusion. We maintained the potential_fishing boolean field (see data template for field definition). See whimsical in data template on how shiptype and geartype are designated for clarity on what this means for how shiptype is determined. (shout out to Matt for spearheading the whimsical) &gt; * changed how prod_geartype field is populated, to reflect exactly what is expected to be seen in Products. &gt; * added potential_fishing_source field. This indicates the highest confidence field used to inform the potential_fishing boolean field.\n\n\nImpacts on other datasets: For engineering reasons (mainly the maintenance of Vessel Viewer (prototype)), we need to maintain All Vessels v1 and the AIS Published Event datasets along side All Vessels v2. That said, for the time being there are two sets of published event tables. Please use the following tables moving forward for analysis. If you have any questions about this, please reach out. * all_vessels: pipe_production_v20201001.all_vessels_byyear_v2 * coverage: pipe_v20201001_api.indicators_coverage_blocks_v2 * encounters: pipe_production_v20201001.published_events_encounters_v2 - carriers and fishing vessels are identified differently in All Vessels v2. Thus which encounters are flagged as carrier-fishing and support-fishing and thus included publicly in map are different. See below for more details. &gt; * Carrier vessels (and bunker vessels) require a match to a hull_id in the identity core table to be flagged. The process for matching carrier vessel records to AIS records is more precise than what was originally implemented. As a result there are fewer carriers in products. Based on initial analysis, this change is a good one and should make our identification of carriers more accurate. I am still investigating this to make sure we aren’t systematically losing legitimate carrier vessels, and from the analysis so far, things look good. &gt; * Fishing vessels: The long standing bug which classified known fishing vessels to ‘other’ vessel type due to noise should now be fixed in the All Vessels v2 table. Further the list of vessels flagged as fishing is expanded. In addition to vessels that are flagged as on_fishing_list_best (the original filter for identifying fishing vessels) in the vi_ssvid_byyear table, vessels that are flagged as a fishing vessel in a registry on by the neural net are included as fishing vessels in Product if the vessel isn’t already flagged as a support, carrier, bunker, or discrepancy vessel (see whimsical in data template for visual flow diagram of what this looks like). * fishing events: pipe_production_v20201001.published_events_fishing_v2 &gt; * fishing events query has been re-run on an expanded list of fishing vessels using the All Vessels v2 table as the source, where if a vessel is potential_fishing or on_fishing_list_sr (see data template for field definitions), then the vessel has fishing events populated for it. In Products, a narrower set of vessels have fishing events displayed (eg only vessels where prod_shiptype = ‘fishing’). This provided, depending on the use case, analysts may need to add an extra filter when using the published events fishing table. If you have any questions on this, please reach out. * loitering: pipe_production_v20201001.published_events_loitering_v2 * port visits: pipe_production_v20201001.published_events_port_visits_v2 + [July 2023] The all_vessels_byyear_v2 table is shared internally.",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Product Vessel Info Summary (PVIS)</span>"
    ]
  },
  {
    "objectID": "Vessel-database.html",
    "href": "Vessel-database.html",
    "title": "7  Vessel database",
    "section": "",
    "text": "7.1 Data Overview\nThe Global Fishing Watch vessel database contains information about vessels that is/was recorded in various formats of vessel registries, including RFMO vessel lists and national vessel registers that are publicly available. It also includes lists of vessels that have been obtained through groups of researchers and analyzed by analysts from GFW and its partners. The collected registry data are matched to AIS data to assign further identity, authorization, and owner information among others to the vessel found in AIS. For further reading about the matching, go to the link. Owner: Jaeyoon",
    "crumbs": [
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Vessel database</span>"
    ]
  },
  {
    "objectID": "Vessel-database.html#key-tables",
    "href": "Vessel-database.html#key-tables",
    "title": "7  Vessel database",
    "section": "7.2 Key Tables",
    "text": "7.2 Key Tables\n\nvessel_database.all_vessels_vYYYYMMDD - This table contains all identity information for a vessel available from AIS and vessel registries, including where a vessel is authorized to operate, and who owns the vessel. The table is automatically created with the latest update on the 1st day of the month, and contains data until the date YYYYMMDD. For instance, vessel_database.all_vessels_v20211101 is created on the Dec 1, 2021, and includes AIS/registry data up to 2020-10-31 23:59:59. You can see the current status of the latest database in this dashboard.\nvessel_database_staging.registry_[registry_code]_vYYYYMMDD - These tables represent raw registries scraped monthly. You may replace [registry_code] with the registry code to be found in the registry sources. The tables include data obtained from each registry before they go through the process of matching registry to AIS.\nsingle_mmsi_matched_vessels_byyear_vYYYYMMDD - This table includes the most representative vessel per MMSI by year from the vessel database. Therefore, a single MMSI represents one row (vessel) in the given year in this table. The fields are identical to the vessel database except this table has year column.",
    "crumbs": [
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Vessel database</span>"
    ]
  },
  {
    "objectID": "Vessel-database.html#data-description",
    "href": "Vessel-database.html#data-description",
    "title": "7  Vessel database",
    "section": "7.3 Data Description",
    "text": "7.3 Data Description\nThe vessel database uses a multi-step process to match identity information from AIS data with identity information from vessel registries. Vessels are matched according to shipname, callsign, IMO number, and MMSI. These matches are then summarized by MMSI to show all identities associated with each MMSI. For more detailed information on the identity matching process, see this document.\n\nmatched: TRUE if the AIS identity standard-matches to one or more registries. The standard match indicates that the records from AIS and registry sufficiently close in multiple fields among name, callsign, IMO, MMSI number, and flag. In most cases, you would only need the standard matches.\nloose-match: TRUE if the AIS identity loose-matches to one or more registries. The loose-match represents the records that matched between AIS and registry through only name and flag. This is sometimes useful for investigating additional Chinese/Taiwanese vessels as some do only broadcast ship name. Not broadcasting other identity fields prevents the more confident standard-match, but if they use distinct ship name, it is possible to identify them through loose-match. Beware that loose-matches may present wrong matches if more than one vessel from the same country exist (e.g. There are &gt;20 vessels that are US-flagged and named FREEDOM)\nidentity: This STRUCT includes identity fields that are MMSI number, shipname, callsign, IMO number, and flag. It relies on data recorded in AIS data if a match was not perfect but good enough to pass the matching process. (e.g. AIS: ACONCAGUA vs Registry: ACONCAGOUA → In this case, normalized value from AIS (ACONCAGUA) remains in final database)\n\n\nssvid: The source-specific vessel ID which is equivalent to MMSI number in this dataset\n\n\nn_: This prefix represents “normalized” for shipname and callsign\n\n\nflag: The flag of a vessel is represented by ISO-3 country code\n\n\nfeature: This STRUCT presents representative (or best) value of vessel characteristics (length, tonnage, power, geartype, and crew number) derived from corresponding values registered in multiple registries. All raw values that are 2 standard deviations away from the average are discarded as an outlier. Each registry has only one vote for the calculation so as to avoid double counts for multiple scrapes of a registry. If some registries have higher levels of confidence (4 being the highest, 1 being the lowest), then they override the lower ones.\n\n\ngeartype: It represents the classification of a vessel. All (distinct) gears recorded in registries for a given vessel are stored in a form of ARRAY. Gears that can be merged will be merged to more fine-grained values (e.g. fishing | tuna_purse_seines | purse_seines → merged to only tuna_purse_seines)\n\n\nis_fishing, is_carrier, is_bunker: TRUE if the given vessel is categorized into the corresponding type based on feature.geartype values, FALSE otherwise\nactivity: It is an ARRAY of STRUCT of time blocks (including first_timestamp, last_timestamp, messages). Time blocks are AIS activities of the given vessel separated by &gt;90 days of gap from one another. For instance, if a vessel is AIS-active from 2020-01-01 to 2020-08-31, and then active again from 2021-01-01 to 2021-10-31, the activity field includes two elements in its ARRAY of the activity range in 2020 and 2021. However, if the first activity was up to 2020-11-30, then the two activity ranges are merged as from 2020-01-01 to 2021-10-31.\nregistry: It is an ARRAY of STRUCT of all relevant raw values from source registries. Often, this ARRAY includes a number of rows because a vessel may be registered to multiple registries, and those registries are scraped every month for a long period.\n\n\nlist_uvi: A unique vessel identifier within a given registry, it starts with registry code followed by ID code (e.g. WCPFC-1079)\n\n\nauthorized_from, authorized_to: Information about authorization period (mostly from RFMO registries). If one of the fields is NULL, it means no authorization information is available publicly, not that it is unauthorized.\n\n\nis_active: TRUE if a given vessel is active in AIS (at least 1 day) during the authorized period, FALSE otherwise.\n\n\nlast_modified: Date of known update made in registry\n\n\nscraped: Date of scraping (usually the 1st day of month)\n\n\nowner: Name of the owner (usually a company name). The owner is as indicated in a registry, which means it could be only registered owner instead of beneficial owner. We try to pull the beneficial owner if that information is available in the given registry.\n\n\nowner_flag: Nationality of the owner, based on the available information found in the given registry",
    "crumbs": [
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Vessel database</span>"
    ]
  },
  {
    "objectID": "Vessel-database.html#caveats-known-issues",
    "href": "Vessel-database.html#caveats-known-issues",
    "title": "7  Vessel database",
    "section": "7.4 Caveats & Known Issues",
    "text": "7.4 Caveats & Known Issues\nThe database may contain information that is out of date or incorrect due to wrong information available in one or multiple registries on which the database relies. Users may want to double-check the validity of the information found in the database. Users can provide the correct information in this spreadsheet which will override the current data in the table. In case of any questions or suggestions, please contact jaeyoon@globalfishingwatch.org",
    "crumbs": [
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Vessel database</span>"
    ]
  },
  {
    "objectID": "Vessel-database.html#example-queries",
    "href": "Vessel-database.html#example-queries",
    "title": "7  Vessel database",
    "section": "7.5 Example Queries",
    "text": "7.5 Example Queries\nYou can find some example queries for the vessel database in this link",
    "crumbs": [
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Vessel database</span>"
    ]
  },
  {
    "objectID": "Vessel-database.html#links",
    "href": "Vessel-database.html#links",
    "title": "7  Vessel database",
    "section": "7.6 Links",
    "text": "7.6 Links\n\nTraining slides\nGitHub repo\nData dashboard\nRegistry sources\nUser guide",
    "crumbs": [
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Vessel database</span>"
    ]
  },
  {
    "objectID": "Vessel-database.html#updates",
    "href": "Vessel-database.html#updates",
    "title": "7  Vessel database",
    "section": "7.7 Updates",
    "text": "7.7 Updates\n\nAll documents are updated on 2021-11-18\nAll key tables are automatically updated every 1st day of the month.\n\nIn the process in Nov 2021, some duplicates (mostly Chinese vessels) were merged together. It was due to some minor discrepancies that were not automatically detected/merged. For instance, two rows that have the same name but different call signs such as B4X80 and B4X8O, or two rows that have the same identity except different suffix numbers (which is important to separate vessels) such as LURONGYUANYU107 and LURONGYUANYU1O7. These cases are manually corrected and merged.",
    "crumbs": [
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Vessel database</span>"
    ]
  },
  {
    "objectID": "Vessel-info-tables.html",
    "href": "Vessel-info-tables.html",
    "title": "8  Vessel info tables",
    "section": "",
    "text": "8.1 Key Tables",
    "crumbs": [
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Vessel info tables</span>"
    ]
  },
  {
    "objectID": "Vessel-info-tables.html#key-tables",
    "href": "Vessel-info-tables.html#key-tables",
    "title": "8  Vessel info tables",
    "section": "",
    "text": "gfw_research.vi_ssvid_vYYYYMMDD - This table includes the best activity and identity information available for the vessel based on its full AIS timeseries.\ngfw_research.vi_ssvid_byyear_vYYYYMMDD - This table includes annual best activity and identity information for the vessel based only on data in each year. As a result, the information for a given year in gfw_research.vi_ssvid_byyear_vYYYYMMDD may not match that in gfw_research.vi_ssvid_vYYYYMMDD (e.g. the vessel recently re-flagged).\n\ngfw_research.fishing_vessels_ssvid_vYYYYMMDD - This table includes the GFW yearly list of active non spoofing/offsetting fishing vessels. It is GFW’s most restrictive list of fishing vessels and the default list to use in research/analysis.",
    "crumbs": [
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Vessel info tables</span>"
    ]
  },
  {
    "objectID": "Vessel-info-tables.html#data-description",
    "href": "Vessel-info-tables.html#data-description",
    "title": "8  Vessel info tables",
    "section": "8.2 Data Description",
    "text": "8.2 Data Description\n\n8.2.1 vi_ssvid and vi_ssvid_byyear tables\nThe information in the main vessel info tables (vi_ssvid_vYYYYMMDD; vi_ssvid_byyear_vYYYYMMDD) is organized into multiple STRUCT that summarize the MMSI’s activity, ais_identity, inferred characteristics, registry_info, and best info to be used by GFW.\n\nactivity: Fields summarizing the amount and location of the MMSI’s AIS activity - positions, hours, fishing_hours, spoofing etc.\n\n\neez: Helpful summary of the MMSI’s activity (hours, fishing_hours) by EEZ. Useful for quick, non-spatial summaries of activity by EEZ\n\n\noffsetting: Whether the MMSI offsetting its position\n\n\noverlap_hours_multinames: Spoofing flag. Indicates how many hours the MMSI has overlapping segments with multiple identities. MMSI with overlap_hours_multinames &gt; 24 in a given year are considered to be spoofed.\n\n\nais_identity: Fields summarizing the identities (ship name, callsign, IMO, flag, etc.) broadcast by that MMSI in AIS messages. Each identity type includes a mostcommon field providing the most-common value for that identity type.\n\n\nFields prefixed with n_ are normalized versions of the original values.\n\n\nlikely_gear: Whether the MMSI’s most common shipname (n_shipname_mostcommon) suggests the MMSI is attached to fishing gear (e.g. BUOY16).\n\n\ninferred: Fields summarizing vessel characteristics (length, tonnage, geartype) inferred by the neural net for the MMSI.\n\n\nGFW uses a nested vessel class hierarchy and only “leaf” classes are scored by the neural net, which are recorded in inferred.inferred_vessel_class. However, the final inferred vessel class assigned to an MMSI is recorded in inferred.inferred_vessel_class_ag and corresponds to the lowest level vessel class with a cumulative neural net score &gt; 0.5.\n\n\nregistry_info: The identity information associated with the MMSI sourced from vessel registries\n\n\nValues correspond to the feature STRUCT in the vessel database.\n\n\nbest: GFW’s assigned “best” vessel characteristics after considering all info from AIS, the neural net, and vessel registries\n\n\nregistry_net_disagreement: Do the neural net (inferred.inferred_vessel_class_ag) and vessel registries (registry_info.best_known_vessel_class) disagree about the vessel class of the MMSI\n\n\n\n\n8.2.1.1 on_fishing_list_ fields\nGFW assigns MMSI to four types of fishing lists in the vessel info tables. Three lists indicate whether the MMSI is potentially a fishing vessel according to different sources. The fourth list, on_fishing_list_best combines the results of the previous three lists to make a final determination of whether each MMSI is likely a fishing vessel.\n\non_fishing_list_known - Listed as a fishing vessel on 1+ registries\non_fishing_list_sr - Consistently self reports as fishing in AIS messages &gt;98% of messages; minimum 50 positions\non_fishing_list_nn - The neural net believes the vessel is more likely a fishing vessel than a non-fishing vessel (e.g. combined neural net score for fishing classes inferred.fishing_class_score &gt; 0.5)\non_fishing_list_best - GFW’s best list of likely fishing MMSI. True in the following cases:\n\nThe vessel is on_fishing_list_known\nThe vessel is on_fishing_list_sr and on_fishing_list_nn\nThe vessel’s highest inferred.inferred_vessel_class_score is for a fishing vessel class and exceeds 0.85\nThe vessel is on_fishing_list_nn and on_fishing_list_known is not False\n\n\n\n\n\n8.2.2 fishing_vessels_ssvid table\nThe on_fishing_list_best field in the vessel info tables indicates whether GFW believes an MMSI is likely a fishing vessel. However, many of these MMSI are spoofing, offsetting, likely gear, or simply highly inactive and including them in analyses can introduce a lot of noise. For this reason, GFW produces the fishing_vessels_ssvid table, which takes the MMSI listed as on_fishing_list_best and applies a set of filters to fields in the activity struct of the vi_ssvid_byyear table to create a yearly list of likely fishing vessels.",
    "crumbs": [
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Vessel info tables</span>"
    ]
  },
  {
    "objectID": "Vessel-info-tables.html#caveats-known-issues",
    "href": "Vessel-info-tables.html#caveats-known-issues",
    "title": "8  Vessel info tables",
    "section": "8.3 Caveats & Known Issues",
    "text": "8.3 Caveats & Known Issues\n\n8.3.1 Fishing hours incorrect for squid jiggers\nCurrently, the vessel info table summarizes fishing_hours from the pipe_v20201001_segs_daily table. Fishing hours in this table are calculated solely from nnet_score and are therefore incorrect for squid_jiggers, which should be calculated using night_loitering.",
    "crumbs": [
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Vessel info tables</span>"
    ]
  },
  {
    "objectID": "Vessel-info-tables.html#example-queries",
    "href": "Vessel-info-tables.html#example-queries",
    "title": "8  Vessel info tables",
    "section": "8.4 Example Queries",
    "text": "8.4 Example Queries\n\nvessel_info_examples_1_v20211128.sql\nvessel_info_examples_2_v20211128.sql",
    "crumbs": [
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Vessel info tables</span>"
    ]
  },
  {
    "objectID": "Vessel-info-tables.html#links",
    "href": "Vessel-info-tables.html#links",
    "title": "8  Vessel info tables",
    "section": "8.5 Links",
    "text": "8.5 Links\n\nVessel info training slides\nVessel class definitions",
    "crumbs": [
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Vessel info tables</span>"
    ]
  },
  {
    "objectID": "Vessel-info-tables.html#updates",
    "href": "Vessel-info-tables.html#updates",
    "title": "8  Vessel info tables",
    "section": "8.6 Updates",
    "text": "8.6 Updates",
    "crumbs": [
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Vessel info tables</span>"
    ]
  },
  {
    "objectID": "Annual-carrier-vessel-list.html",
    "href": "Annual-carrier-vessel-list.html",
    "title": "9  Annual carrier vessel list",
    "section": "",
    "text": "9.1 Key Tables",
    "crumbs": [
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Annual carrier vessel list</span>"
    ]
  },
  {
    "objectID": "Annual-carrier-vessel-list.html#key-tables",
    "href": "Annual-carrier-vessel-list.html#key-tables",
    "title": "9  Annual carrier vessel list",
    "section": "",
    "text": "vessel_database.carrier_vessels_byyear_vYYYYMMDD - This table contains the list of annual carrier vessels that are active in AIS and matched to vessel registries, extracted from the vessel database. The table includes year, mmsi, flag, and vessel class, and is automatically created on the 1st day of the month with the up-to-date information. The creation of the table has a lag time of one month (e.g. vessel_database.carrier_vessels_byyear_v20211101 is created on the Dec 1, 2021, and includes the carrier list using data up to 2020-10-31 23:59:59.",
    "crumbs": [
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Annual carrier vessel list</span>"
    ]
  },
  {
    "objectID": "Annual-carrier-vessel-list.html#data-description",
    "href": "Annual-carrier-vessel-list.html#data-description",
    "title": "9  Annual carrier vessel list",
    "section": "9.2 Data Description",
    "text": "9.2 Data Description\nThe annual carrier vessel list extracts the information about likely carrier vessels by year from the vessel database (only AIS-registry matched vessels), therefore all likely carrier vessels (based on is_carrier fields in the vessel database) for each year. It includes year, mmsi, flag, and vessel class in the table. Some carrier vessels may appear in multiple years.\n\nyear: Year in which the given MMSI number is likely associated with a carrier vessel\nmmsi: MMSI number likely assigned to a carrier vessel at the given year\nflag: Flag of a vessel represented by ISO-3 country code\nvessel_class: It represents the classification of a carrier vessels, which is one of reefer, specialized_reefer, container_reefer, fish_factory, well_boat, and fish_tender",
    "crumbs": [
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Annual carrier vessel list</span>"
    ]
  },
  {
    "objectID": "Annual-carrier-vessel-list.html#caveats-known-issues",
    "href": "Annual-carrier-vessel-list.html#caveats-known-issues",
    "title": "9  Annual carrier vessel list",
    "section": "9.3 Caveats & Known Issues",
    "text": "9.3 Caveats & Known Issues\nThe database may contain information that is out of date or incorrect due to wrong information available in one or multiple registries on which the database relies, or a carrier vessel misuses AIS. The MMSI numbers are not cleaned up so there may be noisy MMSIs that are shared by multiple vessels (not necessarily only by carriers) in the dataset. Users are expected to apply appropriate filters to remove noisy MMSIs according to their goals. In case of any questions or suggestions, please contact jaeyoon@globalfishingwatch.org",
    "crumbs": [
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Annual carrier vessel list</span>"
    ]
  },
  {
    "objectID": "Fishing-events.html",
    "href": "Fishing-events.html",
    "title": "(PART) Events",
    "section": "",
    "text": "Fishing events\nFishing Events is a GFW data product which groups AIS fishing positions together into events. In addition to grouping fishing positions together, the Fishing Events table also has a set of minimally restrictive rules applied to separate large fishing events and to remove fishing events considered to be likely noise.\nFishing Events are displayed on vessel tracks in the Map.\nNote, Fishing Events and the apparent fishing effort layer in the Map are not consistent. See data caveats for more information.",
    "crumbs": [
      "(PART) Events"
    ]
  },
  {
    "objectID": "Fishing-events.html#key-tables",
    "href": "Fishing-events.html#key-tables",
    "title": "(PART) Events",
    "section": "Key Tables",
    "text": "Key Tables\n\nworld-fishing-827.pipe_ais_v3_published.fishing_events - Internal. Fishing events logic, described in Data Description section, applied to least restrictive list of fishing vessels (eg when potential_fishing OR on_fishing_list_sr)\nworld-fishing-827.pipe_ais_v3_published.product_events_fishing - Fishing events displayed in products. Fishing events logic, described in ’Data Description` applied to vessels when they are indicated as fishing vessels in GFW products (eg when prod_shiptype = “fishing”)\n\n\nNote Always use the product_events_x or proto_events_x (if still considered a prototype) view version of a table rather than product_events_x_v (for example, if you want to use pipe_ais_v3_published.product_events_fishing then use that view table rather than pipe_ais_v3_published.product_events_fishing_v. The _v form of a product events table only exists for internal engineering purposes. When the tables are updated daily we must calculate if any events have changed from yesterday to today and to add those into the product_events. The _v form of a table is created for this calculation, but is not to be used by anyone.",
    "crumbs": [
      "(PART) Events"
    ]
  },
  {
    "objectID": "Fishing-events.html#source-tables",
    "href": "Fishing-events.html#source-tables",
    "title": "(PART) Events",
    "section": "Source Tables",
    "text": "Source Tables\nSee the Details tab in BigQuery for this information.\n\n\n\nFishing events BQ source tables",
    "crumbs": [
      "(PART) Events"
    ]
  },
  {
    "objectID": "Fishing-events.html#data-description",
    "href": "Fishing-events.html#data-description",
    "title": "(PART) Events",
    "section": "Data Description",
    "text": "Data Description\nThe current Fishing Events are constructed through the following steps. Step 1 applies the standard noise filter; Step 2 groups fishing positions together; Step 3 breaks events up events if AIS positions are too spatially or temporally far away to be reasonably related; Step 4 joins fishing events separated by non-fishing if the events are spatially and temporally close together; Steps 5 and 6 filter out likely false or noisy fishing events.\n\nApplies standard noise filter e.g. good_segment AS (SELECT seg_id FROM world-fishing-827.gfw_research.pipe_v20201001_segs WHERE good_seg AND positions &gt; 10 AND NOT overlapping_and_short)\nGroups consecutive fishing positions in the same seg_id. Night_loitering score is used in place of neural net score for squid jigger vessels.\nSeparates long events defined as consecutive fishing positions separated by more than 10 km OR 2 hours apart in the same seg_id.\nJoins close events defined as fishing events separated by non-fishing positions but within 1 hour AND 2 km of another fishing event\nFilters out short events defined as events shorter than 20 minutes OR with 5 or fewer ais positions OR with event distance of less than 0.5 km (50 meters for squid)\nFilters out fast moving vessel events defined as events with average vessel speed of 10 knots per hour or greater",
    "crumbs": [
      "(PART) Events"
    ]
  },
  {
    "objectID": "Fishing-events.html#fishing-events-versus-apparent-fishing-effort",
    "href": "Fishing-events.html#fishing-events-versus-apparent-fishing-effort",
    "title": "(PART) Events",
    "section": "Fishing events versus apparent fishing effort",
    "text": "Fishing events versus apparent fishing effort\n\n\n\n\n\n\n\n\n\nCategory\nDescription\nLogic\nVessels meeting the criteria\n\n\n\n\nLeast Restrictive Fishing Events\nFishing events query logic applied to vessels in PVIS table during any year where potential_fishing OR on_fishing_list_sr.Intended for internal use, where an analyst or researcher knows a vessel is a fishing vessel and wants to see the fishing events for the vessel, but the vessel is not identified as a fishing vessel in Products.\n(1) Applies standard noise filter: filters segments by criteria (good_seg, positions &gt; 10, not overlapping or short). (2) Groups consecutive fishing positions in seg_id. (3) Splits events separated by &gt;10 km or &gt;2 hours. (4) Joins events within 1 hr & 2 km of another. (5) Removes short events (&lt;20 min, &lt;5 AIS positions, &lt;0.5 km distance) and fast-moving vessels (speed &gt; 10 knots). Applied to vessels WHERE potential_fishing OR on_fishing_list_sr.\nSELECT DISTINCT vessel_id, year FROM pipe_ais_v3_published.product_vessel_info_summary WHERE potential_fishing OR on_fishing_list_sr\n\n\nFishing Events Used in Products\nFishing events query logic applied to vessels in PVIS table during any year where prod_shiptype = ‘fishing’.Intended for product use, where the sources of data available indicate the vessel is a fishing vessel and there is little or no conflicting information.\nSame logic as Least Restrictive Fishing Events applied to a more restrictive list of vessels - WHERE prod_shiptype = ‘fishing’.                                                                                                                                                                         |SELECT DISTINCT vessel_id, year FROM pipe_ais_v3_published.product_vessel_info_summary WHERE prod_shiptype = ‘fishing’| | **Apparent Fishing Effort (in Map)**          | Incorporates apparent fishing positions from gridded fishing effort layer in map view for years where vessels meet both the “Fishing Events Used in Products” criteria and noise filter requirements.                                                                                                                             | Includes all criteria and filters as specified in the **Fishing Events Used in Products** logic AND includes additional noise filters.                                                                                                                                                                                                                                                                           |SELECT DISTINCT vessel_id, year FROM pipe_ais_v3_published.product_vessel_info_summary WHERE prod_shiptype = ‘fishing’ AND NOT offsetting AND (overlap_hours_multinames &lt; 24 OR overlap_hours_multinames IS NULL) AND (shipname_count &lt;= 5 OR shipname_count IS NULL) AND fishing_hours &gt; 24 AND active_hours &gt; 24*5 AND CAST(ssvid AS int64) NOT IN (SELECT ssvid FROM source_research_bad_mmsi, UNNEST(ssvid) as ssvid) AND (best_vessel_class != ‘gear’ OR best_vessel_class IS NULL)`\n\n\n\n\nWhat is the difference between the apparent fishing effort layer and the fishing events in the vessel track? FAQ",
    "crumbs": [
      "(PART) Events"
    ]
  },
  {
    "objectID": "Fishing-events.html#caveats-and-known-issues",
    "href": "Fishing-events.html#caveats-and-known-issues",
    "title": "(PART) Events",
    "section": "Caveats and Known Issues",
    "text": "Caveats and Known Issues\nAccuracy of events:\n\nIf a vessel uses a recycled MMSI, or if another vessels transmits the same MMSI, then the models used to determine if a vessel is likely a fishing vessel may have reduced accuracy. It is important to verify that the vessel you are interested in is identified as a fishing vessel. See PVIS gitwiki for more guidance on this.\nSimilarly, if a vessel is identified as a fishing vessel when it should not be, then the PVIS gitwiki should be reviewed to support investigation.\nThe fishing events logic is applied in the same way for all vessels (with squid jiggers as an exception). Given fishing behavior can look very different, the accuracy of applying the identical logic for grouping fishing positions could have limited accuracy. Subsequently, the count of individual events should be viewed as arbitrary. For greater context, fishing events were developed for grouping positions visually on the map, and for isolating and removing positions identified as unlikely to actually be fishing (events that are too short, or where the vessel is moving too quickly, or where the previous and subsequent positions associated with the vessel are not frequent enough to suggest identification of fishing behavior can be identified meaningfully).\n\nDiscrepancies between fishing events and apparent fishing effort:\n\nFishing events and apparent fishing effort are not perfectly aligned. Given Fishing Events and Fishing Efforts both appear in the GFW Map, this may lead to discrepancies on the public map on occasion (eg Fishing effort cells appearing on GFW map but no fishing events). See Fishing Event Tech Call slide deck in supplementary materials for a comparison of fishing events and pipefishing (eg fishing effort). In future pipeline versions and updates to the public map effort may be made to make fishing events and fishing effort data align.",
    "crumbs": [
      "(PART) Events"
    ]
  },
  {
    "objectID": "Fishing-events.html#example-queries-needs-to-be-updated-to-reflect-pipe-3.0-data-tables",
    "href": "Fishing-events.html#example-queries-needs-to-be-updated-to-reflect-pipe-3.0-data-tables",
    "title": "(PART) Events",
    "section": "Example Queries (needs to be updated to reflect pipe 3.0 data tables)",
    "text": "Example Queries (needs to be updated to reflect pipe 3.0 data tables)\n\npublished_fishing_events_and_pipe_comparison.sql\npublished_fishing_events_in_polygon_w_vessel_info.sql\npublished_fishing_events_by_position_in_polygon.sql\npublished_events_unnest_auth_info.sql - This query is to help reduce barriers with pulling information out of the published event table format (which can be tricky!). While I focus on pulling information on authorization, this example query is a great reference for any time you want to extract information nested in the vessel_info or event_info fields.",
    "crumbs": [
      "(PART) Events"
    ]
  },
  {
    "objectID": "Fishing-events.html#links",
    "href": "Fishing-events.html#links",
    "title": "(PART) Events",
    "section": "Links",
    "text": "Links\n\nWhat is the difference between the apparent fishing effort layer and the fishing events in the vessel track? FAQ\n(likely outdated) Fishing Effort and Events training slide deck link HERE\n(likely outdated) Fishing Event Tech Call slide deck link HERE",
    "crumbs": [
      "(PART) Events"
    ]
  },
  {
    "objectID": "Fishing-events.html#updates",
    "href": "Fishing-events.html#updates",
    "title": "(PART) Events",
    "section": "Updates",
    "text": "Updates\nLast updated on Oct 30th, 2024\n\n[August 2024] Pipeline 3.0 released in Products alongside DeckGL release. This marks official shift to using the pipe_ais_v3_published.product_events_fishing table, and retiring the pipe 2.5 fishing events table for both internal/staff and external users.\n[2024 - Pipeline 3.0] In Pipeline 3.0, published_events_fishing_v2 renamed to product_events_fishing. A second table of fishing events with a less restrictive list of potential fishing vessels was created in pipe 3 as well. This table is named fishing_events. Both tables are in pipe_ais_v3_published bin. Both tables use the exact same logic. The only difference is the list of vessels the query is run on.\n[October 2023] The published_events_fishing was re-run on an expanded list of fishing vessels using information from the all_vessels_v2 table. Now vessels that are on_fishing_list_best, on_fishing_list_inferred, on_fishing_list_known, or on_fishing_list_sr have fishing events populated. This means that to reproduce the fishing events in Products, the fishing events table will need to be filtered for vessel_ids which are prod_shiptype = fishing in the all_vessels_v2 table.\n[May 2023] The proto_events_fishing table which was used in Products was updated to the published_events_fishing table, and the proto_events_fishing table was removed in June 2023. The published events fishing table now includes information on vessel authorization status, consistent with how authorization status is determined in vessel encounters.\n[Spring 2023] Authorization information is now included for fishing events, following the same logic as encounters for determining authorization status. Note, authorization information is limited to 7 RFMOs (5 tuna RFMOs, NPFC, and SPRFMO).\n[August 24 2021] In the previous version for fishing events (prior to world-fishing-827.pipe_production_v20201001.proto_events_fishing) fishing events were more simply defined. Events were created if consecutive AIS points were considered ‘fishing’ by the neural net, and fishing events were grouped if they were only separated in time by a short duration (e.g., 10 minutes). There were no restrictions to remove likely noise nor to separate events made of AIS positions in different seg_id’s.",
    "crumbs": [
      "(PART) Events"
    ]
  },
  {
    "objectID": "Encounters.html",
    "href": "Encounters.html",
    "title": "10  Encounters",
    "section": "",
    "text": "10.1 Key Tables",
    "crumbs": [
      "<span class='chapter-number'>10</span>  <span class='chapter-title'>Encounters</span>"
    ]
  },
  {
    "objectID": "Encounters.html#key-tables",
    "href": "Encounters.html#key-tables",
    "title": "10  Encounters",
    "section": "",
    "text": "pipe_production_v20201001.published_events_encounters_v2 - same as the encounters table but with a schema intended for use in products and consumed by the APIs. This means that there is one row for each of the two vessels in an encounter and the two rows must be joined together to have the information associated with both vessels on the same row (see query examples). This table also includes information on vessel authorization status.\npipe_production_v20201001.encounters - Source table for published events encounters table. This is not filtered by speed and has one row per encounter.\n\n\nNote\nAlways use the published_events_x view version of a table rather than published_events_x_v (for example, if you want to use pipe_production_v20201001.published_events_encounters then use that view table rather than pipe_production_v20201001.published_events_encounters_v. The _v form of a published events table only exists for internal engineering purposes. When the tables are updated daily we must calculate if any events have changed from yesterday to today and to add those into the published_events. The _v form of a table is created for this calculation, but is not to be used by anyone.\n\n\n10.1.1 Source Tables\n\nworld-fishing-827:pipe_production_v20201001.raw_encounters_*\nworld-fishing-827:pipe_static.spatial_measures_20200311\nworld-fishing-827:pipe_production_v20201001.segment_info\nworld-fishing-827:pipe_production_v20201001.position_messages_\nworld-fishing-827.pipe_production_v20201001.all_vessels_byyear\nworld-fishing-827.pipe_production_v20201001.vessel_info\nworld-fishing-827.vessel_identity.identity_core\nworld-fishing-827.vessel_identity.identity_authorization",
    "crumbs": [
      "<span class='chapter-number'>10</span>  <span class='chapter-title'>Encounters</span>"
    ]
  },
  {
    "objectID": "Encounters.html#data-description",
    "href": "Encounters.html#data-description",
    "title": "10  Encounters",
    "section": "10.2 Data Description",
    "text": "10.2 Data Description\nWhen two vessels are observed in close proximity for an extended period of time it is considered an encounter. published_events_encounters applies the additional constraint that both vessels must be moving very slowly. Encounters occur when:\n2 vessels within 500 meters of each other Minimum duration of 2 hours 10 kilometers from a coastal anchorage traveling &lt;2 knots [published_events_encounters only]\nFor more information, see data training slides on encounter and loitering events HERE.\n\n10.2.0.1 Definitions used in RFMO Transshipment Reports\nGFW, in partnership with The Pew Charitable Trusts, has produced annual reports covering the years of 2017-2019 on transshipment activity in the the five major tuna RFMOs. These reports compare reported activity to potential transshipment, fishing, and port activity detected on AIS. The definitions of encounter and loitering events used for these reports are as follows.\n\nEncounters: when two vessels are within 500 meters of each other for at least 2 hours and traveling at &lt; 2 knots, while at least 10 kilometers from a coastal anchorage (Miller et al. 2018).",
    "crumbs": [
      "<span class='chapter-number'>10</span>  <span class='chapter-title'>Encounters</span>"
    ]
  },
  {
    "objectID": "Encounters.html#caveats-known-issues",
    "href": "Encounters.html#caveats-known-issues",
    "title": "10  Encounters",
    "section": "10.3 Caveats & Known Issues",
    "text": "10.3 Caveats & Known Issues\n\nGFW has never created encounters for short events on either side of the UTC day boundary - specifically those that start between 10pm and 12am or end between 12am and 2am. This is a known issue that will be fixed in the future, for more information see PIPELINE-2137 and this Slack thread\nPoint nature of events; if ais transmission is poor, the average location can be inconsistent with full location of tracks during time period. In addition, due to the way events are combined across days, average event parameters are approximate.\nDue to the definition of encounter and loitering events, loitering events can overlap with encounter events.\nMaintaining up to date identity changes of carrier and fishing vessels of interest in encounters between carrier and fishing vessels. Always use the most up-to-date identity tables, and verify results when possible.\nVessels may encounter more than one vessel at a time, an issue that comes up frequently in the presence of gear, but also occasionally with multiple vessels meeting.",
    "crumbs": [
      "<span class='chapter-number'>10</span>  <span class='chapter-title'>Encounters</span>"
    ]
  },
  {
    "objectID": "Encounters.html#example-queries",
    "href": "Encounters.html#example-queries",
    "title": "10  Encounters",
    "section": "10.4 Example queries",
    "text": "10.4 Example queries\n\nencounters_1_ssvid.sql - this query pulls information on both vessels in the encounter, including vessel attributes that are nested within the event_vessels field\n\nencounters_2_carriers_fishing.sql - this query identifies encounters between carrier and fishing vessels, pulling from the shiptype attribute used in Products (eg mirroring the encounters you would expect to see in Products as of June 2023 when this query was drafted).\nencounters_3_iccat.sql - new example query that pulls out encounters that occurred inside ICCAT. Pulls using the ICCAT shapefile in the pipe_regions_layers bin. Technically you could also use the method in the below example query to identify encounters in ICCAT - both pulling region information from within the published events table, and using the regions shapefiles in the pipe_regions_layers should yield the same results.\nencounters_3_no_take_mpa.sql - new example query that pulls out encounters that occurred inside a no take MPA based on the region information in the Map.\nencounters_4_original_table.sql - this query pull encounters with an average speed of greater than 2 knots from the original encounter table that is the base for the published event encounter table. Note, for the most part, the only encounters in the original table that are not in the published_event_encounter table, are those encounters with an average speed above 2 knots.\npublished_events_unnest_auth_info.sql - how to pull event authorization from published event table schema\n\nloitering_overlap_encounters.sql\nanalysis-pew-ts-reports/rfmo/rfmo-yyyy: see queries folder for BQ data pull and analysis folder for data cleaning and analysis",
    "crumbs": [
      "<span class='chapter-number'>10</span>  <span class='chapter-title'>Encounters</span>"
    ]
  },
  {
    "objectID": "Encounters.html#related-content",
    "href": "Encounters.html#related-content",
    "title": "10  Encounters",
    "section": "10.5 Related Content",
    "text": "10.5 Related Content\n\nCarrier Vessel Portal (CVP)",
    "crumbs": [
      "<span class='chapter-number'>10</span>  <span class='chapter-title'>Encounters</span>"
    ]
  },
  {
    "objectID": "Loitering.html",
    "href": "Loitering.html",
    "title": "11  Loitering",
    "section": "",
    "text": "11.1 Key Tables",
    "crumbs": [
      "<span class='chapter-number'>11</span>  <span class='chapter-title'>Loitering</span>"
    ]
  },
  {
    "objectID": "Loitering.html#key-tables",
    "href": "Loitering.html#key-tables",
    "title": "11  Loitering",
    "section": "",
    "text": "world-fishing-827.pipe_production_v20201001.published_events_loitering_v2 - Similar to loitering table, however the schema is modified to be consistent with the other published_events_ tables AND the data is restricted to avg_distance_from_shore_nm&gt;=20 and segments must be good_seg AND NOT overlapping_and_short , largely used in products APIs\nworld-fishing-827.pipe_production_v20201001.loitering - loitering table is for all vessels types with no constraints on distance from shore and duration, and has not been filtered to good seg or overlapping and short. - analysts need to add restrictions.\n\n\nNote Always use the published_events_x view version of a table rather than published_events_x_v (for example, if you want to use pipe_production_v20201001.published_events_loitering then use that view table rather than pipe_production_v20201001.published_events_loitering_v. The _v form of a published events table only exists for internal engineering purposes. When the tables are updated daily we must calculate if any events have changed from yesterday to today and to add those into the published_events. The _v form of a table is created for this calculation, but is not to be used by anyone.",
    "crumbs": [
      "<span class='chapter-number'>11</span>  <span class='chapter-title'>Loitering</span>"
    ]
  },
  {
    "objectID": "Loitering.html#source-tables",
    "href": "Loitering.html#source-tables",
    "title": "11  Loitering",
    "section": "11.2 Source Tables",
    "text": "11.2 Source Tables\nThe tables that are used in the loitering query are: gfw_research.pipe_v20201001",
    "crumbs": [
      "<span class='chapter-number'>11</span>  <span class='chapter-title'>Loitering</span>"
    ]
  },
  {
    "objectID": "Loitering.html#data-description-and-definition",
    "href": "Loitering.html#data-description-and-definition",
    "title": "11  Loitering",
    "section": "11.3 Data Description and Definition",
    "text": "11.3 Data Description and Definition\nWhen two vessels are both observed moving very slowly in close proximity for an extended period of time it is considered an encounter. If only one vessel is observed operating in this fashion, it is considered a loitering event. Loitering events are important because they may indicate that the vessel is encountering another vessel that is not broadcasting AIS. For more information, see data training slides on encounter and loitering events HERE.\nUpdates in 2021\nIn summary, the loitering query groups data by hour by vessel. It gets the average speed of an hour block of time, and then identifies consecutive hour blocks where the average implied speed is &lt; 2 knots. Points that fall within these periods of time are aggregated and classified as loitering events. A loitering pipeline was developed to create and automate a daily updated loitering dataset. The dataset starts in 2012 and is updated up to 3 days prior to the current day (in order to aggregate multiday loitering events). It is no longer filtered on any of the following to allow the analyst the flexibility to choose the desired parameters: * vessel type * distance from shore * good segs or overlapping and short * minimum loitering time It is partition on the loitering_start_timetamp field, and clustering by ssvid.\n\n11.3.0.1 Definitions used in RFMO Transshipment Reports\nGFW, in partnership with The Pew Charitable Trusts, has produced annual reports covering the years of 2017-2019 on transshipment activity in the the five major tuna RFMOs. These reports compare reported activity to potential transshipment, fishing, and port activity detected on AIS. The definitions of encounter and loitering events used for these reports are as follows.\n\nEncounters: when two vessels are within 500 meters of each other for at least 2 hours and traveling at &lt; 2 knots, while at least 10 kilometers from a coastal anchorage (Miller et al. 2018).\nLoitering events: when a carrier vessel travelled at speeds of &lt; 2 knots for at least 4 hours, while at least 20 nautical miles from shore (see Miller et al. 2018 for original methodology, however the original minimum of 8 hours has been changed to 4 hours for the purposes of this study).",
    "crumbs": [
      "<span class='chapter-number'>11</span>  <span class='chapter-title'>Loitering</span>"
    ]
  },
  {
    "objectID": "Loitering.html#caveats-known-issues",
    "href": "Loitering.html#caveats-known-issues",
    "title": "11  Loitering",
    "section": "11.4 Caveats & Known Issues",
    "text": "11.4 Caveats & Known Issues\n\nPoint nature of events (if poor ais transmission average location can be inconsistent with full location of tracks during time period)\nMaintaining up to date identity changes of carrier and fishing vessels of interest\nLoitering table is for all vessels types with no constraints on distance from shore and duration. In addition, it has not been filtered on good segs or overlapping and short - analyst needs to add restrictions.\nDue to the definition of encounter and loitering events, loitering events can overlap with encounter events.",
    "crumbs": [
      "<span class='chapter-number'>11</span>  <span class='chapter-title'>Loitering</span>"
    ]
  },
  {
    "objectID": "Loitering.html#example-queries",
    "href": "Loitering.html#example-queries",
    "title": "11  Loitering",
    "section": "11.5 Example queries",
    "text": "11.5 Example queries\n\nloitering_carrier_basic.sql\nloitering_carrier_tracks.sql\nloitering_ex_carrier_list.sql\nloitering_overlap_encounters.sql\nanalysis-pew-ts-reports/rfmo/rfmo-yyyy: see queries folder for BQ data pull and analysis folder for data cleaning and analysis",
    "crumbs": [
      "<span class='chapter-number'>11</span>  <span class='chapter-title'>Loitering</span>"
    ]
  },
  {
    "objectID": "Loitering.html#related-content",
    "href": "Loitering.html#related-content",
    "title": "11  Loitering",
    "section": "11.6 Related Content",
    "text": "11.6 Related Content\n\nCarrier Vessel Portal (CVP)",
    "crumbs": [
      "<span class='chapter-number'>11</span>  <span class='chapter-title'>Loitering</span>"
    ]
  },
  {
    "objectID": "Gaps.html",
    "href": "Gaps.html",
    "title": "12  Gaps",
    "section": "",
    "text": "12.1 Key Tables",
    "crumbs": [
      "<span class='chapter-number'>12</span>  <span class='chapter-title'>Gaps</span>"
    ]
  },
  {
    "objectID": "Gaps.html#key-tables",
    "href": "Gaps.html#key-tables",
    "title": "12  Gaps",
    "section": "",
    "text": "world-fishing-827.pipe_production_v20201001.proto_published_events_ais_gaps: Date-partitioned table of AIS gap events of 12+ hours in duration. Includes the boolean field intentional_disabling to indicate gaps that are likely due to suspected disabling. Presently, however, only intentional disabling events (intentional_disabling = 'true') are included in this table. This is the primary table for analyses of AIS gaps.\nworld-fishing-827.pipe_production_v20201001.proto_ais_gap_events: Date-partitioned table of AIS gap events of 6+ hours in duration. This table can be used to identify gap events that are currently ongoing (is_closed = False) but must be filtered to select AIS disabling events.\n\n\n12.1.1 Secondary Tables\n\nworld-fishing-827.pipe_production_v20201001.proto_ais_off_events: Date-partitioned table of AIS positions that are followed by a 6+ hour gap in AIS signal\nworld-fishing-827.pipe_production_v20201001.proto_published_events_ais_off: Date-partitioned table of AIS off events, formatted to match the GFW events schema. Includes the boolean field intentional_disabling to indicate off events that are likely due to suspected disabling. This table can be used to identify AIS disabling events as soon as they occur.\nworld-fishing-827.pipe_production_v20201001.proto_ais_on_events: Date-partitioned table of AIS positions that are preceeded by a 6+ hour gap in AIS signal\ngfw_research.sat_reception_smoothed_one_degree_v20210722: Monthly satellite AIS reception quality (modeled) for 2017-2020. This table is used to exclude AIS gaps from areas with unreliable AIS reception.",
    "crumbs": [
      "<span class='chapter-number'>12</span>  <span class='chapter-title'>Gaps</span>"
    ]
  },
  {
    "objectID": "Gaps.html#data-description",
    "href": "Gaps.html#data-description",
    "title": "12  Gaps",
    "section": "12.2 Data Description",
    "text": "12.2 Data Description\nAIS devices were designed to continually broadcast a vessel’s position in order to serve as a collision avoidance system. Indeed, it is not uncommon to observe hundreds or thousands of AIS positions for a vessel in a single day. Thus, when a vessel has an extended gap in AIS positions it can potentially indicate illegal behavior. However, for several reasons, not all AIS signals that are broadcast are received by satellite or terrestrial AIS receivers and it is not uncommon to observe transmission gaps in a vessel’s AIS signal that are many hours long. Satellites must be overhead and terrestrial receivers require line of sight to receive AIS messages. AIS messages may overlap in time, especially in areas of high vessel density, causing signal interference and preventing messages from being received by satellites. As a result, GFW records all AIS gap events over six hours (referred to as “naive gaps”) and then uses a set of filters to identify those gaps we believe to be caused by intentional AIS disabling.\n\n12.2.1 AIS gap events (“naive gaps”)\nThe proto_ais_gap_events table contains all 6+ hour gaps in the AIS data. These gap events are created by combining all events in the two precursor tables - proto_ais_off_events and proto_ais_on_events. The proto_ais_gap_events table includes all fields in each precursor table, as well as the is_closed field to indicate whether an AIS gap is currently ongoing. The proto_ais_gap_events table is date-partitioned on the gap_start field, allowing it to be filtered for AIS gap events that started on a specific date. Gaps in this table are considered “naive gaps” because additional filtering is required to identify gaps due to intentional disabling.\n\n12.2.1.1 AIS off/on events\nAIS off events are defined as an AIS position that is followed by a six hour gap and AIS on events are AIS position preceded by a six hour gap. Each day, the proto_ais_off_events and proto_ais_on_events tables are updated with new events that occur on that date. Both tables are date partitioned and should be filtered using the _partitiontime field.\n\n\n\n12.2.2 AIS disabling events\nTo identify AIS gaps that are most likely due to intentional disabling rather than technical issues, GFW developed a classification model based on the following rules, which are explained in more detail in the Caveats and Known Issues section:\n\nThe gap event must be at least 12 hours\nThe gap must start at least 50 nautical miles from shore\nThe gap must start in an area with a satellite reception quality greater than 10 positions per day\nThe vessel must have at least 14 satellite positions in the 12 hours prior to the gap\n\nThe proto_published_events_ais_gaps and proto_published_events_ais_off tables apply these filters and include a boolean intentional_disabling field to flag likely AIS disabling events. These filters are not perfect, however, and analysts may consider slightly relaxing certain filters (e.g. distance from shore) if they want to capture potential disabling events of lower confidence.",
    "crumbs": [
      "<span class='chapter-number'>12</span>  <span class='chapter-title'>Gaps</span>"
    ]
  },
  {
    "objectID": "Gaps.html#caveats-and-known-issues",
    "href": "Gaps.html#caveats-and-known-issues",
    "title": "12  Gaps",
    "section": "12.3 Caveats and Known Issues",
    "text": "12.3 Caveats and Known Issues\n\n12.3.1 Gap events less than 50 nautical miles from shore are unreliable due to differences in satellite and terrestrial AIS\nSatellite AIS reception generally decreases closer to shore as high vessel densities lead to signal interference. At the same time, &gt;99% of GFW’s terrestrial AIS messages are less than 50 nautical miles from shore - generally the upper range of terrestrial AIS receivers - and terrestrial AIS coverage varies considerably around the world. Through a combination of these factors, AIS gaps that start within 50 nautical miles could be due to numerous technical reasons, such as:\n\nTransitioning from areas with terrestrial AIS coverage to poor satellite AIS reception\nPoor satellite reception while approaching port followed by turning off AIS upon arrival. These situations are likely responsible for many of the very long AIS gaps (e.g. several months) in the data\n\n\n\n12.3.2 Gaps shorter than 12 hours are unreliable due to satellite periodicity\nThe number of satellites over the horizon at different places on earth varies considerably hour to hour. At all latitudes under 60, the major peak is at 12 hours (one half a day) and the standard deviation of the number of satellites overhead is very high when considering time periods under 12 hours. For this reason, only gaps &gt;= 12 hours can be considered intentional disabling events. The 12 hour threshold accounts for the approximate amount of time required for the swath of an individual AIS satellite in a sun-synchronous orbit to cover the same location.",
    "crumbs": [
      "<span class='chapter-number'>12</span>  <span class='chapter-title'>Gaps</span>"
    ]
  },
  {
    "objectID": "Gaps.html#example-queries",
    "href": "Gaps.html#example-queries",
    "title": "12  Gaps",
    "section": "12.4 Example Queries",
    "text": "12.4 Example Queries\n\nais_disabling_published_events.sql: Get all (completed) likely AIS disabling events during a certain period.\nais_disabling_published_events_fishing_vessels.sql: Get all (completed) likely AIS disabling events by fishing vessels during a certain period.\nais_disabling_ongoing_events.sql: Get all likely AIS disabling events that are currently ongoing (e.g. is_closed = false). This query demonstrates how to combine naive gap events with reception quality to identify likely disabling events in a way similar to how the intentional_disabling field is added to the published_events_ais_gaps table.",
    "crumbs": [
      "<span class='chapter-number'>12</span>  <span class='chapter-title'>Gaps</span>"
    ]
  },
  {
    "objectID": "Gaps.html#links",
    "href": "Gaps.html#links",
    "title": "12  Gaps",
    "section": "12.5 Links",
    "text": "12.5 Links\n\nAIS Gaps Training Slides",
    "crumbs": [
      "<span class='chapter-number'>12</span>  <span class='chapter-title'>Gaps</span>"
    ]
  },
  {
    "objectID": "Anchorages-and-voyages.html",
    "href": "Anchorages-and-voyages.html",
    "title": "13  Anchorages, voyages and port visits",
    "section": "",
    "text": "13.1 Key Tables\nThe tables associated with ports and voyages include the following:\nOriginal data tables still available + pipe_production_vYYYYMMDD.port_visits_ - Previously used port_visits table, which can still be used now if you do not want to shift to the ‘proto_’ data. This data includes port visits with a confidence of 4 only. + pipe_production_vYYYYMMDD.voyages - Previously used voyages table, which can still be used now. Creates voyages from pipe_production_vYYYYMMDD.port_visits_.",
    "crumbs": [
      "<span class='chapter-number'>13</span>  <span class='chapter-title'>Anchorages, voyages and port visits</span>"
    ]
  },
  {
    "objectID": "Anchorages-and-voyages.html#key-tables",
    "href": "Anchorages-and-voyages.html#key-tables",
    "title": "13  Anchorages, voyages and port visits",
    "section": "",
    "text": "anchorages.named_anchorages_vYYYYMMDD - GFW database of ports/anchorages. Includes the name and location of all ports/anchorages as well as summary stats regarding anchorage at the time of creation.\ngfw_research.named_anchorages - View of most the recent version of anchorages.named_anchorages_vYYYYMMDD\npipe_production_vYYYYMMDD.proto_raw_port_events_* - Port events by seg_id. Each port activity by a vessel (e.g. port entry, port exit) recorded in a single row.\npipe_production_vYYYYMMDD.proto_port_visits - Port visits by vessel. Includes confidence value to filter by port visits of interest. All events in a port visit are included in the events array.\npipe_production_vYYYYMMDD.published_events_port_visits - Proto_port_visits table version, limited to confidence &gt;=2, that is used in API (different scheme than original proto_port_visits table). Does not include nested information on individual port events, but does have information on start, intermediate, and end anchorage within the port visit.\npipe_production_vYYYYMMDD.proto_voyages_c2 - Voyages by vessels with a port visit confidence of &gt;=2. Includes the departure time and id for the departure anchorage and the arrival time and id for the destination anchorage.\npipe_production_vYYYYMMDD.proto_voyages_c3 - Voyages by vessels with a port visit confidence of &gt;=3. Includes the departure time and id for the departure anchorage and the arrival time and id for the destination anchorage.\npipe_production_vYYYYMMDD.proto_voyages_c4 - Voyages by vessels with a port visit confidence of 4. Includes the departure time and id for the departure anchorage and the arrival time and id for the destination anchorage.\n\n\nNote Always use the published_events_x or proto_events_x (if still considered a prototype) view version of a table rather than published_events_x_v (for example, if you want to use pipe_production_v20201001.published_events_port_visits then use that view table rather than pipe_production_v20201001.published_events_port_visits_v. The _v form of a published events table only exists for internal engineering purposes. When the tables are updated daily we must calculate if any events have changed from yesterday to today and to add those into the published_events. The _v form of a table is created for this calculation, but is not to be used by anyone.",
    "crumbs": [
      "<span class='chapter-number'>13</span>  <span class='chapter-title'>Anchorages, voyages and port visits</span>"
    ]
  },
  {
    "objectID": "Anchorages-and-voyages.html#data-description",
    "href": "Anchorages-and-voyages.html#data-description",
    "title": "13  Anchorages, voyages and port visits",
    "section": "13.2 Data Description",
    "text": "13.2 Data Description\nThere are three primary forms of port activity data - events, visits, and voyages. They are described here briefly from the rawest to the most processed form.\nNote that all data points involve anchorage_points for visits and to convert to what more broadly would be considered “ports” additional aggregation will be needed, likely by grouping using gfw_research.named_anchorages, specifically the label and iso3 fields.\n\n13.2.1 Port Events:\nPort events data are stored in pipe_production_vYYYYMMDD.proto_raw_port_events_*. There are four different types of port events: PORT_ENTRY, PORT_STOP, PORT_GAP, PORT_EXIT.\nA PORT_ENTRY event occurs when a vessel gets within 3 km of an anchorage point and a PORT_EXIT event occurs when it exceeds 4 km. These points can be considered changes in state, between “AT SEA” and “IN PORT”. The use of two different limits for entry and exit, prevents a vessel from sitting at a single entry/exit boundary and repeatedly falsely entering and exiting the port.\nNested between a PORT_ENTRY and a PORT_EXIT, a vessel may have a PORT_STOP or PORT_GAP or both (these events require a state = “in port”), though these events don’t necessarily occur. A PORT_STOP_BEGIN occurs when the vessel is “in port” and the vessel’s speed drops under 0.2 knots and PORT_STOP_END occurs when the speed climbs over 0.5 (thus PORT_STOPs may a start and an end.\nA GAP_EVENT occurs when a vessel is in “in_port” and has a &gt;4 hour AIS gap. The start (GAP_EVENT_BEGIN) of the gap is recorded at 4 hours after the last message before the gap and the end (GAP_EVENT_END) is recorded at the time of the message that ends the gap.\nAs stated previously, not every PORT_ENTRY/PORT_EXIT pair will exhibit a PORT_GAP or a PORT_STOP. These events may not occur if an AIS signal is not seen in port (the AIS may be turned off such that we cannot detect a PORT_STOP or an AIS gap in port may be less than 4 hours).\n\n\n13.2.2 Port Visits:\nPort visits represents a second dataset built on the Port Events. Port Visits differ in that visits are generated based on the series of port events for a given vessel. This processed dataset is valuable because the events it contains require some evidence that the vessel actually spent time within the port. Vessels can have variable AIS transmission when entering port. For example, a vessel may have a series of PORT_ENTRY/PORT_EXIT events when transiting along a coastline, but never actually visit those ports. However, a PORT_ENTRY/PORT_EXIT event may also indicate a real port visit of interest where perhaps the vessel’s speed didn’t drop enough to trigger a PORT_STOP. The use of confidence levels in Port Visits allows a user to view all possible grouped port events, but also decipher what type of visits they want to eliminate from the analysis. In the past, all Port Visits had a confidence of 4 to eliminate possible false positives.\n\n\n13.2.3 Voyages:\nVoyages are a further processed dataset as they represent two port visits that bracket a transit or voyage. Voyages connect two Port Visits (as described above), but have no other requirements. Thus voyages can vary significantly in length as well as the time a vessel spends in either the starting or ending port. Note that you should use the voyages table that corresponds to the confidence level you have restricted port visits to. For instance, if you set port visit confidence &gt;= 2, then you should use the pipe_production_vYYYYMMDD.proto_voyages_c2 table that shows voyages where both the start and end port visit had a confidence of &gt;=2.",
    "crumbs": [
      "<span class='chapter-number'>13</span>  <span class='chapter-title'>Anchorages, voyages and port visits</span>"
    ]
  },
  {
    "objectID": "Anchorages-and-voyages.html#caveats-known-issues",
    "href": "Anchorages-and-voyages.html#caveats-known-issues",
    "title": "13  Anchorages, voyages and port visits",
    "section": "13.3 Caveats & Known Issues",
    "text": "13.3 Caveats & Known Issues\n\n13.3.1 Port Events:\n\nThese events use seg_id as the vessel identifier and may need to be mapped to SSVID for broader use.\n\n\n\n13.3.2 Port Visits:\n\nPort visits with a confidence of 1 may identify port entry/exit for vessels transiting near anchorages, without stopping, and thus are largely false positives. Therefore, it is recommended that unless you are in a very exploratory stage, you should set confidence to at least 2. *Generally confidence of 4 will capture most port visits (see notes below)\nLooking at all confidence &gt;=2port visits:\n13.4% - confidence 2\n8.6% - confidence 3\n78.0% - confidence 4\nExamining all confidence &gt;=2 ports visits by carrier/fishing vessels within the last 3 years to Abidjan, Côte d’Ivoire:\n0.02% - confidence 2\n0.05% - confidence 3\n99.3% - confidence 4\nThere are more low confidence visits when looking at all data, because ‘noisy’ vessels dominate the results, but when filtering to a tidier vessel list there is considerably less ‘noise’. However, even small percentages can provide key insight into voyage history.\nThese events use vessel_id as vessel identifier and may need to be mapped to SSVID for broader use.\n\n\n\n13.3.3 Voyages\n\nThese events use port visits and have similar caveats.\n\nThere are three tables of voyages based on a minimum confidence value for the start or end port visits of a voyage.\nThese tables require a minimum port visit confidence of 2",
    "crumbs": [
      "<span class='chapter-number'>13</span>  <span class='chapter-title'>Anchorages, voyages and port visits</span>"
    ]
  },
  {
    "objectID": "Anchorages-and-voyages.html#example-queries",
    "href": "Anchorages-and-voyages.html#example-queries",
    "title": "13  Anchorages, voyages and port visits",
    "section": "13.4 Example queries",
    "text": "13.4 Example queries\n\nproto_voyages_and_anchorages.sql\nproto_port_visits_and_events_example.sql\nproto_voyages_merge_loitering.sql",
    "crumbs": [
      "<span class='chapter-number'>13</span>  <span class='chapter-title'>Anchorages, voyages and port visits</span>"
    ]
  },
  {
    "objectID": "Anchorages-and-voyages.html#links",
    "href": "Anchorages-and-voyages.html#links",
    "title": "13  Anchorages, voyages and port visits",
    "section": "13.5 Links",
    "text": "13.5 Links\n\nTraining Slide Deck",
    "crumbs": [
      "<span class='chapter-number'>13</span>  <span class='chapter-title'>Anchorages, voyages and port visits</span>"
    ]
  },
  {
    "objectID": "SAR-object-detections.html",
    "href": "SAR-object-detections.html",
    "title": "14  SAR object detections",
    "section": "",
    "text": "14.1 1st Release (2022-06-08)\nWhat to know regarding this preliminary release:\n1 Future releases will include all offshore infrastructure\n2 Future releases will include detections from 2015/2017 onward\nLink to Map\nLink to Data",
    "crumbs": [
      "<span class='chapter-number'>14</span>  <span class='chapter-title'>SAR object detections</span>"
    ]
  },
  {
    "objectID": "SAR-object-detections.html#st-release-2022-06-08",
    "href": "SAR-object-detections.html#st-release-2022-06-08",
    "title": "14  SAR object detections",
    "section": "",
    "text": "Fixed objects like infrastructure have been removed, so only vessels 1\nDetections refer, for the most part, to fishing and non-fishing vessels\nLarge areas with significant sea ice and icebergs have been excluded (high latitudes)\nFalse positives (noise) have been filtered out with ML (this is not perfect)\nDetections have been matched to available vessels with AIS\nDetections are classified and separated as matched and unmatched\nDetections are computed with a delay of 72 hours, and tables updated daily\nDetections are available globally from January 1st 2022 onward 2\nDetection footprints (area of the ocean scanned) are also provided",
    "crumbs": [
      "<span class='chapter-number'>14</span>  <span class='chapter-title'>SAR object detections</span>"
    ]
  },
  {
    "objectID": "SAR-object-detections.html#key-concepts",
    "href": "SAR-object-detections.html#key-concepts",
    "title": "14  SAR object detections",
    "section": "14.2 Key Concepts",
    "text": "14.2 Key Concepts\n\nData point: individual detection of maritime object from a single SAR scene\nPolygon: outline of the valid area within the SAR scene used for detection\nMatched: individual detection has been paired with a specific AIS message",
    "crumbs": [
      "<span class='chapter-number'>14</span>  <span class='chapter-title'>SAR object detections</span>"
    ]
  },
  {
    "objectID": "SAR-object-detections.html#key-tables",
    "href": "SAR-object-detections.html#key-tables",
    "title": "14  SAR object detections",
    "section": "14.3 Key Tables",
    "text": "14.3 Key Tables\nBQ: world-fishing-827.proj_sentinel1_v20210924\n\ndetect_scene_raw_YYYYMMDD - id, lon, lat, time from Earth Engine detections\ndetect_foot_raw_YYYYMMDD - id, time, wkt-polygon from Earth Engine scene footprints\ndetect_scene_pred_YYYYMMDD - id, presence, length from machine learning prediction\ndetect_scene_match - id, matching-info, vessel-info from matching algorithm",
    "crumbs": [
      "<span class='chapter-number'>14</span>  <span class='chapter-title'>SAR object detections</span>"
    ]
  },
  {
    "objectID": "SAR-object-detections.html#key-fields",
    "href": "SAR-object-detections.html#key-fields",
    "title": "14  SAR object detections",
    "section": "14.4 Key Fields",
    "text": "14.4 Key Fields\n\nscene_id - ID of Sentinel-1 scene from where detections were extracted\ndetect_id - ID unique to every detection, composed as scene_id;lon;lat\ndetect_lon - longitude coordinate\ndetect_lat - latitude coordinate\ndetect_timestamp - time the image was taken\nssvid - vessel identifier if the detection matches to AIS/VMS\nscore - score cutoff used to match the detection\nconfidence - confidence cutoff used to match the detection\npresence - probability of vessel presence from a Conv Neural Net\nlength_m - length estimated with a Conv Neural Net\nfootprint_wkt - WKT multipolygon of image area used for detection\nvar1/var2 - vessel info before and after the SAR image used for matching",
    "crumbs": [
      "<span class='chapter-number'>14</span>  <span class='chapter-title'>SAR object detections</span>"
    ]
  },
  {
    "objectID": "SAR-object-detections.html#key-buckets",
    "href": "SAR-object-detections.html#key-buckets",
    "title": "14  SAR object detections",
    "section": "14.5 Key Buckets",
    "text": "14.5 Key Buckets\nGCS: Data output from Earth Engine used to produce the BQ Tables:\nDetections: gs://gfw-production-sentinel1-detection-gee/v20210924/&lt;date&gt;\nFootprints: gs://gfw-production-sentinel1-detection-footprints/v20210924/&lt;date&gt;\nThumbnails: gs://gfw-production-sentinel1-detection-thumbnails/v20210924/&lt;date&gt;",
    "crumbs": [
      "<span class='chapter-number'>14</span>  <span class='chapter-title'>SAR object detections</span>"
    ]
  },
  {
    "objectID": "SAR-object-detections.html#data-description",
    "href": "SAR-object-detections.html#data-description",
    "title": "14  SAR object detections",
    "section": "14.6 Data Description",
    "text": "14.6 Data Description\nThe data tables contain all detections from 2017-01-01 to present, updated intermittently. Imagery availability increases along data acquisition timeframe, especially from mid-2016 on. Vessels are extracted from single scenes while fixed infrastructure is extracted from 6-month median composites, constructed every month with a moving window. Detection was performed on Google Earth Engine with a Constant False Alarm Rate (CFAR) algorithm using the GRD product, Interferometric Wide Mode, VH band at 20 m resolution. Vessel classification to identify noise and regression to estimate length was performed with a Convolutional Neural Network using both the VH and VV bands.",
    "crumbs": [
      "<span class='chapter-number'>14</span>  <span class='chapter-title'>SAR object detections</span>"
    ]
  },
  {
    "objectID": "SAR-object-detections.html#caveats-known-issues",
    "href": "SAR-object-detections.html#caveats-known-issues",
    "title": "14  SAR object detections",
    "section": "14.7 Caveats & Known Issues:",
    "text": "14.7 Caveats & Known Issues:\n\nSentinel-1 does not take images over the open ocean, mostly near coastal waters\nspatial coverage is not homogeneous, e.g. European waters are imaged more frequently\ntemporal coverage is not homogenous, e.g. 2017 has less area covered than 2021\nsome missing days, e.g. in 2016, is due to no images available over the ocean\nSentinel-1B stopped operating on 2021-12-23, reducing daily images from ~400 to ~250\nsea ice and icebergs, at high latitudes, are known to introduce false positives\nimages prior 2018 are of lower quality, introducing potential false positives",
    "crumbs": [
      "<span class='chapter-number'>14</span>  <span class='chapter-title'>SAR object detections</span>"
    ]
  },
  {
    "objectID": "SAR-object-detections.html#example-queries",
    "href": "SAR-object-detections.html#example-queries",
    "title": "14  SAR object detections",
    "section": "14.8 Example Queries",
    "text": "14.8 Example Queries\n\nSAR_dark_vessel_locations.sql\nSAR_dark_vessels_eezs.sql\nSAR_matched_vessels.sql",
    "crumbs": [
      "<span class='chapter-number'>14</span>  <span class='chapter-title'>SAR object detections</span>"
    ]
  },
  {
    "objectID": "SAR-object-detections.html#additional-information",
    "href": "SAR-object-detections.html#additional-information",
    "title": "14  SAR object detections",
    "section": "14.9 Additional Information",
    "text": "14.9 Additional Information\n\nSAR Detection Slides\nTechnology Video\nDetection GEE Code\nMachine Learning Code\nMatching Algorithm Code\nMatching Algorithm paper",
    "crumbs": [
      "<span class='chapter-number'>14</span>  <span class='chapter-title'>SAR object detections</span>"
    ]
  },
  {
    "objectID": "VMS.html",
    "href": "VMS.html",
    "title": "15  VMS Data Sources",
    "section": "",
    "text": "15.1 Indonesia",
    "crumbs": [
      "<span class='chapter-number'>15</span>  <span class='chapter-title'>VMS Data Sources</span>"
    ]
  },
  {
    "objectID": "VMS.html#indonesia",
    "href": "VMS.html#indonesia",
    "title": "15  VMS Data Sources",
    "section": "",
    "text": "Data description: The Indonesian VMS data is provided by the KKP and includes data for all Indonesian flagged vessels and vessels authorized to fish in Indonesia’s EEZ.\n\nDate range: 2014-01-01 - 2020-07-03 NOTE: We will not be receiving new data in the near future\nMessage frequency: Messages are received in 5 - 60 minute intervals\nVessel classes: Anchored gillnet, Basic longline, Cast nets, Fish net/dragnet, Handline, Handline tuna, Lampara seine nets, Longline tuna, Oceanic gillnet, Pole and line, Pots, Purse seine small pelagics, Purse seine big pelagics with one boat, Purse seine group (2 boat) big pelagics, purse seine group (2 boat) small pelagics, Shrimp net, Squid hooking, Stick held lift net, Transporter\nIdentity information: transmitter_no (ssvid) and shipname\n\nBigQuery dataset: pipe_indonesia_production_v20200320\n\nVessel identity table(s): vessel_info\n\nData redacted from GFW map (if applicable):\n\nGFW lead: Wildan (@wildan; wildan@globalfishingwatch.org) / Liva (@liva; liva@globalfishingwatch.org)\nCaveats & known issues: Due to the data license agreement, the Indonesian VMS data cannot be used without the approval of the KKP as the data owner, at this time the data has been stopped and is in the process of extending the cooperation.",
    "crumbs": [
      "<span class='chapter-number'>15</span>  <span class='chapter-title'>VMS Data Sources</span>"
    ]
  },
  {
    "objectID": "VMS.html#peru",
    "href": "VMS.html#peru",
    "title": "15  VMS Data Sources",
    "section": "15.2 Peru",
    "text": "15.2 Peru\n\nData description: The Peru VMS data is provided by API\n\nDate range: 2012-01-01 - present\nMessage frequency: two ping rates, 20 minutes for artisanal vessels and 10 minutos for industrial vessels\nVessel classes: (fish_factory, tanker ) and (trawlers, purse_seines, set_gillnets, squid_jigger, set_longlines, pots_and_traps, bottom_longlines, longline_handline, drifting_longlines)\nIdentity information: Shipname and PLATE\n\nBigQuery dataset: pipe_peru_production_v20211126\n\nVessel identity table(s): vessel_info\n\nData redacted from GFW map (if applicable): vessel info (name,plate,length,gear, fishery type) is publish same in both private and public workspace\nGFW lead: Eloy (@Eloy Aroni; eloy@globalfishingwatch.org)\nCaveats & known issues: The fishing model is not working good for artisanal fleets (squid_jigger and longline_handline)",
    "crumbs": [
      "<span class='chapter-number'>15</span>  <span class='chapter-title'>VMS Data Sources</span>"
    ]
  },
  {
    "objectID": "VMS.html#chile",
    "href": "VMS.html#chile",
    "title": "15  VMS Data Sources",
    "section": "15.3 Chile",
    "text": "15.3 Chile\n\nData description: The Chile VMS data is provided by NAF messages, it is a way they had to export it from CLS Themesis Systems.\n\nDate range: 2019-02-01 - present\nMessage frequency: By law fishing, transport and aquaculture vessels every 15 min (BQ - Artisanal: 19min, Industrial: 10min, Aquaculture: 17min, Transport: 16min). Purse Seine fishing vessels every 8 min (BQ: 17min)\nVessel classes: Artisanal, Industrial, Transport, Aquaculture\nIdentity information: shipname, ssvid, callsign, vessel_id\n\nBigQuery dataset: pipe_chile_production_v20211126\n\nVessel identity table(s): vessel_info\n\nData redacted from GFW map (if applicable): Public Map only shows industrial and artisanal vessels. Private one also includes aquaculture and transport vessels. Both spaces don’t have any identifying info for each vessel, only flag, first and last transmission, and fleet.\nGFW lead: Esteban Arenas (@Esteban; esteban@globalfishingwatch.org)\nCaveats & known issues: Slight inconsistencies between BQ and public map tracks for certain vessels. Some ssvids have multiple callsigns associated. Sometimes all are the same vessel and others they are different vessels (often times with the same ship name). No unique vessel identifier found to distinguish these cases. Noted pipe_chile_production_v20211110 is available (created at a newer date, but with no 2021 data. Have asked engineering about it).",
    "crumbs": [
      "<span class='chapter-number'>15</span>  <span class='chapter-title'>VMS Data Sources</span>"
    ]
  },
  {
    "objectID": "VMS.html#panama",
    "href": "VMS.html#panama",
    "title": "15  VMS Data Sources",
    "section": "15.4 Panama",
    "text": "15.4 Panama\n\nData description: The Panama VMS data is provided by NAF messages, it is a way they had to export it from CLS Themesis Systems.\n\nDate range: 2012-01-01 - present\nMessage frequency: 1 hours\nVessel classes: drifting_longlines, set_longline, purse_seines, supply_vessel, tanker, reefer\nIdentity information: IMO and Callsign\n\nBigQuery dataset: pipe_panama_production_v20211126\n\nVessel identity table(s): vessel_info\n\n\nData redacted from GFW map (if applicable): vessel info is not displayed on the public workspace\nGFW lead: Eloy (@Eloy Aroni; eloy@globalfishingwatch.org)\nCaveats & known issues:",
    "crumbs": [
      "<span class='chapter-number'>15</span>  <span class='chapter-title'>VMS Data Sources</span>"
    ]
  },
  {
    "objectID": "VMS.html#brazil",
    "href": "VMS.html#brazil",
    "title": "15  VMS Data Sources",
    "section": "15.5 Brazil",
    "text": "15.5 Brazil\n\nData description: The Brazil VMS data is provided by two vms providers Onixsat and Ariasat companies…\n\nDate range: 2016-01-01 - present\nMessage frequency: two ping rates, 20 minutes for tuna longliners and one hour for the others\nVessel classes: Trawlers (bottom, single net, doble rig net, pair trawl), gillnet (bottom and surface), line (surface longline, bottom longline, handline), purse seine, pots and traps (lobster, octopus and red snapper)\nIdentity information:\n\nBigQuery dataset: pipe_brazil_production_v20211126\n\nVessel identity table(s): world-fishing-827.VMS_Brazil.brazil_registry_2021_09_09\nIdentity information:\n\nData redacted from GFW map (if applicable):\n\nGFW lead: Claudino (@Claudino; claudino@globalfishingwatch.org)\nCaveats & known issues: Ariasat data source has no speed and course information, need to calculate. and also ariasat has no historical information.",
    "crumbs": [
      "<span class='chapter-number'>15</span>  <span class='chapter-title'>VMS Data Sources</span>"
    ]
  },
  {
    "objectID": "VMS.html#costa-rica",
    "href": "VMS.html#costa-rica",
    "title": "15  VMS Data Sources",
    "section": "15.6 Costa Rica",
    "text": "15.6 Costa Rica\n\nData description: The Costa Rica VMS data is providade by INCOPESCA\n\nDate range: 2021-04-08 to present\nMessage frequency: 1 - 2 hours\nVessel classes: Sardineros, Avanzados, atuneros\nIdentity information: NA\n\nBigQuery dataset: pipe_costarica_production_v20211126\n\nVessel identity table(s): NA\n\nData redacted from GFW map (if applicable):\n\nGFW lead: Claudino (@Claudino; claudino@globalfishingwatch.org)\nCaveats & known issues:",
    "crumbs": [
      "<span class='chapter-number'>15</span>  <span class='chapter-title'>VMS Data Sources</span>"
    ]
  },
  {
    "objectID": "VMS.html#ecuador",
    "href": "VMS.html#ecuador",
    "title": "15  VMS Data Sources",
    "section": "15.7 Ecuador",
    "text": "15.7 Ecuador\n\nData description: The Ecuador VMS data is provided by DIRNEA\n\nDate range: 2020-08-14 to present\nMessage frequency: one hour according regulations\nVessel classes: Industrial\nIdentity information:\n\nBigQuery dataset: pipe_ecuador_production_v20211126\n\nVessel identity table(s): world-fishing-827.VMS_Ecuador.manual_registry_list_q32020 static information from 2020\n\nData redacted from GFW map (if applicable):\n\nGFW lead: Claudino (@Claudino; claudino@globalfishingwatch.org)\nCaveats & known issues:\n\ndata show some positions with wrong timestamp\nafter march 2021 part of wrong timestamps gone and start appears gaps\nthere are ~4000 artisanal vessels and only 400 regularly broadcasting. Due low ping rates artisanal are not show in map 3.0\nvessel categories are created based on matricula pattern, there are 14 different categories including non-fishing vessels",
    "crumbs": [
      "<span class='chapter-number'>15</span>  <span class='chapter-title'>VMS Data Sources</span>"
    ]
  },
  {
    "objectID": "VMS.html#belize",
    "href": "VMS.html#belize",
    "title": "15  VMS Data Sources",
    "section": "15.8 Belize",
    "text": "15.8 Belize\n\nData description: The Belize VMS data is provided by PoleStar\n\nDate range: 2021-08-01 to present\nMessage frequency: TBD\nVessel classes: TBD\nIdentity information:\n\nBigQuery dataset: pipe_belize_production_v20220304\n\nVessel identity table(s): TBD\n\nData redacted from GFW map (if applicable):\n\nGFW lead: Claudino (@Claudino; claudino@globalfishingwatch.org)\nCaveats & known issues: TBD",
    "crumbs": [
      "<span class='chapter-number'>15</span>  <span class='chapter-title'>VMS Data Sources</span>"
    ]
  },
  {
    "objectID": "VMS.html#mexico---not-stable.-contact-engineer-team-before-use.",
    "href": "VMS.html#mexico---not-stable.-contact-engineer-team-before-use.",
    "title": "15  VMS Data Sources",
    "section": "15.9 Mexico - NOT STABLE. CONTACT ENGINEER TEAM BEFORE USE.",
    "text": "15.9 Mexico - NOT STABLE. CONTACT ENGINEER TEAM BEFORE USE.\n\nData description: The Mexico VMS data provider is Orbcomm and Conapesca monitors data and alerts through a system called SISMEP. We currently don’t have an agreement signed and don’t receive data directly from Conapesca. However, we have two sets of data. One was requested by Oceana early 2021 and made public as a csv. The other is from downloading csv files directly from the Conapesca website. In march of 2021 Conapesca decided to publish and make all VMS data public through their open data portal.\n\nDate range: Oceana data: 2013-01-01 - 2020-12-31 Conapesca data: 2011-01-01 - 2021-02-28\nMessage frequency: By law pings should be every hour. BQ for Oceana data: 107min. BQ for Conapesca data: 76min\nVessel classes: None given. But primarily industrial fishing vessels. VMS required for vessels with &gt; 80HP and length &gt; 10.5 meters\nIdentity information: RNP/ssvid, NOMBRE/shipname,vessel_id\n\nBigQuery dataset: Oceana: pipe_mexico_oceana_production_v20210811 Conapesca: VMS_Mexico.raw_mexican_open_data_partitioned\n\nVessel identity table(s): None yet. Messages scored or original data sets could be used\n\nData redacted from GFW map (if applicable): Not currently on the public map. Oceana data is displayed in the private workspace\nGFW lead: Esteban Arenas (@Esteban; esteban@globalfishingwatch.org)\nCaveats & known issues: Previously identified and currently testing for speed discrepancies/unknown units. Conapesca data has several issues with timestamps being incomplete or in inconsistent format. However, it has a lot more positions than data given to Oceana. BQ tables and private workspace based on Oceana data, shows significant inaccuracies in non-fishing activity being scored as fishing",
    "crumbs": [
      "<span class='chapter-number'>15</span>  <span class='chapter-title'>VMS Data Sources</span>"
    ]
  },
  {
    "objectID": "VMS.html#namibia-not-stable.-contact-engineer-team-before-use.",
    "href": "VMS.html#namibia-not-stable.-contact-engineer-team-before-use.",
    "title": "15  VMS Data Sources",
    "section": "15.10 Namibia NOT STABLE. CONTACT ENGINEER TEAM BEFORE USE.",
    "text": "15.10 Namibia NOT STABLE. CONTACT ENGINEER TEAM BEFORE USE.\n\nData description: The Namibian data is provided by Google Drive and it is not a good system because they do a lot of manual work on their side.\n\nDate range: 2014-01-01 - present\nMessage frequency:\nVessel classes:\nIdentity information:\nVessel identity table(s): vessel_info\n\nData redacted from GFW map (if applicable):\n\nCaveats & known issues:",
    "crumbs": [
      "<span class='chapter-number'>15</span>  <span class='chapter-title'>VMS Data Sources</span>"
    ]
  },
  {
    "objectID": "Spatial-Regions-Sources-and-Methodology.html",
    "href": "Spatial-Regions-Sources-and-Methodology.html",
    "title": "16  Spatial regions sources and methodology",
    "section": "",
    "text": "16.1 Data Description\nRegional source layers are retrieved from publicly available sources for key boundaries and areas of interest in the world’s oceans. These layers are converted to geojson and loaded into bigquery here: world-fishing-827.pipe_regions_layers\nLayers are also processed to optimize for point in polygon testing using S2 cells in bigquery. The optimized tables are in world-fishing-827.pipe_regions_layers in tables with suffix _S2_10 which indicates it is optimized for S2 cells at level 10 (roughly 7-10km grid size).\nDetailed information on all layers is found and updated here: https://globalfishingwatch.atlassian.net/wiki/spaces/TD/pages/459014145/Regions\nA simplified list of sources is provided below:",
    "crumbs": [
      "<span class='chapter-number'>16</span>  <span class='chapter-title'>Spatial regions sources and methodology</span>"
    ]
  },
  {
    "objectID": "Spatial-Regions-Sources-and-Methodology.html#data-description",
    "href": "Spatial-Regions-Sources-and-Methodology.html#data-description",
    "title": "16  Spatial regions sources and methodology",
    "section": "",
    "text": "Region Layer\nDescription\nSource\nDetailed Attributes\nNotes\n\n\n\n\nEEZ\nMaritime exclusive economic zones (200 nautical mile boundary) for all coastal nations.\nMarine Regions - Marine and land zones: the union of world country boundaries and EEZ’s version 3 2020-03-17.\nEEZs\nLayer adjusted for processing, see detailed page\n\n\nMPAs\nMarine protected areas from The World Database on Protected Areas (WDPA) via protectedplanet.net\nProtected Planet\nMPAs\nno take and partial MPAs are provided as separate layers in BQ\n\n\nRFMOs\nRegional Fisheries Management Organizations (RFMOs)\nFAO GeoNetwork\nRFMOs\nSeveral RFMOs taken from unique RFMO sources outside of GeoNetwork, see detailed page\n\n\n12 NM\n12 Nautical Miles Boundary Line\nMarine Regions\n12 NM\nNA\n\n\nFAO Areas\nFAO Areas and Major Areas\nFAO\nFAO Areas\nThe no_coastline version provided by FAO was applied\n\n\nHigh Seas\nHigh Seas (outside of EEZs)\nMarine Regions\nHigh Seas\nNote High Seas Pockets are developed from this layer, see detailed notes here High Seas Pockets",
    "crumbs": [
      "<span class='chapter-number'>16</span>  <span class='chapter-title'>Spatial regions sources and methodology</span>"
    ]
  },
  {
    "objectID": "Areas-EEZ-Boundaries.html",
    "href": "Areas-EEZ-Boundaries.html",
    "title": "17  EEZ Boundaries",
    "section": "",
    "text": "Owner: Hannah Linder Last edited time: 1 de marzo de 2024 13:30 Created time: 1 de marzo de 2024 13:13\n\n17.0.1 Key Attributes\n\n\n\nLayer name\neez\n\n\n\n\nUnique id field\nMRGID_EEZ\n\n\nShort description\nMaritime exclusive economic zones (200 nautical mile boundary) for all coastal nations.\n\n\nSource\nhttps://www.marineregions.org/downloads.php\n\n\nCitation\nFlanders Marine Institute (2019). Maritime Boundaries Geodatabase: Maritime Boundaries and Exclusive Economic Zones (200NM), version 11. Available online at https://www.marineregions.org/. https://doi.org/10.14284/386\n\n\nAttribution\nCopyright Flanders Marine Institute (2020) - marineregions.org.\n\n\nLast updated\n2020-03-17\n\n\nLicense\nCC-BY\n\n\n\n\n\n17.0.2 Description\nWe use EEZ boundaries that are freely available from Marine Regions\nNote that we use the product Marine and land zones: the union of world country boundaries and EEZ’s version 3 2020-03-17. This dataset combines the boundaries of the world countries and the Exclusive Economic Zones of the world. It was created by combining the ESRI world country database and the EEZ V11 dataset. [Known Issues]\n\n\n17.0.3 Modifications to Original\nThe original file from Marine Regions contains all countries, even those that have no coast, and therefore no EEZ. It also contains the entire area of each country. This creates some problems for us because EEZ-based activity picks up in-shore activity in rivers, and this is confusing when we expect things to be limited to just the EEZ marine area. So what we do is clip the final polygons in the layer to include only a 0.1 degree (about 10km) buffer in from the coastline for each country. Countries with no coastline are filtered out. We include the buffer because if we only include the EEZ polygon, the lack of precision at the coastline causes some activity that is in the marine area to be excluded.\n\nThe buffering is done using a land mask from the Natural Earth 10m Land data set. The file used for this is in GCS and the script that does the buffering, clipping and filtering is in github https://github.com/GlobalFishingWatch/pipe-regions/blob/master/layer-preprocessing/eez-land-buffered.sh\n\n\n17.0.4 Data access\nGCS\n\nOriginal: gs://pipe-regions-layers-us-central1/eez/original/EEZ_land_union_v3_202003.zip\nLand Mask: gs://pipe-regions-layers-us-central1/eez/original/ne_10m_land.zip\nNormalized, buffered and clipped: gs://pipe-regions-layers-us-central1/eez/EEZ_land_union_v3_202003_buffered.shp.zip\n\nBigquery\n\nNormalized: world-fishing-827.pipe_regions_layers.EEZ_land_union_v3_202003_buffered\nProcessed for S2 lookup:: world-fishing-827.pipe_regions_layers.EEZ_land_union_v3_202003_buffered_marine_s2_10",
    "crumbs": [
      "<span class='chapter-number'>17</span>  <span class='chapter-title'>EEZ Boundaries</span>"
    ]
  },
  {
    "objectID": "Areas-12-NM-Boundary.html",
    "href": "Areas-12-NM-Boundary.html",
    "title": "18  12 NM Boundary",
    "section": "",
    "text": "Owner: Hannah Linder Last edited time: 1 de marzo de 2024 13:38 Created time: 1 de marzo de 2024 13:02\nWorld 12 Nautical Miles Zone (Territorial Seas)\n\n18.0.1 Key Attributes\n\n\n\nLayer name\neez12nm\n\n\n\n\nUnique id field\nMRGID_EEZ\n\n\nShort description\nWorld 12 Nautical Miles Zone (Territorial Seas) v3\n\n\nSource\nhttps://www.marineregions.org/downloads.php\n\n\nCitation\nFlanders Marine Institute (2019). Maritime Boundaries Geodatabase: Territorial Seas (12NM), version 3. Available online at https://www.marineregions.org/. https://doi.org/10.14284/387\n\n\nAttribution\nCopyright Flanders Marine Institute - marineregions.org\n\n\nLast updated\n2019-11-18\n\n\nLicense\nCC-BY\n\n\n\n\n\n18.0.2 Description\n12 Nautical Mile boundary that is the limit of a nation’s territorial waters. From Marine Regions\n[Known Issues]\n\n\n18.0.3 Data access\nGCS\n\nOriginal: gs://pipe-regions-layers-us-central1/eez_12nm/original/World_12NM_v3_20191118.zip\nNormalized: gs://pipe-regions-layers-us-central1/eez_12nm/eez_12nm_v3.shp.zip\n\nBigquery\n\nNormalized: world-fishing-827.pipe_regions_layers.eez_12nm_v3\nProcessed for S2 lookup:: world-fishing-827.pipe_regions_layers.eez_12nm_v3_s2_10",
    "crumbs": [
      "<span class='chapter-number'>18</span>  <span class='chapter-title'>12 NM Boundary</span>"
    ]
  },
  {
    "objectID": "Areas-RFMOs.html",
    "href": "Areas-RFMOs.html",
    "title": "19  RFMOs",
    "section": "",
    "text": "Owner: Hannah Linder Last edited time: 11 de febrero de 2025 12:35 Created time: 1 de marzo de 2024 13:14\nRegional Fisheries Management Organizations (RFMOs)\n\n19.0.1 Key Attributes\n\n\n\nLayer name\nrfmo\n\n\n\n\nUnique ID Field\nRFB\n\n\nShort description\nRegional Fisheries Management Organizations (RFMOs)\n\n\nSource\nhttps://geonetwork.d4science.org/geonetwork/srv/en/main.home\n\n\n\nFor individual RFMOs, use this URL template https://geonetwork.d4science.org/geonetwork/srv/en/metadata.show?uuid=fao-rfb-map-[rfmo-id] | | Citation | © FAO, 2019. FAO Regional Fishery Bodies. [RFMO Name]. In: FAO Fisheries and Aquaculture Department (FI) [online]. Rome. Updated 2019-02-21 [Cited ] http://www.fao.org/geonetwork/srv/eng/main.home?uuid=fao-rfb-map-iattc | | Attribution | © FAO, 2019. FAO Regional Fishery Bodies. | | Last updated | 2019-02-21 | | License | Public |\n\n\n19.0.2 Description\n42 RFMOs are included in one table. See below for a complete list. All RFMOS stem from the FAO geonetwork. Some RFMO shapefiles go to land, and there is a possibility of coastline issues. However, not quite sure there is an easy solution for RFMOs (since it is region-specific) so currently (Summer 2022) have not conducted any adjustments.\nThere are several RFMOs where we do not use the shapefile published in geonetwork. These are\n\nNPFC\nCCSBT\nICCAT\n\nSee the linked pages for more on these. For the rest, see below.\n\n\n19.0.3 Data access\nGCS\n\nOriginal: gs://pipe-regions-layers/fao_rfb_rfmos/original/FAO_RFB_*.zip\nNormalized and merged: gs://pipe-regions-layers/fao_rfb_rfmos/fao_rfb_rfmos.shp.zip\n\nBigquery\n\nNormalized: world-fishing-827.pipe_regions_layers.fao_rfb_rfmos\nProcessed for S2 lookup:: world-fishing-827.pipe_regions_layers.fao_rfb_rfmos_s2_10\n\n\n\n19.0.4 Updating\nThere is a script in pipe-regions that will download original shapefiles, merge them and store in gcs. To use this, see the section on FAO RFMOs in https://github.com/GlobalFishingWatch/pipe-regions/blob/master/USAGE.md\n\n19.0.4.1 List of RFMOs\n\n\n\nACAP\nAgreement on the Conservation of Albatrosses and Petrels\n\n\n\n\nAPFIC\nAsia Pacific Fisheries Commission\n\n\nBOBP-IGO\nBay of Bengal Programme\n\n\nCACFISH\nCentral Asia and Caucasus Fisheries and Aquaculture Commission\n\n\nCCAMLR\nCommission for the Conservation of Antarctic Marine Living Resources\n\n\nCCBSP\nConvention on the Conservation and Management of Pollock Resources in the Central Bering Sea\n\n\nCCSBT\nCommission for the Conservation of Southern Bluefin Tuna\n\n\nCOREP\nCommission Régionale des Pêches du Golfe de Guinee\n\n\nCPPS\nComisión Permanente del Pacifico Sur\n\n\nCRFM\nCaribbean Regional Fisheries Mechanism\n\n\nCTMFM\nJoint Technical Commission of the Maritime Front\n\n\nEIFAAC\nEuropean Inland Fisheries and Aquaculture Advisory Commission\n\n\nFCWC\nFishery Committee of the West Central Gulf of Guinea\n\n\nFFA\nForum Fisheries Agency\n\n\nGFCM\nGeneral Fisheries Commission for the Mediterranean\n\n\nIATTC\nInter-American Tropical Tuna Commission\n\n\nICCAT\nInternational Commission for the Conservation of Atlantic Tunas\n\n\nICES\nInternational Council for the Exploration of the Sea\n\n\nIOTC\nIndian Ocean Tuna Commission\n\n\nIPHC\nInternational Pacific Halibut Commission\n\n\nIWC\nInternational Whaling Commission\n\n\nLTA\nLake Tanganyika Authority\n\n\nLVFO\nLake Victoria Fisheries Organization\n\n\nMRC\nMekong River Commission\n\n\nNACA\nNetwork of Aquaculture Centers in Asia-Pacific\n\n\nNAFO\nNorthwest Atlantic Fisheries Organization\n\n\nNAMMCO\nNorth Atlantic Marine Mammal Commission\n\n\nNASCO\nNorth Atlantic Salmon Conservation Organization\n\n\nNEAFC\nNorth-East Atlantic Fisheries Commission\n\n\nNPAFC\nNorth Pacific Anadromous Fish Commission\n\n\nNPFC\nNorth Pacific Fisheries Commission\n\n\nOSPESCA\nCentral America Fisheries and Aquaculture Organization\n\n\nPERSGA\nRed Sea and Gulf of Aden Environment Programme\n\n\nPICES\nNorth Pacific Marine Science Organization\n\n\nRECOFI\nRegional Commission for Fisheries\n\n\nSEAFDEC\nSoutheast Asian Fisheries Development Center\n\n\nSIOFA\nSouth Indian Ocean Fisheries Agreement\n\n\nSPC\nSecretariat of the Pacific Community\n\n\nSPRFMO\nSouth Pacific Regional Fisheries Management Organisation\n\n\nSRFC\nSubregional Fisheries Commission\n\n\nSWIOFC\nSouthwest Indian Ocean Fisheries Commission\n\n\nWCPFC\nWestern and Central Pacific Fisheries Commission\n\n\n\nNPFC\nIATTC\nICCAT\nSPRFMO\nCCSBT\nIOTC",
    "crumbs": [
      "<span class='chapter-number'>19</span>  <span class='chapter-title'>RFMOs</span>"
    ]
  },
  {
    "objectID": "Areas-FAO-Areas.html",
    "href": "Areas-FAO-Areas.html",
    "title": "20  FAO Areas",
    "section": "",
    "text": "Owner: Hannah Linder Last edited time: 1 de marzo de 2024 13:39 Created time: 1 de marzo de 2024 13:08\nFAO Statistical Areas\n\n20.0.1 Key Attributes\n\n\n\nLayer names\nfao, major_fao\n\n\n\n\nUnique id field\nID\n\n\nShort description\nFAO Statistical Areas\n\n\nSource\nhttps://data.apps.fao.org/map/catalog/srv/eng/catalog.search#/metadata/ac02a460-da52-11dc-9d70-0017f293bd28\n\n\nCitation\n(c) FAO, 2020. FAO Statistical Areas for Fishery Purposes. In: FAO Fisheries and Aquaculture Department [online]. Rome. [Cited ] http://www.fao.org/fishery/area/search/en\n\n\nAttribution\n(c) FAO, 2020\n\n\nLast updated\nManual update 2022-01-19, original source revision date 2014-04-17\n\n\nLicense\nPublic\n\n\n\n\n\n20.0.2 Description\n\nFAO Major Fishing Areas for Statistical Purposes are arbitrary areas, the boundaries of which were determined in consultation with international fishery agencies on various considerations, including (i) the boundary of natural regions and the natural divisions of oceans and seas; (ii) the boundaries of adjacent statistical fisheries bodies already established in inter-governmental conventions and treaties; (iii) existing national practices; (iv) national boundaries; (v) the longitude and latitude grid system; (vi) the distribution of the aquatic fauna; and (vii) the distribution of the resources and the environmental conditions within an area.\nNB: These two layers were manually tweaked by Pete. See PIPELINE-558 - Update FAO regions in the next pipeline run Done\nOriginal Source: https://data.apps.fao.org/map/catalog/srv/eng/catalog.search#/metadata/ac02a460-da52-11dc-9d70-0017f293bd28\nNormalized shapefile produced from original (manually edited) geojson like this:\nogr2ogr -f “ESRI Shapefile” -lco ENCODING=UTF-8\n\nFAO_MAJOR_AREAS_NOCOASTLINE.shp.zip\n\nFAO_MAJOR_AREAS_NOCOASTLINE.geojson\n\n\n20.0.3 FAO Areas\nThis is the full data set\nLayer Name: fao\nOriginal: gs://pipe-regions-layers-us-central1/fao_areas/original/FAO_AREAS_NOCOASTLINE.geojson\nNormalized: gs://pipe-regions-layers-us-central1/fao_areas/FAO_AREAS_NOCOASTLINE.shp.zip\nBigquery Normalized:\nBigquery S2 Optimized:\n\n\n20.0.4 FAO Major Areas\nThis is just the 19 major areas. All the other areas are subdivisions of these 19\nLayer Name: major_fao\nOriginal: gs://pipe-regions-layers-us-central1/fao_major_areas/original/FAO_MAJOR_AREAS_NOCOASTLINE.geojson\nNormalized: gs://pipe-regions-layers-us-central1/fao_major_areas/FAO_MAJOR_AREAS_NOCOASTLINE.shp.zip\nBigquery Normalized:\nBigquery S2 Optimized:",
    "crumbs": [
      "<span class='chapter-number'>20</span>  <span class='chapter-title'>FAO Areas</span>"
    ]
  },
  {
    "objectID": "Areas-High-Seas-Pockets.html",
    "href": "Areas-High-Seas-Pockets.html",
    "title": "21  High Seas Pockets",
    "section": "",
    "text": "Owner: Hannah Linder Last edited time: 11 de febrero de 2025 19:16 Created time: 1 de marzo de 2024 13:14\nWorld High Seas (Areas outside EEZs), Including only the small pockets of isolated, non-contiguous high seas area\n\n21.0.1 Key Attributes\n\n\n\nLayer name\nhsp\n\n\n\n\nUnique id field\nname\n\n\nShort description\nHigh Seas Pockets\n\n\nSource\nExceprted from https://www.marineregions.org/downloads.php\n\n\nCitation\nFlanders Marine Institute (2020). Maritime Boundaries Geodatabase: High Seas, version 1. Available online at https://www.marineregions.org/ https://doi.org/10.14284/418.\n\n\nAttribution\nCopyright Flanders Marine Institute - http://marineregions.org\n\n\nLast updated\n2020-08-26 (marine regions), 2022-12-16 (GFW)\n\n\nLicense\nCC-BY\n\n\n\n\n\n21.0.2 Description\nThe regions of the high seas excluding the major contiguous area of high seas and the arctic ocean.\n\nThis data set is derived from the Marine Regions high-seas data set by extracting just the polygons corresponding to the 15 high seas pockets that GFW has labeled from HSP-1 to HSP-15. Note that HSP-15 is split across the anti-meridian, so it appears in two pieces that have the same label. Naming of the pockets is consistent with the naming that WCPFC uses to identify HSP 1-4. The rest of the pockets are enumerated in arbitrary order by GFW.\nThe script used to create the layer is here: https://github.com/GlobalFishingWatch/pipe-regions/blob/PIPELINE-1049/layer-preprocessing/high-seas-pockets.sh\n\n\n21.0.3 Data access\nGCS\n\nOriginal: gs://pipe-regions-layers-us-central1/high_seas/original/World_High_Seas_v1_20200826.zip\nGFW Labels: gs://pipe-regions-layers-us-central1/hsp/original/hsp_centroids.shp.zip\nNormalized: gs://pipe-regions-layers-us-central1/hsp/high_seas_pockets_v20221216.shp.zip\n\nBigquery\n\nNormalized: world-fishing-827.pipe_regions_layers.high_seas_pockets_v20221216\nProcessed for S2 lookup:: world-fishing-827.pipe_regions_layers.high_seas_pockets_v20221216_s2_10",
    "crumbs": [
      "<span class='chapter-number'>21</span>  <span class='chapter-title'>High Seas Pockets</span>"
    ]
  },
  {
    "objectID": "Areas-High-Seas.html",
    "href": "Areas-High-Seas.html",
    "title": "22  High Seas",
    "section": "",
    "text": "Owner: Hannah Linder Last edited time: 1 de marzo de 2024 13:39 Created time: 1 de marzo de 2024 13:09\nWorld High Seas (Areas outside EEZs)\n\n22.0.1 Key Attributes\n\n\n\nLayer name\nhigh_seas\n\n\n\n\nUnique id field\nmrgid\n\n\nShort description\nWorld High Seas v1\n\n\nSource\nhttps://www.marineregions.org/downloads.php\n\n\nCitation\nFlanders Marine Institute (2020). Maritime Boundaries Geodatabase: High Seas, version 1. Available online at https://www.marineregions.org/ https://doi.org/10.14284/418.\n\n\nAttribution\nCopyright Flanders Marine Institute - http://marineregions.org\n\n\nLast updated\n2020-08-26\n\n\nLicense\nCC-BY\n\n\n\n\n\n22.0.2 Description\nThe area of the seas that is not included in the exclusive economic zone, in the territorial sea or in the internal waters of a State, or in the archipelagic waters of an archipelagic State.\nFrom Marine Regions\n\n\n\n22.0.3 Data access\nGCS\n\nOriginal: gs://pipe-regions-layers-us-central1/high_seas/original/World_High_Seas_v1_20200826.zip\nNormalized: gs://pipe-regions-layers-us-central1/high_seas/High_Seas_v1.shp.zip\n\nBigquery\n\nNormalized: world-fishing-827.pipe_regions_layers.High_Seas_v1\nProcessed for S2 lookup:: world-fishing-827.pipe_regions_layers.High_Seas_v1_s2_10",
    "crumbs": [
      "<span class='chapter-number'>22</span>  <span class='chapter-title'>High Seas</span>"
    ]
  },
  {
    "objectID": "Areas-Protected-Seas.html",
    "href": "Areas-Protected-Seas.html",
    "title": "23  Protected Seas",
    "section": "",
    "text": "Owner: Hannah Linder Last edited time: 1 de marzo de 2024 13:38 Created time: 1 de marzo de 2024 13:07\nProtected Seas\n\n23.0.1 Key Attributes\n\n\n\nLayer name\nprotectedseas\n\n\n\n\nUnique id field\nsite_id\n\n\nShort description\nProtected Seas\n\n\nSource\nhttps://map.navigatormap.org/resources/downloads/NavigatorGlobal.2023.5.1.json\n\n\nCitation\n\n\n\nAttribution\n\n\n\nLast updated\n2023-05-03\n\n\nLicense\n\n\n\n\n\n\n23.0.2 Description\n\nContains the regions with category IUCN MPAs\n\n\n23.0.3 Data access\nGCS\n\nOriginal: gs://pipe-regions-layers-us-central1/protectedseas/original/NavigatorGlobal_May2023.json\nShapefile: gs://pipe-regions-layers-us-central1/protectedseas/NavigatorGlobal_May2023.shp.zip`\n\nBigquery\n\nNormalized: world-fishing-827.pipe_regions_layers.NavigatorGlobal_May2023\nProcessed for S2 lookup:: world-fishing-827.pipe_regions_layers.NavigatorGlobal_May2023_S2_10",
    "crumbs": [
      "<span class='chapter-number'>23</span>  <span class='chapter-title'>Protected Seas</span>"
    ]
  },
  {
    "objectID": "Areas-WDPA-Marine-MPAs.html",
    "href": "Areas-WDPA-Marine-MPAs.html",
    "title": "24  WDPA Marine MPAs",
    "section": "",
    "text": "Owner: Hannah Linder Last edited time: 21 de mayo de 2024 20:57 Created time: 1 de marzo de 2024 13:14\n\n24.0.1 Key Attributes\n\n\n\nLayer name\nmpa, mpa_no_take, mpa_no_take_partial (see below for filters used)\n\n\n\n\nUnique id field\nWDPA_PID\n\n\nShort description\nMarine protected areas from The World Database on Protected Areas (WDPA) via protectedplanet.net\n\n\nSource\nhttps://www.protectedplanet.net/en/search-areas?filters[db_type][]=wdpa&filters[is_type][]=marine\n\n\nCitation\nUNEP-WCMC and IUCN (2022), Protected Planet: The World Database on Protected Areas (WDPA) and World Database on Other Effective Area-based Conservation Measures (WD-OECM) [Online], August 2022, Cambridge, UK: UNEP-WCMC and IUCN. Available at: www.protectedplanet.net.\n\n\nAttribution\nYou must ensure that one of the following citations is always clearly reproduced in any publication or analysis involving the Protected Planet Materials in any derived form or format: Use this citation for any downloads of Protected Planet Materials from ProtectedPlanet.net:\n\n\nUNEP-WCMC and IUCN (year), Protected Planet: The World Database on Protected Areas (WDPA) [On-line], [insert month/year of the version downloaded], Cambridge, UK: UNEP-WCMC and IUCN. Available at: www.protectedplanet.net.\n\n\n\nLast updated\n2020-11-01 (Updated monthly)\n\n\nLicense\nNon-commecrial use https://www.protectedplanet.net/en/legal\n\n\n\n\n\n24.0.2 Description\nThe World Database on Protected Areas (WDPA) is the most comprehensive global database of marine and terrestrial protected areas. It is a joint project between UN Environment Programme and the International Union for Conservation of Nature (IUCN), and is managed by UN Environment Programme World Conservation Monitoring Centre (UNEP-WCMC), in collaboration with governments, non-governmental organizations, academia and industry. The WDPA is updated on a monthly basis and can be downloaded using the button in the top right of this page.\nWe use just the marine protected areas, which is a subset of the full WDPA.\n\nFormatting is different than the previous MPA source we used (previous to 2022 pipeline updates). Many more columns. One column that is ‘NO_TAKE’ with different categories (‘All’, ‘Part’, ‘Not Reported’, ‘Not Applicable’, ‘None’). Should make sure to capture this information and as many of the other fields as we can.\nThe source is either .csv, or .shp. Due to the size of the data the .shp folder breaks it down into three layers that need to be merged to get full resolution. See ‘Shapefile_splitting_README.txt’ in folder. There is a utility in pipe_regions that will download and merge the multiple shapefiles.\n\n\n\n24.0.3 No-Take MPAs\nin addition to the full set of MPAs, there are two filtered subsets published as separate layers.\n\n\n\nLayer ID\nFilter\n\n\n\n\nmpa_no_take\nNO_TK_AREA &gt; 0 AND NO_TAKE = ‘All’\n\n\nmpa_no_take_partial\nNO_TK_AREA &gt; 0\n\n\n\n\n\n24.0.4 Data access\nGCS\n\nOriginal: gs://pipe-regions-layers-us-central1/mpa/original/WDPA_WDOECM_Aug2022_Public_marine_shp.zip\nNormalized: gs://pipe-regions-layers-us-central1/wdpa/WDPA_WDOECM_Aug2022_Public_marine_shp.shp.zip\nNo Take: gs://pipe-regions-layers-us-central1/wdpa/NO_TAKE_WDPA_WDOECM_Aug2022_Public_marine_shp.shp.zip\nNo Take Partial: gs://pipe-regions-layers-us-central1/wdpa/NO_TAKE_PARTIAL_WDPA_WDOECM_Aug2022_Public_marine_shp.shp.zip\n\nBigquery\n\nNormalized:\n\nworld-fishing-827.pipe_regions_layers.WDPA_WDOECM_Nov2022_Public_marine_shp\nworld-fishing-827.pipe_regions_layers.NO_TAKE_PARTIAL_WDPA_WDOECM_Nov2022_Public_marine_shp\nworld-fishing-827.pipe_regions_layers.NO_TAKE_WDPA_WDOECM_Nov2022_Public_marine_shp\n\nProcessed for S2 lookup::\n\nworld-fishing-827.pipe_regions_layers.WDPA_WDOECM_Nov2022_Public_marine_shp_s2_10\nworld-fishing-827.pipe_regions_layers.NO_TAKE_PARTIAL_WDPA_WDOECM_Nov2022_Public_marine_shp_s2_10\nworld-fishing-827.pipe_regions_layers.NO_TAKE_WDPA_WDOECM_Nov2022_Public_marine_shp_s2_10",
    "crumbs": [
      "<span class='chapter-number'>24</span>  <span class='chapter-title'>WDPA Marine MPAs</span>"
    ]
  },
  {
    "objectID": "Areas-HOW-TO---Do-point-in-polygon-test-in-BigQuery.html",
    "href": "Areas-HOW-TO---Do-point-in-polygon-test-in-BigQuery.html",
    "title": "25  HOW TO - Do point-in-polygon test in BigQuery (BQ) using regions",
    "section": "",
    "text": "Owner: Hannah Linder Last edited time: 23 de mayo de 2024 2:14 Created time: 1 de marzo de 2024 13:10\n[WORK IN PROGRESS]\nThis guide describes how to use the regions tables that are present in bigquery to do ad-hoc analysis to determine which of a set of lat/lon values are inside the set of regions.\n\n25.0.1 Architecture\nWe use sets of polygons in the data pipeline to determine when events (fishing events, encounter events, etc) are located inside pre-determined polygons, such as MPAs, EEZs and the like. These sets of polygons are called “regions” and all the code that is used to create and use them is in the pipe-regions github repo.\nEach layer is loaded into bigquery in a separate layer. The production dataset is world-fishing-827.pipe_regions_layers. For example, the WDPA layer containing all the marine MPAs is in world-fishing-827.pipe_regions_layers.WDPA_Mar_2022_Marine. All the associated fields from the original source are present in that table, so if you want to filter to a subset you could do something like WHERE status=\"Proposed\".\nBTW documentation for all these layers is right here in notion.\n\n\n25.0.2 Adding Regions\nLet’s say you have a big query table full of records with positions (lat, lon) and for each position record you want to get all of the region polygons that contain the position and put that in a new big query table\nThe following query will give you a new table with all the same rows as the source_table, with one additional field called regions which is a JSON string with the ids of the containing regions.\nCREATE TEMP FUNCTION s2_level() AS (10);\nWITH\npositions as (\n  SELECT\n    *,\n  FROM `{ source_table }`\n),\nregions as (\n  SELECT\n    *,\n  FROM `{ regions_table }`\n),\ngridded_positions as (\n  SELECT\n    *,\n    S2_CELLIDFROMPOINT(geo, s2_level()) as s2_cell\n  FROM positions\n),\ngridded_regions as (\n  SELECT\n    * except(s2_cells),\n  FROM regions\n  CROSS JOIN UNNEST (s2_cells) as s2_cell\n),\ncreate_position_region_matches as (\n  SELECT\n    msgid, id, layer,\n  FROM gridded_positions p\n  JOIN gridded_regions r\n  ON p.s2_cell = r.s2_cell\n  WHERE ST_INTERSECTS(p.geo, r.geo)\n),\nposition_by_layer_by_id as (\n  SELECT\n    msgid, layer, id\n  FROM create_position_region_matches\n  GROUP BY msgid, layer, id\n),\nposition_by_layer as (\n  SELECT\n    msgid, \n    CONCAT('\"', layer, '\":' ,TO_JSON_STRING(array_agg(id))) as json_fragment\n  FROM position_by_layer_by_id\n  GROUP BY msgid, layer\n),\nposition_with_region as (\n  SELECRT\n    msgid,\n    PARSE_JSON(CONCAT( \"{\", STRING_AGG(json_fragment, \",\"), \"}\")) as regions\n  FROM position_by_layer\n  GROUP BY msgid\n),\nfull_position_with_region as (\n  SELECT\n    *\n  FROM positions\n  LEFT JOIN position_with_region\n  USING (msgid)\n)\n\nSELECT * FROM full_position_with_region",
    "crumbs": [
      "<span class='chapter-number'>25</span>  <span class='chapter-title'>HOW TO - Do point-in-polygon test in BigQuery (BQ) using regions</span>"
    ]
  },
  {
    "objectID": "Areas-HOW-TO---Update-layer-in-pipe-regions.html",
    "href": "Areas-HOW-TO---Update-layer-in-pipe-regions.html",
    "title": "26  HOW TO - Update layer in pipe_regions",
    "section": "",
    "text": "Owner: Hannah Linder Last edited time: 23 de mayo de 2024 2:14 Created time: 1 de marzo de 2024 13:10\nUse Case: Replacing a region layer with a different version of the shapefile. See: ENG-395 - CCSBT region for events Done\nWe will be updating this layer: CCSBT\n\n26.0.1 Steps\n\nget the new shapefile. We want this one. https://drive.google.com/drive/folders/17ZlvqBEaLDBsUmq-QjdPvD6ge3sNj-k1?usp=sharing . Looks like there are two versions in there, let’s look at them in QGIS\nLook at the shapefile in qgis. Check for edge cases - latitude values outside -90, 90. Lon values outside -180, 180, really big polygons that are more than 180 degrees wide, anything out of place. Might need to clip and/or split into multiple pieces. Looks like CCSBT_all_SA is one big polygon and CCSBT_SA_multi covers the same area but is split into multiple polygons. For pipe-regions, more small polygons is better than one big one, since we are going to be chopping them up into small pieces anyway.\nPack up the shapefile into a zip file with all the files at the root of the directory structure inside the zip (no subdirectories).\n\n$ ls\nCCSBT_SA_Multi.cpg  CCSBT_SA_Multi.qpj  \nCCSBT_SA_Multi.dbf  CCSBT_SA_Multi.shp\nCCSBT_SA_Multi.prj  CCSBT_SA_Multi.shx\n$ zip CCSBT_SA_Multi.shp.zip *\nupdating: CCSBT_SA_Multi.cpg (stored 0%)\nupdating: CCSBT_SA_Multi.dbf (deflated 97%)\nupdating: CCSBT_SA_Multi.prj (deflated 15%)\nupdating: CCSBT_SA_Multi.qpj (deflated 39%)\nupdating: CCSBT_SA_Multi.shp (deflated 82%)\nupdating: CCSBT_SA_Multi.shx (deflated 61%)\n$ \n\nThis will be the “normalized” version of the shapefile. In this case we don’t know where the shapefile came from originally, but if we had an original version we would store that in GCS also. Copy the zipped shapefile to GCS. Lets just use the same file as both the original and normalized version\n\n$ gsutil cp CCSBT_SA_Multi.shp.zip gs://pipe-regions-layers-us-central1/rfmo_ccsbt/original/\nCopying file://CCSBT_SA_Multi.shp.zip [Content-Type=application/zip]...\n/ [1 files][  3.7 KiB/  3.7 KiB]                                                \nOperation completed over 1 objects/3.7 KiB.                                      \n$ gsutil cp CCSBT_SA_Multi.shp.zip gs://pipe-regions-layers-us-central1/rfmo_ccsbt/\nCopying file://CCSBT_SA_Multi.shp.zip [Content-Type=application/zip]...\n/ [1 files][  3.7 KiB/  3.7 KiB]                                                \nOperation completed over 1 objects/3.7 KiB.                                      \n$\n\nNow we need to download the layers.yaml file from GCS. We download the current file using the following command:\n\ngsutil cp gs://pipe-regions-layers-us-central1/layers.yaml .\n\nWe update the layer file to point to the new shapefile. In this case, let’s keep the old layer in case we want to use it later, so let’s just rename the ID value. Editing the file layers.yaml we change from this\n\n...\n  -\n    layer_name: rfmo\n    id_value: CCSBT\n    shp_file : rfmo_ccsbt/proposedArea_CCSBT_1.shp.zip\n    doc: https://globalfishingwatch.atlassian.net/wiki/spaces/TD/pages/459833345/CCSBT\n    publish_api: True\n    pg_table: rfmo-areas\n    append_to_table: True\nto this\n…\n...\n  -\n    layer_name: rfmo\n    id_value: CCSBT-proposed\n    shp_file : rfmo_ccsbt/proposedArea_CCSBT_1.shp.zip\n    doc: https://globalfishingwatch.atlassian.net/wiki/spaces/TD/pages/459833345/CCSBT\n    publish_api: True\n    pg_table: rfmo-areas\n    append_to_table: True\n  -\n    layer_name: rfmo\n    id_value: CCSBT\n    shp_file : rfmo_ccsbt/CCSBT_SA_Multi.shp.zip\n    doc: https://globalfishingwatch.atlassian.net/wiki/spaces/TD/pages/459833345/CCSBT\n    publish_api: True\n    pg_table: rfmo-areas\n    append_to_table: True\n  -\nEach key of the yaml means:\n\nlayer_name: Name of the layer. It will be used to name the layer in BQ\nid_value: This param is optional. In the case of rfmo, we need to define it because we will generate a RFMO layer using different layers. In the rest of the layers (mpa, eez, etc) is not neccesary.\nid_field: This param is optional. For the rest of the layers, with this field we define the name of the field that we will use to obtain the id of each region.\nshp_file: Path in the bucket that the shapefile exists\ndoc: Url of the doc\npublish_api: Boolean. True if you want that the process import the data in postgres\npg_table: String. Required if publish_api is true. Name of the table in postgres\nappend_to_table: Boolean. Required if publish_api is true. If false, the sql will replace the table, if not it will delete the rows with the same id of id_value and insert the new ones.\njq_query: String. Optional. This field lets to filter the original geojson file generated from the shapefile with a jq query and only import the regions filtered. Example: select(.properties.category_n == “IUCN MPA”). We use this in protected seas to only import regions with category = “IUCN MPA”\n\n\nNow we upload the file again to GCS\n\ngsutil cp layers.yaml gs://pipe-regions-layers-us-central1/layers.yaml\n\nNow it’s time to update the regions tables in bigquery. Since we only changed 2 shapefiles, we only need to update those. We could re-run all the layers, but that takes a while, so for this we will execute the command defining the –layer_names_to_ingest=rfmo . With this option we only update the rfmos layers but we will regenerate the view with all layers.\n\ndocker compose run --rm pipeline \\\n  -v \\\n  ingest_layers \\\n  --layer_list_file=layers.yaml \\\n  --gcs_root=pipe-regions-layers-us-central1 \\\n  --bq_dataset=pipe_regions_layers \\\n  --pg_instance=dataset-data-production \\\n  --pg_database=postgres \\\n  --bq_view=event_regions \\\n  --layer_names_to_ingest=rfmo  \n\nThe last step is to edit the documentation page for this layer to describe what we did. Now there are 2 versions of this layer available, one with id\n\nCCSBT which is the new one, and one with id CCSBT-proposed which is the old one.\nEdit this page: CCSBT\nAnd then we’re done!",
    "crumbs": [
      "<span class='chapter-number'>26</span>  <span class='chapter-title'>HOW TO - Update layer in pipe_regions</span>"
    ]
  },
  {
    "objectID": "Country-Codes.html",
    "href": "Country-Codes.html",
    "title": "27  Country codes",
    "section": "",
    "text": "27.1 Key Table\ngfw_research.country_codes",
    "crumbs": [
      "<span class='chapter-number'>27</span>  <span class='chapter-title'>Country codes</span>"
    ]
  },
  {
    "objectID": "Country-Codes.html#data-description",
    "href": "Country-Codes.html#data-description",
    "title": "27  Country codes",
    "section": "27.2 Data Description",
    "text": "27.2 Data Description\nThis table provide a means of linking MID code values to ISO3 country codes and corresponding country names. It is also possible to ignore the MID code field and simply use this table to map ISO3 to country name, to produce easier to interpret country labels. The table also includes some specific characteristics of each country/flag including their continent, if they are member of the EU, if they are considered a flag of convenience by the ITF, and the area of their EEZ.\nThis table also includes the eez_id a numeric value that you’ll find in various GFW tables including the vessel info table. Using the country_codes table it is possible map this numeric EEZ_id to and ISO3 or country name.\nA critical field is the country_name_gfw field which represents the GFW approved naming convention. In all external GFW products it is important to use this naming convention.",
    "crumbs": [
      "<span class='chapter-number'>27</span>  <span class='chapter-title'>Country codes</span>"
    ]
  },
  {
    "objectID": "Country-Codes.html#caveats-and-known-issues",
    "href": "Country-Codes.html#caveats-and-known-issues",
    "title": "27  Country codes",
    "section": "27.3 Caveats and Known Issues",
    "text": "27.3 Caveats and Known Issues\nJust a note that naming is very important and care should be taken with labeling vessels or regions with flag State. In nearly all cases, use country_name_gfw when providing longer flag State names.",
    "crumbs": [
      "<span class='chapter-number'>27</span>  <span class='chapter-title'>Country codes</span>"
    ]
  },
  {
    "objectID": "Country-Codes.html#example-query",
    "href": "Country-Codes.html#example-query",
    "title": "27  Country codes",
    "section": "27.4 Example Query",
    "text": "27.4 Example Query\nadding_country_code_names.sql",
    "crumbs": [
      "<span class='chapter-number'>27</span>  <span class='chapter-title'>Country codes</span>"
    ]
  },
  {
    "objectID": "Coverage.html",
    "href": "Coverage.html",
    "title": "28  Coverage",
    "section": "",
    "text": "28.1 Key Tables",
    "crumbs": [
      "<span class='chapter-number'>28</span>  <span class='chapter-title'>Coverage</span>"
    ]
  },
  {
    "objectID": "Coverage.html#key-tables",
    "href": "Coverage.html#key-tables",
    "title": "28  Coverage",
    "section": "",
    "text": "There is no key table for coverage. Coverage is instead calculated in the API without an associated BigQuery table, because coverage is calculated every day (with a 3 day delay) for a vessels activity in the previous year. The coverage value therefore must be recalculated every day, and also must consider if you are vessel records being manually merged together, which requires individual calculations for every manual merge configuration. See Example Queries sections for information on how to manually calculate coverage.",
    "crumbs": [
      "<span class='chapter-number'>28</span>  <span class='chapter-title'>Coverage</span>"
    ]
  },
  {
    "objectID": "Coverage.html#source-tables",
    "href": "Coverage.html#source-tables",
    "title": "28  Coverage",
    "section": "28.2 Source Tables",
    "text": "28.2 Source Tables\n\npipe_v20201001_api.indicators_coverage_blocks_v2 (v2 used in vv 2.0; should be used as default) - daily hourly coverage rate per vessel_id. Each vessel_id lists for every day the number of hours the vessel was active (in a voyage), and the number of hours were at least one AIS transmission was counted. In this way, this table provides a daily coverage value which gets aggregated together in the API to get an overall coverage value. See example query section for query which illustrates how to nearly replicate the coverage calculation seen in Vessel Viewer. &gt; + pipe_v20201001_api.indicators_coverage_blocks (original version currently used in vv (prototype)) - this table is generally reflective of what is in v2, but is maintained separately for vv (prototype).\n\npipe_production_v20201001.vessel_info - used to set the date range for a vessels activity (vessel_id resolution)",
    "crumbs": [
      "<span class='chapter-number'>28</span>  <span class='chapter-title'>Coverage</span>"
    ]
  },
  {
    "objectID": "Coverage.html#data-description",
    "href": "Coverage.html#data-description",
    "title": "28  Coverage",
    "section": "28.3 Data Description",
    "text": "28.3 Data Description\n\nCoverage definition in Vessel Viewer: The coverage metric is an estimate of how well a vessel’s activities, i.e. where it traveled and what it did, can be captured by AIS data. To calculate it, all voyages linked to a vessel in the last year (i.e. 12 months) are segmented into one hour blocks and the total number of blocks with at least one AIS transmission are counted. The coverage metric is a percentage representing the proportion of one hour blocks a vessel is in a voyage and has at least one AIS transmission.",
    "crumbs": [
      "<span class='chapter-number'>28</span>  <span class='chapter-title'>Coverage</span>"
    ]
  },
  {
    "objectID": "Coverage.html#caveats-and-known-issues",
    "href": "Coverage.html#caveats-and-known-issues",
    "title": "28  Coverage",
    "section": "28.4 Caveats and Known Issues",
    "text": "28.4 Caveats and Known Issues\n\nCoverage only calculated during voyages: The coverage calculation is limited to the period of time a vessel is detected in a voyage (eg the activity of a vessel out at sea, between port visits). This means that if a vessel is detected in port, this activity the vessel is active on AIS will not be factored into the coverage calculation. Some of the reasons for this are, (a) if a vessel is in port for a long period of time with its AIS on, that high coverage may be disproportionate and not reflective of the vessels coverage at sea, (b) vessels frequently turn off AIS once in port. If there is an issue detecting port visits for a vessel, this may affect the accuracy of the coverage calculation, given port visits are used to bound the period of time to calculate coverage for.\n\nOne hour intervals: Coverage is evaluated by looking at the frequency a vessel transmits on AIS at least once every hour. Depending on the use case or the area where a vessel is active, evaluating coverage on one hour intervals may result in low coverage. For instance, in some areas satellite reception may be low, resulting in low coverage subsequently. Fishing vessels frequently transmit Class B AIS, which has a less frequent ping rate that could result in lower coverage. These factors and others are important to consider when trying to understand the value/meaning of the coverage metric.\nOne year intervals: In Products, the coverage metric is calculated for the past year of activity with a three day delay. If a vessel of interest has primarily been active during at time not in the past year, then the coverage value is not very useful. However coverage can manually be calculated in BigQuery in these cases. See Example Queries for more.",
    "crumbs": [
      "<span class='chapter-number'>28</span>  <span class='chapter-title'>Coverage</span>"
    ]
  },
  {
    "objectID": "Coverage.html#example-queries",
    "href": "Coverage.html#example-queries",
    "title": "28  Coverage",
    "section": "28.5 Example Queries",
    "text": "28.5 Example Queries\n** if trying to replicate coverage in Vessel Viewer, user should define time range for one year period considering 3 day delay. For example if user looks at coverage in Vessel Viewer on Oct 20th 2023, then date range in example query should be set for Oct 17th 2023 to Oct 17th 2022. + coverage_single_vessel_id.sql - coverage for specified vessel_id and user defined time range + coverage_multi_vessel_id.sql - coverage for list of vessel_ids with user defined time range + coverage_aggregate.sql - aggregate coverage vessel for select group of vessel_ids and user defined time range",
    "crumbs": [
      "<span class='chapter-number'>28</span>  <span class='chapter-title'>Coverage</span>"
    ]
  },
  {
    "objectID": "Coverage.html#links",
    "href": "Coverage.html#links",
    "title": "28  Coverage",
    "section": "28.6 Links",
    "text": "28.6 Links\n\nVessel Viewer FAQs - see bottom of page 6 for description of how coverage is defined.",
    "crumbs": [
      "<span class='chapter-number'>28</span>  <span class='chapter-title'>Coverage</span>"
    ]
  },
  {
    "objectID": "Coverage.html#updates",
    "href": "Coverage.html#updates",
    "title": "28  Coverage",
    "section": "28.7 Updates",
    "text": "28.7 Updates\nLast updated on October 20, 2023",
    "crumbs": [
      "<span class='chapter-number'>28</span>  <span class='chapter-title'>Coverage</span>"
    ]
  },
  {
    "objectID": "Satellite-Timing-Offset-Table.html",
    "href": "Satellite-Timing-Offset-Table.html",
    "title": "29  Satellite timing offset",
    "section": "",
    "text": "29.1 Key Tables",
    "crumbs": [
      "<span class='chapter-number'>29</span>  <span class='chapter-title'>Satellite timing offset</span>"
    ]
  },
  {
    "objectID": "Satellite-Timing-Offset-Table.html#key-tables",
    "href": "Satellite-Timing-Offset-Table.html#key-tables",
    "title": "29  Satellite timing offset",
    "section": "",
    "text": "pipe_ais_v3_alpha_published.satellite_timing_offsets\n\n\n29.1.1 Source Tables\n\npipe_ais_sources_v20220628.normalized_spire_*",
    "crumbs": [
      "<span class='chapter-number'>29</span>  <span class='chapter-title'>Satellite timing offset</span>"
    ]
  },
  {
    "objectID": "Satellite-Timing-Offset-Table.html#data-description",
    "href": "Satellite-Timing-Offset-Table.html#data-description",
    "title": "29  Satellite timing offset",
    "section": "29.2 Data Description",
    "text": "29.2 Data Description\nFor Spire’s satellite clocks there are two effects that we’ve seen. One is a steady, slow drift over time. This is rarely an issue since the clocks are periodically reset. The second effect is a sudden, large jump in clock’s time which I suspect is due to bit flips in the clocks due to cosmic rays or similar unfriendly particles. This can offset the clock anywhere from minutes to days (about two days is the largest I’ve seen) and results in some very confusing tracks.\nIn order to estimate the clocks offset we compare the times from clocks on all of the satellites we have IDs for by looking at signals from vessels that are broadcast closely in time and and received by different satellites. By using the vessels location, course and speed we can estimate the time between when each signal was broadcast. Comparing this to the difference in the message timestamps gives an estimate of how far off the timestamps are for a pair of satellites. By looking across many vessels and pairs of satellites we derive estimate for how far off the clock for each satellites is from the consensus timestamp, that is the median of all the satellite clocks.\nThis table is derived directly from the normalized_spire sources, e.g., pipe_ais_sources_v20220628.normalized_spire_*\nThis table is used to automatically drop all the messages from satellites with clocks that are off by more than 30 s (I need to check that), this happens on an hour by hour basis. This only applies to Spire.\nThe messages are dropped because they really mess up the tracks particularly when the clocks get really off. When you really notice is when two receivers are getting messages and one is a few minutes off, the boat periodically appears to move backward and forward in space when you map it, although it’s really the timestamps are off and the position information is fine. Often the segmenter will drop these into their own bad segment, but not always.",
    "crumbs": [
      "<span class='chapter-number'>29</span>  <span class='chapter-title'>Satellite timing offset</span>"
    ]
  },
  {
    "objectID": "Pipeline.html",
    "href": "Pipeline.html",
    "title": "31  GFW Pipelines",
    "section": "",
    "text": "31.1 AIS pipeline\nThe AIS pipeline is GFW’s primary pipeline and includes the following processes:\nAIS data tables and AIS event tables produced by a given version of the AIS pipeline are stored within a BigQuery dataset named pipe_production_vYYYYMMDD, where the YYYYMMDD refers to the date the pipeline was created. Additionally, AIS research tables, which are designed for research and analysis, are stored in gfw_research, with each table including the AIS pipeline version (YYYYMMDD) in its name (e.g. pipe_vYYYYMMDD).",
    "crumbs": [
      "<span class='chapter-number'>31</span>  <span class='chapter-title'>GFW Pipelines</span>"
    ]
  },
  {
    "objectID": "Pipeline.html#ais-pipeline",
    "href": "Pipeline.html#ais-pipeline",
    "title": "31  GFW Pipelines",
    "section": "",
    "text": "Normalize and combine raw AIS data from Orbcomm and Spire\nRemove noise and group positions into segments (e.g. the “segmenter”)\nPredict which positions are likely fishing positions\nIdentify various event types (e.g. transshipment, port visits, fishing, AIS gaps, etc.)\n\n\n\n31.1.1 AIS data tables\nAIS data tables are tables produced by the AIS pipeline that contain a version or summary of the entire AIS dataset. The first type of AIS data tables are those that contain a complete copy of the AIS data output during various steps in the pipeline:\n\nposition_messages_YYYYMMDD\nmessages_segmented_YYYYMMDD\nspatial_measures_YYYYMMDD\nfeatures_YYYYMMDD\nfishing_score_YYYYMMDD\nmessages_scored_YYYYMMDD\n\nFor example, the position_messages_YYYYMMDD table is output following data normalization, and the messages_segmented_YYYYMMDD table is the output of the segmenter stage of the AIS pipeline. The final output is the messages_scored_ table, which contains all AIS position messages and their fishing score.\nThe other group of AIS data tables include tables that summarize the complete AIS data by segment or vessel. These tables may be further organized into daily date sharded tables and overall tables. Daily summary tables are considered “static”, meaning their data is fixed, while overall summary tables are considered dynamic because their data is subject to change over time as new data are incorporated.\n\nsegment_vessel_daily_YYYYMMDD and segment_vessel\nsegment_info\nsegment_identity_daily_YYYYMMDD\nvessel_info\n\n\n31.1.1.1 vessel_id\nA key feature of the AIS data tables is vessel_id, which is intended as a unique ID for an identity in the AIS data and is used to link AIS positions to an identity and AIS events…[EXPAND].\n\n\n\n31.1.2 AIS research tables\nBecause AIS data tables, specifically messages_scored_, contain all AIS positions, they are extremely large tables and expensive to query. However, AIS messages are often broadcast every few seconds, which is much finer temporal resolution than needed for most research and analysis work. Therefore, the GFW AIS pipeline produces a series of “research tables” designed specifically to be more efficient for research/analysis. These tables start with the prefix research_.\nKey details of the research tables include the following: + AIS positions in the main research table (research_messages) are thinned to one position per minute per segment + Every AIS position is assigned an amount of time (hours), which is equal to the time since the previous position in the segment + There are two different fishing score variables - nnet_score and night_loitering. Use night_loitering for squid_jiggers and nnet_score for all other fishing classes.\n\n\n31.1.3 AIS event tables\nLastly, the AIS pipeline includes a series of algorithms that identify certain vessel behaviors, referred to as events: + Encounters + Loitering + Port visits and voyages + Fishing events",
    "crumbs": [
      "<span class='chapter-number'>31</span>  <span class='chapter-title'>GFW Pipelines</span>"
    ]
  },
  {
    "objectID": "Pipeline.html#vms-pipeline",
    "href": "Pipeline.html#vms-pipeline",
    "title": "31  GFW Pipelines",
    "section": "31.2 VMS pipeline",
    "text": "31.2 VMS pipeline\nGFW also creates individual VMS pipelines to process national VMS data. The output tables of the VMS pipelines mirror the data and event tables from the AIS pipeline and are stored in datasets named pipe_[country]_production_vYYYYMMDD. The VMS pipeline does not (yet) output VMS research tables.",
    "crumbs": [
      "<span class='chapter-number'>31</span>  <span class='chapter-title'>GFW Pipelines</span>"
    ]
  },
  {
    "objectID": "Wiki-Documentation-Standards.html",
    "href": "Wiki-Documentation-Standards.html",
    "title": "31  Wiki Page Requirements",
    "section": "",
    "text": "Each unique wiki page describing a GFW dataset must include the below sections. For long sections, the use of sub-headers within is encouraged to improve organization.\n\nData Overview - Short paragraph providing a high level description of the dataset\n\nThis section should include the Owner name - the GFW staff member responsible for the relevant dataset (see Data Ownership Requirements)\n\nKey Tables\n\nCurrent output table(s)\nPrevious output table version (at least one version previous with any important notes on pipeline version or other table versioning that fed into the table)\nPrecursor tables (when appropriate) - These are intermediate tables used in the production of the output tables\n\nData Description - Detailed but concise description of the data and methods. Should be written to an analyst or advanced user but someone totally unfamiliar with the dataset. However, in-depth explanation should be expanded upon in training slides\n\nDefinition of output table - what is it, and what is it used for\nExplanation of any restrictions on the data (e.g., if there are confidence values involved, specific vessel types, etc.)\nKey fields - Specific data fields in the key tables that are particularly important (e.g. on_fishing_list_best, nnet_score, good_seg, etc.)\n\nCaveats and Known Issues - Descriptions of any important caveats, limitations, or known issues (e.g. minor bugs) to be aware of when using the data.\nExample Queries - Bulleted list of links to .sql files stored in the queries/examples/current folder of this same GitHub repo\nLinks\n\nTraining slides / loom videos / other training material on the subject (for which the owner is responsible to maintain)\nGitHub repo for data source code (if pertinent)\nLinks to related wiki pages\n\nUpdates - Dated list of updates to the key table(s)\n\n\n32 Data Ownership Requirements\n\nAny changes to key tables must be reflected in the GitHub wiki.\nThe owner must ensure the that key tables all have informative schemas and descriptions\n\nInclude all source tables in the table description. See pipe_production_v20201001.published_events_port_visits_ for an example\nThis process should be automated whenever possible\n\nOwner must update current version in the wiki page that lists current versions of primary datasets\nOwner is responsible for maintaining up-to-date example queries and training slides for the dataset",
    "crumbs": [
      "<span class='chapter-number'>31</span>  <span class='chapter-title'>Wiki Page Requirements</span>"
    ]
  },
  {
    "objectID": "Useful-links.html",
    "href": "Useful-links.html",
    "title": "32  Internal materials",
    "section": "",
    "text": "32.1 Training materials",
    "crumbs": [
      "<span class='chapter-number'>32</span>  <span class='chapter-title'>Internal materials</span>"
    ]
  },
  {
    "objectID": "Useful-links.html#training-materials",
    "href": "Useful-links.html#training-materials",
    "title": "32  Internal materials",
    "section": "",
    "text": "Bi-weekly tech call\nCode Meeting Recordings\nGFW Data Training Folder\n\nTraining Slide Decks\nShapefiles in BigQuery\nQGIS Data Training\n\nBQ Practice Queries\n2021 Fall Training Agenda with Presentation Links",
    "crumbs": [
      "<span class='chapter-number'>32</span>  <span class='chapter-title'>Internal materials</span>"
    ]
  },
  {
    "objectID": "Useful-links.html#quality-assurance",
    "href": "Useful-links.html#quality-assurance",
    "title": "32  Internal materials",
    "section": "32.2 Quality Assurance",
    "text": "32.2 Quality Assurance\n\nProject Data QA folder\nNaming conventions DRAFT",
    "crumbs": [
      "<span class='chapter-number'>32</span>  <span class='chapter-title'>Internal materials</span>"
    ]
  },
  {
    "objectID": "Useful-links.html#gfw-tools",
    "href": "Useful-links.html#gfw-tools",
    "title": "32  Internal materials",
    "section": "32.3 GFW tools",
    "text": "32.3 GFW tools\n\ngfwr documentation - r package to pull data from GFW’s API Portal; planned to be publicly released alongside API Portal, July 19 2022\n\nfishwatchr documentation\ngfw bubble plot tool\ngfw shiny-tools\nEEZ analysis template # External materials",
    "crumbs": [
      "<span class='chapter-number'>32</span>  <span class='chapter-title'>Internal materials</span>"
    ]
  },
  {
    "objectID": "Useful-links.html#r",
    "href": "Useful-links.html#r",
    "title": "32  Internal materials",
    "section": "32.4 R",
    "text": "32.4 R\n\nRStudio Cheatsheets\nHands-On Programming with R\nR for Data Science\nSpatial Data Science with applications in R\nBig Book of R - Great list of R books. It is well organized categorically.",
    "crumbs": [
      "<span class='chapter-number'>32</span>  <span class='chapter-title'>Internal materials</span>"
    ]
  },
  {
    "objectID": "Useful-links.html#bigquery",
    "href": "Useful-links.html#bigquery",
    "title": "32  Internal materials",
    "section": "32.5 BigQuery",
    "text": "32.5 BigQuery\n\nBigQuery Geo Viz - to see how shapefiles in BQ look on a map\nBounding Box - to identify coordinates around area of interest",
    "crumbs": [
      "<span class='chapter-number'>32</span>  <span class='chapter-title'>Internal materials</span>"
    ]
  },
  {
    "objectID": "Useful-links.html#qgis",
    "href": "Useful-links.html#qgis",
    "title": "32  Internal materials",
    "section": "32.6 QGIS",
    "text": "32.6 QGIS",
    "crumbs": [
      "<span class='chapter-number'>32</span>  <span class='chapter-title'>Internal materials</span>"
    ]
  },
  {
    "objectID": "Data-products-page-TEMPLATE.html",
    "href": "Data-products-page-TEMPLATE.html",
    "title": "33  Data products page template",
    "section": "",
    "text": "33.1 Key Tables\nNEW version + NEW TABLE\nCurrent version + CURRENT TABLE\nPrevious version + PREVIOUS TABLE",
    "crumbs": [
      "<span class='chapter-number'>33</span>  <span class='chapter-title'>Data products page template</span>"
    ]
  },
  {
    "objectID": "Data-products-page-TEMPLATE.html#source-tables",
    "href": "Data-products-page-TEMPLATE.html#source-tables",
    "title": "33  Data products page template",
    "section": "33.2 Source Tables",
    "text": "33.2 Source Tables\n\ntable name - context on table and how it is a source table for the Key Table\ntable name - context on table and how it is a source table for the Key Table",
    "crumbs": [
      "<span class='chapter-number'>33</span>  <span class='chapter-title'>Data products page template</span>"
    ]
  },
  {
    "objectID": "Data-products-page-TEMPLATE.html#data-description",
    "href": "Data-products-page-TEMPLATE.html#data-description",
    "title": "33  Data products page template",
    "section": "33.3 Data Description",
    "text": "33.3 Data Description\n\nDescription of data",
    "crumbs": [
      "<span class='chapter-number'>33</span>  <span class='chapter-title'>Data products page template</span>"
    ]
  },
  {
    "objectID": "Data-products-page-TEMPLATE.html#caveats-and-known-issues",
    "href": "Data-products-page-TEMPLATE.html#caveats-and-known-issues",
    "title": "33  Data products page template",
    "section": "33.4 Caveats and Known Issues",
    "text": "33.4 Caveats and Known Issues\n\nKnown issues",
    "crumbs": [
      "<span class='chapter-number'>33</span>  <span class='chapter-title'>Data products page template</span>"
    ]
  },
  {
    "objectID": "Data-products-page-TEMPLATE.html#example-queries",
    "href": "Data-products-page-TEMPLATE.html#example-queries",
    "title": "33  Data products page template",
    "section": "33.5 Example Queries",
    "text": "33.5 Example Queries\n\nLink or copy and paste example queries",
    "crumbs": [
      "<span class='chapter-number'>33</span>  <span class='chapter-title'>Data products page template</span>"
    ]
  },
  {
    "objectID": "Data-products-page-TEMPLATE.html#links",
    "href": "Data-products-page-TEMPLATE.html#links",
    "title": "33  Data products page template",
    "section": "33.6 Links",
    "text": "33.6 Links\n\nList of relevant links with context on use of link",
    "crumbs": [
      "<span class='chapter-number'>33</span>  <span class='chapter-title'>Data products page template</span>"
    ]
  },
  {
    "objectID": "Data-products-page-TEMPLATE.html#updates",
    "href": "Data-products-page-TEMPLATE.html#updates",
    "title": "33  Data products page template",
    "section": "33.7 Updates",
    "text": "33.7 Updates\nLast updated on ENTER DATE\n\n[DATE] The table name update update update.",
    "crumbs": [
      "<span class='chapter-number'>33</span>  <span class='chapter-title'>Data products page template</span>"
    ]
  },
  {
    "objectID": "training-materials-README.html",
    "href": "training-materials-README.html",
    "title": "(PART) Training materials",
    "section": "",
    "text": "GFW Data Training Materials\nhttps://docs.google.com/document/d/1mvpQa01gRTvEKKCcrqCwinapJ_NKB66MlLmxa1RGQrM/edit?tab=t.0\nPurpose: The GFW Data Training Shared Drive contains training materials for using GFW data.\nUses:\n\nReference for current GFW staff and partners\n\nOnboarding for new GFW staff and partners\n\nPeriodic training meetings and workshops\n\nContents:\n\nTraining Slide Decks: This folder contains numerous slide decks focused on different GFW datasets. The most up-to-date training slide decks are in training_slides_current. Quarterly versions of the complete training slide deck set are saved in training_slides_archive following the naming convention training_slides_YYYY_Q\nExample Queries: This folder contains a Google Doc with descriptions and links to the most current example queries for working with GFW data.\n\nAll queries are saved as SQL files on GitHub in the queries/examples/current folder in the bigquery-documentation-wf827 repo.\n\nOld versions of example queries are stored in the queries/examples/archive folder\n\n\nBigQuery Table Reference: Table containing current best list of datasets and tables to use for analysis\nTraining Workshops: This folder contains various admin materials for planning GFW training workshops\n\nUpdating: As new versions of datasets and tables are produced, GFW staff should periodically update the GFW data training materials for their assigned datasets (see Assignments) accordingly. This process includes the following:\n\nGFW staff add/update example queries.\n\nThe old versions of the queries should be moved to the queries/examples/archive folder in the bigquery-documentation-wf827 repo.\n\nThe new versions of the queries should be added to the queries/examples/current folder using the options below. Queries should be clearly named according to what they do and be date-versioned with the vYYYYMMDD format (e.g. vessel_track_with_fishing_hours_vYYYYMMDD.sql).\n\n\n\nOption A: Clone the bigquery-documentation-wf827 repo and push new queries to the correct folder (make sure to pull first if not cloning for the first time!)\n\nOption B: Upload files to the bigquery-documentation-wf827 repo\n\nStep 1: Save example query locally as a .sql file\n\nStep 2: Navigate to the current example query folder bigquery-documentation-wf827/queries/examples/current\n\nStep 3: Click Upload files\n\nStep 4: Drag/drop file, add a commit message, and press Commit\n\n\nOption C: Create a new file directly in the bigquery-documentation-wf827 repo on github.com\n\nStep 1: Navigate to the example query folder for the current quarter in bigquery-documentation-wf827/queries/examples/current\n\nStep 2: Click Create new file\n\nStep 3: Name query in the Name your file… box (make sure to use .sql suffix)\n\nStep 4: Copy/paste query into the &lt;&gt;Edit new file window\n\nStep 5: Add a commit message and press Commit\n\n\n\nGFW staff update their assigned slide decks in training_slides_current. Links to example queries should be updated to reference the correct version of the query stored in bigquery-documentation-wf827.\nAll slide decks are combined into a single, versioned slide deck and saved in training_slides_archive (Tyler).\n\nAssignments: GFW staff are responsible for updating the training materials for certain datasets. These assignments are generally based on that staff member’s expertise in the subject/dataset.\n\nBigQuery: Tyler, David\n\nIntro to AIS: David\n\nPipeline: Enrique, Andres, Matias, Tim\n\nResearch tables: Tyler\n\nFishing effort: Tyler\n\nVessel database: Jaeyoon\n\nVessel info tables: Tyler\n\nPorts and voyages: Nate, Tim\n\nTransshipment: Hannah, Nate\n\nVIIRS: Masaki\n\nSAR: Fernando, David\n\nVMS: Bjorn, Tim W",
    "crumbs": [
      "(PART) Training materials"
    ]
  },
  {
    "objectID": "Home.html",
    "href": "Home.html",
    "title": "2  GFW Data Documentation",
    "section": "",
    "text": "2.1 Data Updates\nCheck the Data updates for new changes to GFW data.\nSee the BigQuery Table Reference for checking the latest version of key tables to use.",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>GFW Data Documentation</span>"
    ]
  },
  {
    "objectID": "Home.html#bigquery-key-concepts",
    "href": "Home.html#bigquery-key-concepts",
    "title": "2  GFW Data Documentation",
    "section": "2.2 BigQuery Key Concepts",
    "text": "2.2 BigQuery Key Concepts\nRead the BigQuery Key Concepts page for important things to understand when working with GFW data in BigQuery, including BigQuery best practices.",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>GFW Data Documentation</span>"
    ]
  },
  {
    "objectID": "Home.html#data-products",
    "href": "Home.html#data-products",
    "title": "2  GFW Data Documentation",
    "section": "2.3 Data Products",
    "text": "2.3 Data Products\nGFW data are grouped into the following general categories, or data products, that are used for various analyses.\n\nFishing effort and vessel presences - Activity and fishing activity for all vessels\nFishing events - Activity by the world’s fishing vessels grouped into events\nVessel database and Vessel info tables - Database of vessel identity\nEncounters - Encounters between two vessels\nLoitering - Loitering events by potential transshipment vessels\nAnchorages & voyages - Database of ports and vessel voyages between ports\nCountry VMS - Country-specific VMS data\nSAR Detections - Vessel detections from Sentinel-1 SAR imagery\nAIS Gaps - Dataset of all 6+ hour gaps in AIS signal by MMSI for all vessels.",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>GFW Data Documentation</span>"
    ]
  }
]